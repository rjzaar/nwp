version: 2
features:
  setup:
    name: Setup Script (setup.sh)
    description: NWP prerequisites setup - Docker, DDEV, mkcert, Linode CLI, GitLab
    files:
    - scripts/commands/setup.sh
    checklist:
    - text: Run setup.sh on a fresh system and verify all prerequisites install
      completed: true
      completed_by: rob
      completed_at: '2026-01-11T21:35:56+11:00'
      how_to_verify: '1. On a fresh Ubuntu/Debian system: `cd ~/nwp && ./scripts/commands/setup.sh` or `pl setup`

        2. Use arrow keys to navigate and SPACE to select required components

        3. Press ENTER to apply and watch installation process

        4. Verify Docker: `docker --version` (should show v20+)

        5. Verify DDEV: `ddev version` (should show v1.21+)

        6. Check setup status: `pl setup --status` (should show all required components with [✓])

        Success: All required components marked with [✓] and no error messages during installation'
      related_docs:
      - docs/reference/commands/setup.md
      - docs/guides/setup.md
      - docs/guides/quickstart.md
    - text: Test Docker installation and verify ddev starts correctly
      completed: true
      completed_by: greg
      completed_at: '2026-01-11T16:02:39-07:00'
      how_to_verify: '1. Verify Docker daemon is running: `sudo systemctl status docker` (should show "active (running)")

        2. Test Docker without sudo: `docker ps` (should list containers without permission error)

        3. Verify user is in docker group: `groups | grep docker` (should show docker)

        4. Start a test DDEV project: `mkdir /tmp/test-ddev && cd /tmp/test-ddev && ddev config --project-type=php && ddev start`

        5. Verify DDEV started: `ddev describe` (should show running services)

        6. Clean up: `ddev delete -y && cd ~ && rm -rf /tmp/test-ddev`

        Success: Docker runs without sudo and DDEV project starts successfully'
      related_docs:
      - docs/reference/commands/setup.md
      - docs/guides/setup.md
    - text: Verify mkcert generates valid local certificates
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check mkcert installation: `mkcert -version` (should show version number)

        2. Verify CA is installed: `mkcert -CAROOT` (should show path like ~/.local/share/mkcert)

        3. Check CA certificates exist: `ls -la $(mkcert -CAROOT)` (should show rootCA.pem and rootCA-key.pem)

        4. Generate a test certificate: `cd /tmp && mkcert test.local`

        5. Verify certificate files created: `ls -la test.local*.pem` (should show cert and key files)

        6. Clean up: `rm -f /tmp/test.local*.pem`

        Success: mkcert generates valid certificates and CA is trusted system-wide'
      related_docs:
      - docs/reference/commands/setup.md
      - docs/guides/setup.md
    - text: Test Linode CLI authentication if configured
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check Linode CLI installation: `linode-cli --version` (should show version number)

        2. Verify configuration file exists: `cat ~/.config/linode-cli` (should show API token redacted)

        3. Test authentication: `linode-cli account view` (should show your account information)

        4. Verify read permissions: `linode-cli linodes list` (should list Linodes or show empty array)

        5. Check for API errors: previous commands should not show "Invalid Token" errors

        Success: Linode CLI authenticates successfully and can retrieve account information'
      related_docs:
      - docs/reference/commands/setup.md
      - docs/guides/setup.md
    - text: Check that all error messages are clear and actionable
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test setup without prerequisites: On fresh system run `pl setup` and deliberately skip a dependency

        2. Verify error message explains what''s missing and how to fix it

        3. Test with invalid Linode token: Enter "invalid-token" when prompted for Linode API token

        4. Verify error message identifies the token as invalid and suggests checking token

        5. Test component installation failure: Disconnect network and try to install a component

        6. Verify error message explains the network issue and suggests checking connection

        Success: All error messages include clear explanation of problem and actionable next steps'
      related_docs:
      - docs/reference/commands/setup.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: notes on setup.
    history:
    - action: notes_updated
      by: greg
      at: '2026-01-11T16:08:58-07:00'
    - action: checklist_item_uncompleted
      by: greg
      at: '2026-01-11T16:08:06-07:00'
      context: Item 3 marked incomplete
    - action: checklist_item_completed
      by: greg
      at: '2026-01-11T16:08:05-07:00'
      context: Item 3 completed
    - action: checklist_item_completed
      by: greg
      at: '2026-01-11T16:02:39-07:00'
      context: Item 2 completed
    - action: checklist_item_uncompleted
      by: rob
      at: '2026-01-11T21:35:27+11:00'
      context: Item 5 marked incomplete
    - action: checklist_item_uncompleted
      by: rob
      at: '2026-01-11T21:35:26+11:00'
      context: Item 4 marked incomplete
    - action: checklist_item_uncompleted
      by: rob
      at: '2026-01-11T21:35:24+11:00'
      context: Item 2 marked incomplete
    - action: checklist_item_uncompleted
      by: rob
      at: '2026-01-11T21:35:23+11:00'
      context: Item 3 marked incomplete
    - action: checklist_item_uncompleted
      by: rob
      at: '2026-01-11T21:35:21+11:00'
      context: Item 1 marked incomplete
    - action: checklist_item_completed
      by: rob
      at: '2026-01-11T21:35:56+11:00'
      context: Item 1 completed
  install:
    name: Install Script (install.sh)
    description: Main installation script - reads cnwp.yml and installs sites
    files:
    - scripts/commands/install.sh
    - lib/install-common.sh
    - lib/install-drupal.sh
    - lib/install-steps.sh
    checklist:
    - text: Test install with 'd' recipe (standard Drupal)
      completed: true
      completed_by: greg
      completed_at: '2026-01-11T16:59:21-07:00'
      how_to_verify: '1. Run: `pl install d` and provide a unique site name when prompted

        2. Monitor installation progress through all steps

        3. Verify site created: `ls ~/nwp/sites/[sitename]/` (should show site directory)

        4. Check DDEV status: `cd ~/nwp/sites/[sitename] && ddev describe` (should show running)

        5. Access site URL: Open the URL from ddev describe in a browser

        6. Verify site loads correctly with expected Drupal installation

        Success: Site installs without errors and is accessible in browser'
      related_docs:
      - docs/reference/commands/install.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with 'os' recipe (Open Social)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: `pl install os` and provide a unique site name when prompted

        2. Monitor installation progress through all steps

        3. Verify site created: `ls ~/nwp/sites/[sitename]/` (should show site directory)

        4. Check DDEV status: `cd ~/nwp/sites/[sitename] && ddev describe` (should show running)

        5. Access site URL: Open the URL from ddev describe in a browser

        6. Verify site loads correctly with expected Drupal installation

        Success: Site installs without errors and is accessible in browser'
      related_docs:
      - docs/reference/commands/install.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with 'nwp' recipe (NWP base)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: `pl install nwp` and provide a unique site name when prompted

        2. Monitor installation progress through all steps

        3. Verify site created: `ls ~/nwp/sites/[sitename]/` (should show site directory)

        4. Check DDEV status: `cd ~/nwp/sites/[sitename] && ddev describe` (should show running)

        5. Access site URL: Open the URL from ddev describe in a browser

        6. Verify site loads correctly with expected Drupal installation

        Success: Site installs without errors and is accessible in browser'
      related_docs:
      - docs/reference/commands/install.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with 'avc' recipe (AV Commons)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: `pl install avc` and provide a unique site name when prompted

        2. Monitor installation progress through all steps

        3. Verify site created: `ls ~/nwp/sites/[sitename]/` (should show site directory)

        4. Check DDEV status: `cd ~/nwp/sites/[sitename] && ddev describe` (should show running)

        5. Access site URL: Open the URL from ddev describe in a browser

        6. Verify site loads correctly with expected Drupal installation

        Success: Site installs without errors and is accessible in browser'
      related_docs:
      - docs/reference/commands/install.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with 'avc-dev' recipe (AV Commons developer)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: `pl install RECIPE` and provide a unique site name when prompted

        2. Monitor installation progress through all steps

        3. Verify site created: `ls ~/nwp/sites/[sitename]/` (should show site directory)

        4. Check DDEV status: `cd ~/nwp/sites/[sitename] && ddev describe` (should show running)

        5. Access site URL: Open the URL from ddev describe in a browser

        6. Verify site loads correctly with expected Drupal installation

        Success: Site installs without errors and is accessible in browser'
      related_docs:
      - docs/reference/commands/install.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with 'dm' recipe (Divine Mercy)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: `pl install dm` and provide a unique site name when prompted

        2. Monitor installation progress through all steps

        3. Verify site created: `ls ~/nwp/sites/[sitename]/` (should show site directory)

        4. Check DDEV status: `cd ~/nwp/sites/[sitename] && ddev describe` (should show running)

        5. Access site URL: Open the URL from ddev describe in a browser

        6. Verify site loads correctly with expected Drupal installation

        Success: Site installs without errors and is accessible in browser'
      related_docs:
      - docs/reference/commands/install.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with 'm' recipe (Moodle)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: `pl install m` and provide a unique site name when prompted

        2. Monitor installation progress through all steps

        3. Verify site created: `ls ~/nwp/sites/[sitename]/` (should show site directory)

        4. Check DDEV status: `cd ~/nwp/sites/[sitename] && ddev describe` (should show running)

        5. Access site URL: Open the URL from ddev describe in a browser

        6. Verify site loads correctly with expected Drupal installation

        Success: Site installs without errors and is accessible in browser'
      related_docs:
      - docs/reference/commands/install.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with 'gitlab' recipe
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: `pl install gitlab` and provide a unique site name when prompted

        2. Monitor installation progress through all steps

        3. Verify site created: `ls ~/nwp/sites/[sitename]/` (should show site directory)

        4. Check DDEV status: `cd ~/nwp/sites/[sitename] && ddev describe` (should show running)

        5. Access site URL: Open the URL from ddev describe in a browser

        6. Verify site loads correctly with expected Drupal installation

        Success: Site installs without errors and is accessible in browser'
      related_docs:
      - docs/reference/commands/install.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with 'pod' recipe (Podcast)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: `pl install pod` and provide a unique site name when prompted

        2. Monitor installation progress through all steps

        3. Verify site created: `ls ~/nwp/sites/[sitename]/` (should show site directory)

        4. Check DDEV status: `cd ~/nwp/sites/[sitename] && ddev describe` (should show running)

        5. Access site URL: Open the URL from ddev describe in a browser

        6. Verify site loads correctly with expected Drupal installation

        Success: Site installs without errors and is accessible in browser'
      related_docs:
      - docs/reference/commands/install.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Verify site starts and is accessible via browser
      completed: true
      completed_by: greg
      completed_at: '2026-01-11T16:59:39-07:00'
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: site starts and is accessible via browser

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/install.md
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Check admin login works with generated credentials
      completed: true
      completed_by: greg
      completed_at: '2026-01-11T16:59:48-07:00'
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: admin login works with generated credentials

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/install.md
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with --list flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run command with flag: `pl install [recipe] --list`

        2. Verify flag behavior matches documentation

        3. Check command output for expected results

        4. Verify any state changes are correct

        5. Test that flag can be combined with other valid flags if applicable

        Success: Flag works as documented without errors'
      related_docs:
      - docs/reference/commands/install.md
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with -s=N (resume from step N)
      completed: true
      completed_by: greg
      completed_at: '2026-01-11T16:59:57-07:00'
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test install with -s=N (resume from step N)

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/install.md
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with --resume flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run command with flag: `pl install [recipe] --resume`

        2. Verify flag behavior matches documentation

        3. Check command output for expected results

        4. Verify any state changes are correct

        5. Test that flag can be combined with other valid flags if applicable

        Success: Flag works as documented without errors'
      related_docs:
      - docs/reference/commands/install.md
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with -p=t (testing purpose)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test install with -p=t (testing purpose)

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/install.md
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with -p=i (indefinite purpose)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test install with -p=i (indefinite purpose)

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/install.md
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with -p=p (permanent purpose)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test install with -p=p (permanent purpose)

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/install.md
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with -p=m (migration purpose - stub only)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test install with -p=m (migration purpose - stub only)

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/install.md
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with c flag (create test content)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run command with flag: `pl install [recipe] `

        2. Verify flag behavior matches documentation

        3. Check command output for expected results

        4. Verify any state changes are correct

        5. Test that flag can be combined with other valid flags if applicable

        Success: Flag works as documented without errors'
      related_docs:
      - docs/reference/commands/install.md
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Verify cnwp.yml is updated correctly after install
      completed: true
      completed_by: greg
      completed_at: '2026-01-11T17:01:47-07:00'
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: cnwp.yml is updated correctly after install

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/install.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with custom target name
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test install with custom target name

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/install.md
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install with auto mode enabled in recipe
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: `pl install RECIPE` and provide a unique site name when prompted

        2. Monitor installation progress through all steps

        3. Verify site created: `ls ~/nwp/sites/[sitename]/` (should show site directory)

        4. Check DDEV status: `cd ~/nwp/sites/[sitename] && ddev describe` (should show running)

        5. Access site URL: Open the URL from ddev describe in a browser

        6. Verify site loads correctly with expected Drupal installation

        Success: Site installs without errors and is accessible in browser'
      related_docs:
      - docs/reference/commands/install.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test install_step tracking in cnwp.yml
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test install_step tracking in cnwp.yml

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/install.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    - text: Test interactive option selection works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run command with flag: `pl install [recipe] `

        2. Verify flag behavior matches documentation

        3. Check command output for expected results

        4. Verify any state changes are correct

        5. Test that flag can be combined with other valid flags if applicable

        Success: Flag works as documented without errors'
      related_docs:
      - docs/reference/commands/install.md
      - docs/guides/developer-workflow.md
      - docs/guides/quickstart.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
    history:
    - action: checklist_item_completed
      by: greg
      at: '2026-01-11T17:01:48-07:00'
      context: Item 20 completed
    - action: checklist_item_completed
      by: greg
      at: '2026-01-11T16:59:58-07:00'
      context: Item 13 completed
    - action: checklist_item_completed
      by: greg
      at: '2026-01-11T16:59:48-07:00'
      context: Item 11 completed
    - action: checklist_item_completed
      by: greg
      at: '2026-01-11T16:59:39-07:00'
      context: Item 10 completed
    - action: checklist_item_completed
      by: greg
      at: '2026-01-11T16:59:21-07:00'
      context: Item 1 completed
    - action: checklist_item_uncompleted
      by: greg
      at: '2026-01-11T16:33:29-07:00'
      context: Item 1 marked incomplete
    - action: checklist_item_completed
      by: greg
      at: '2026-01-11T16:33:24-07:00'
      context: Item 1 completed
  status:
    name: Status Script (status.sh)
    description: Status display, health checks, and site management
    files:
    - scripts/commands/status.sh
    checklist:
    - text: Run status.sh with no arguments - verify all sites listed
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Execute the command: `the command`

        2. Observe command output and behavior

        3. Verify output format matches documentation

        4. Check that expected information is displayed

        5. Test command with various scenarios if applicable

        6. Verify command exits with appropriate exit code

        Success: Command runs successfully and produces expected output'
      related_docs:
      - docs/reference/commands/status.md
    - text: Run status.sh <sitename> - verify detailed info shown
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Execute the command: `the command`

        2. Observe command output and behavior

        3. Verify output format matches documentation

        4. Check that expected information is displayed

        5. Test command with various scenarios if applicable

        6. Verify command exits with appropriate exit code

        Success: Command runs successfully and produces expected output'
      related_docs:
      - docs/reference/commands/status.md
    - text: Check running/stopped status is accurate
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: running/stopped status is accurate

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/status.md
    - text: Verify URLs displayed are correct and accessible
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: URLs displayed are correct and accessible

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/status.md
    - text: Test health check indicators (database, files, config)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test health check indicators (database, files, config)

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/status.md
      - example.cnwp.yml
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  modify:
    name: Modify Script (modify.sh)
    description: Interactive TUI for modifying site options
    files:
    - scripts/commands/modify.sh
    checklist:
    - text: Run modify.sh <sitename> and navigate TUI menus
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Execute the command: `the command`

        2. Observe command output and behavior

        3. Verify output format matches documentation

        4. Check that expected information is displayed

        5. Test command with various scenarios if applicable

        6. Verify command exits with appropriate exit code

        Success: Command runs successfully and produces expected output'
      related_docs:
      - docs/reference/commands/modify.md
      - docs/guides/developer-workflow.md
    - text: Test changing site options (theme, modules, etc.)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test changing site options (theme, modules, etc.)

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/modify.md
      - docs/guides/developer-workflow.md
    - text: Verify changes are saved to cnwp.yml correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: changes are saved to cnwp.yml correctly

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/modify.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
    - text: Test cancel/exit without saving
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test cancel/exit without saving

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/modify.md
      - docs/guides/developer-workflow.md
    - text: Check keyboard navigation (arrows, enter, escape)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: keyboard navigation (arrows, enter, escape)

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/modify.md
      - docs/guides/developer-workflow.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  backup:
    name: Backup Script (backup.sh)
    description: Site backup with database, files, git backup, and sanitization
    files:
    - scripts/commands/backup.sh
    - lib/git.sh
    - lib/sanitize.sh
    checklist:
    - text: 'Test full backup: ./backup.sh <sitename>'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create or use existing test site with content

        2. Run backup command: `pl backup [sitename]`

        3. Verify backup created: `ls -la ~/nwp/backups/[sitename]/` (should show timestamped backup)

        4. Check backup contents match expectations based on test

        5. Verify backup can be listed and identified

        6. Test that backup doesn''t interfere with site operation

        Success: Backup completes successfully with expected results'
      related_docs:
      - docs/reference/commands/backup.md
    - text: 'Test database-only backup: ./backup.sh -b <sitename>'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create or use existing test site with content

        2. Run backup command: `pl backup [sitename]`

        3. Verify backup created: `ls -la ~/nwp/backups/[sitename]/` (should show timestamped backup)

        4. Check backup contents match expectations based on test

        5. Verify backup can be listed and identified

        6. Test that backup doesn''t interfere with site operation

        Success: Backup completes successfully with expected results'
      related_docs:
      - docs/reference/commands/backup.md
    - text: Verify backup files created in sitebackups/<sitename>/
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: backup files created in sitebackups/<sitename>/

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/backup.md
    - text: Test --sanitize basic flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create or use existing test site with content

        2. Run backup command: `pl backup [sitename]`

        3. Verify backup created: `ls -la ~/nwp/backups/[sitename]/` (should show timestamped backup)

        4. Check backup contents match expectations based on test

        5. Verify backup can be listed and identified

        6. Test that backup doesn''t interfere with site operation

        Success: Backup completes successfully with expected results'
      related_docs:
      - docs/reference/commands/backup.md
    - text: Test --sanitize full flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create or use existing test site with content

        2. Run backup command: `pl backup [sitename]`

        3. Verify backup created: `ls -la ~/nwp/backups/[sitename]/` (should show timestamped backup)

        4. Check backup contents match expectations based on test

        5. Verify backup can be listed and identified

        6. Test that backup doesn''t interfere with site operation

        Success: Backup completes successfully with expected results'
      related_docs:
      - docs/reference/commands/backup.md
    - text: Test --git flag pushes to GitLab repository
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create or use existing test site with content

        2. Run backup command: `pl backup [sitename]`

        3. Verify backup created: `ls -la ~/nwp/backups/[sitename]/` (should show timestamped backup)

        4. Check backup contents match expectations based on test

        5. Verify backup can be listed and identified

        6. Test that backup doesn''t interfere with site operation

        Success: Backup completes successfully with expected results'
      related_docs:
      - docs/reference/commands/backup.md
    - text: Test --bundle creates git bundle file
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create or use existing test site with content

        2. Run backup command: `pl backup [sitename]`

        3. Verify backup created: `ls -la ~/nwp/backups/[sitename]/` (should show timestamped backup)

        4. Check backup contents match expectations based on test

        5. Verify backup can be listed and identified

        6. Test that backup doesn''t interfere with site operation

        Success: Backup completes successfully with expected results'
      related_docs:
      - docs/reference/commands/backup.md
    - text: Verify backup naming convention includes timestamp
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: backup naming convention includes timestamp

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/backup.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  restore:
    name: Restore Script (restore.sh)
    description: Site restoration from backups
    files:
    - scripts/commands/restore.sh
    - lib/rollback.sh
    checklist:
    - text: Test restore from full backup
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create backup: `pl backup [sitename]`

        2. Make changes to site (modify content, config, or files)

        3. Run restore command: `pl restore [sitename]`

        4. Select appropriate backup from list

        5. Verify restoration completes without errors

        6. Check that site state matches backup (content, files, config)

        Success: Site restored to exact state at backup time'
      related_docs:
      - docs/reference/commands/restore.md
      - docs/reference/commands/backup.md
    - text: Test restore from database-only backup
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create backup: `pl backup [sitename]`

        2. Make changes to site (modify content, config, or files)

        3. Run restore command: `pl restore [sitename]`

        4. Select appropriate backup from list

        5. Verify restoration completes without errors

        6. Check that site state matches backup (content, files, config)

        Success: Site restored to exact state at backup time'
      related_docs:
      - docs/reference/commands/restore.md
      - docs/reference/commands/backup.md
    - text: Verify interactive backup selection works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: interactive backup selection works

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/restore.md
      - docs/reference/commands/backup.md
    - text: Test restore with specific backup file path
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create backup: `pl backup [sitename]`

        2. Make changes to site (modify content, config, or files)

        3. Run restore command: `pl restore [sitename]`

        4. Select appropriate backup from list

        5. Verify restoration completes without errors

        6. Check that site state matches backup (content, files, config)

        Success: Site restored to exact state at backup time'
      related_docs:
      - docs/reference/commands/restore.md
      - docs/reference/commands/backup.md
    - text: Verify site works correctly after restore
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: site works correctly after restore

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/restore.md
    - text: Test restore to different site name
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create backup: `pl backup [sitename]`

        2. Make changes to site (modify content, config, or files)

        3. Run restore command: `pl restore [sitename]`

        4. Select appropriate backup from list

        5. Verify restoration completes without errors

        6. Check that site state matches backup (content, files, config)

        Success: Site restored to exact state at backup time'
      related_docs:
      - docs/reference/commands/restore.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  sync:
    name: Sync Script (sync.sh)
    description: Re-sync imported sites with remote sources
    files:
    - scripts/commands/sync.sh
    checklist:
    - text: Test sync with an imported site
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test sync with an imported site

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/sync.md
    - text: Verify database is updated from remote
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: database is updated from remote

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/sync.md
    - text: Check files are synced correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: files are synced correctly

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/sync.md
    - text: Test sync with --files-only flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test sync with --files-only flag

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/sync.md
    - text: Verify local changes are not overwritten unexpectedly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: local changes are not overwritten unexpectedly

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/sync.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  copy:
    name: Copy Script (copy.sh)
    description: Copy/duplicate existing sites
    files:
    - scripts/commands/copy.sh
    checklist:
    - text: 'Test full copy: ./copy.sh source dest'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test full copy: ./copy.sh source dest

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/copy.md
      - docs/guides/developer-workflow.md
    - text: 'Test files-only copy: ./copy.sh -f source dest'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test files-only copy: ./copy.sh -f source dest

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/copy.md
      - docs/guides/developer-workflow.md
    - text: Verify copied site starts and runs independently
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: copied site starts and runs independently

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/copy.md
      - docs/guides/developer-workflow.md
    - text: Check database is correctly duplicated
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: database is correctly duplicated

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/copy.md
      - docs/guides/developer-workflow.md
    - text: Verify cnwp.yml is updated with new site
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: cnwp.yml is updated with new site

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/copy.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
    - text: Test copy to existing site (should warn/fail)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test copy to existing site (should warn/fail)

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/copy.md
      - docs/guides/developer-workflow.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  delete:
    name: Delete Script (delete.sh)
    description: Site deletion with safety checks
    files:
    - scripts/commands/delete.sh
    checklist:
    - text: Test delete with confirmation prompt
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test delete with confirmation prompt

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/delete.md
      - docs/guides/developer-workflow.md
    - text: Test delete with -y auto-confirm flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test delete with -y auto-confirm flag

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/delete.md
      - docs/guides/developer-workflow.md
    - text: Test delete with -b backup flag (creates backup first)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test delete with -b backup flag (creates backup first)

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/delete.md
      - docs/guides/developer-workflow.md
      - docs/reference/commands/backup.md
    - text: Verify DDEV project is stopped and removed
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: DDEV project is stopped and removed

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/delete.md
      - docs/guides/developer-workflow.md
    - text: Verify site directory is removed
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: site directory is removed

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/delete.md
      - docs/guides/developer-workflow.md
    - text: Check cnwp.yml is updated to remove site
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: cnwp.yml is updated to remove site

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/delete.md
      - example.cnwp.yml
      - docs/guides/developer-workflow.md
    - text: Test protection of production sites (should warn)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test protection of production sites (should warn)

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/delete.md
      - docs/guides/developer-workflow.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  make:
    name: Make Script (make.sh)
    description: Site mode switching (dev/staging/production)
    files:
    - scripts/commands/make.sh
    checklist:
    - text: 'Test dev mode: ./make.sh -v <sitename>'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test dev mode: ./make.sh -v <sitename>

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/make.md
      - docs/guides/frontend-theming.md
    - text: 'Test prod mode: ./make.sh -p <sitename>'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test prod mode: ./make.sh -p <sitename>

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/make.md
      - docs/guides/frontend-theming.md
    - text: Verify dev mode enables devel module and disables caching
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: dev mode enables devel module and disables caching

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/make.md
      - docs/guides/frontend-theming.md
    - text: Verify prod mode uninstalls dev modules and enables caching
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: prod mode uninstalls dev modules and enables caching

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/make.md
      - docs/guides/frontend-theming.md
    - text: Check CSS/JS aggregation settings change correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: CSS/JS aggregation settings change correctly

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/make.md
      - example.cnwp.yml
      - docs/guides/frontend-theming.md
    - text: Test with -y auto-confirm flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test with -y auto-confirm flag

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/make.md
      - docs/guides/frontend-theming.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  migration:
    name: Migration Script (migration.sh)
    description: Site migrations from various sources to Drupal 11
    files:
    - scripts/commands/migration.sh
    checklist:
    - text: Test migration from Drupal 7 source
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test migration from Drupal 7 source

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/migration.md
      - docs/guides/migration-workflow.md
    - text: Test migration from Drupal 9/10 source
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test migration from Drupal 9/10 source

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/migration.md
      - docs/guides/migration-workflow.md
    - text: Verify content types are migrated correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: content types are migrated correctly

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/migration.md
      - docs/guides/migration-workflow.md
    - text: Check users and roles are migrated
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: users and roles are migrated

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/migration.md
      - docs/guides/migration-workflow.md
    - text: Verify media/files are migrated
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: media/files are migrated

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/migration.md
      - docs/guides/migration-workflow.md
    - text: Test migration rollback if available
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test migration rollback if available

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/migration.md
      - docs/guides/migration-workflow.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  import:
    name: Import Script (import.sh)
    description: Import existing sites from remote sources
    files:
    - scripts/commands/import.sh
    - lib/import.sh
    - lib/import-tui.sh
    - lib/server-scan.sh
    checklist:
    - text: Test import from SSH remote server
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test import from SSH remote server

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/import.md
      - docs/guides/migration-workflow.md
    - text: Test interactive server scanning
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test interactive server scanning

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/import.md
      - docs/guides/migration-workflow.md
    - text: Verify database is imported correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: database is imported correctly

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/import.md
      - docs/guides/migration-workflow.md
    - text: Check files are downloaded and placed correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: files are downloaded and placed correctly

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/import.md
      - docs/guides/migration-workflow.md
    - text: Verify imported site starts and runs
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Complete the prerequisite setup/action for this verification

        2. Inspect the specific aspect: imported site starts and runs

        3. Compare actual behavior/state with expected behavior

        4. Check edge cases or boundary conditions if applicable

        5. Verify no unexpected side effects occurred

        6. Document any discrepancies or issues found

        Success: Verification passes - actual matches expected behavior'
      related_docs:
      - docs/reference/commands/import.md
      - docs/guides/migration-workflow.md
    - text: Test import with specific database/files paths
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up prerequisites for this test scenario

        2. Execute the command or action described: Test import with specific database/files paths

        3. Observe and verify the behavior matches expectations

        4. Check output, logs, or state changes are correct

        5. Test edge cases or error conditions if applicable

        6. Verify no unexpected side effects or errors occurred

        Success: Test scenario completes as expected with correct results'
      related_docs:
      - docs/reference/commands/import.md
      - docs/guides/migration-workflow.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  live:
    name: Live Provisioning (live.sh)
    description: Live server provisioning at sitename.nwpcode.org
    files:
    - scripts/commands/live.sh
    checklist:
    - text: Test Linode server creation (use test mode if available)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl live --type=shared <sitename> (for GitLab server deployment)\n2. For dedicated: pl live --type=dedicated <sitename>\n3. Check console output for server creation confirmation\n4. Success indicators:\n   - \"Server created successfully\" message\n   - Server IP address displayed\n   - No error messages during provisioning\n5. Verify server appears in cnwp.yml under sites.<sitename>.live.server_ip\n"
      related_docs:
      - docs/reference/commands/live.md
      - docs/deployment/linode-deployment.md
      - docs/deployment/production-deployment.md
    - text: Verify DNS configuration with Cloudflare
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. After running: pl live <sitename>

        2. Check DNS record created: dig <sitename>.nwpcode.org

        3. Verify A record points to server IP

        4. Check Cloudflare dashboard for DNS entry

        5. Success: DNS resolves correctly, record visible in Cloudflare

        '
      related_docs:
      - docs/reference/commands/live.md
      - docs/deployment/linode-deployment.md
    - text: Check SSL certificate is installed correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. After live provisioning completes

        2. Check certificate: curl -vI https://<sitename>.nwpcode.org 2>&1 | grep "SSL certificate"

        3. Verify Let''s Encrypt certificate issued

        4. Test HTTPS access in browser (no warnings)

        5. Success: Valid SSL certificate, HTTPS works, no browser warnings

        '
      related_docs:
      - docs/reference/commands/live.md
      - docs/deployment/production-deployment.md
    - text: Verify site is accessible at sitename.nwpcode.org
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Open browser to https://<sitename>.nwpcode.org

        2. Verify Drupal site loads

        3. Check HTTP redirects to HTTPS

        4. Test login works

        5. Success: Site accessible, redirects work, Drupal functioning

        '
      related_docs:
      - docs/reference/commands/live.md
    - text: Test SSH access to provisioned server
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl live --ssh <sitename>

        2. Or: ssh <user>@<server-ip> (check cnwp.yml for IP)

        3. Verify successful SSH connection

        4. Check you can navigate to /var/www/<sitename>

        5. Success: SSH access granted, site directory accessible

        '
      related_docs:
      - docs/reference/commands/live.md
      - docs/deployment/linode-deployment.md
    - text: Verify firewall rules are applied
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. SSH to provisioned server

        2. Check UFW status: sudo ufw status verbose

        3. Verify only ports 22, 80, 443 are open

        4. Test fail2ban: sudo fail2ban-client status

        5. Success: Firewall active, only required ports open, fail2ban running

        '
      related_docs:
      - docs/reference/commands/live.md
      - docs/deployment/production-deployment.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
    history:
    - action: unverified
      by: rob
      at: '2026-01-11T20:39:41+11:00'
      context: Manual unverification
    - action: verified
      by: rob
      at: '2026-01-11T20:39:27+11:00'
      context: Manual verification
  dev2stg:
    name: Dev to Staging (dev2stg.sh)
    description: Deploy from dev to staging with TUI, multi-source DB, and testing
    files:
    - scripts/commands/dev2stg.sh
    - lib/state.sh
    - lib/database-router.sh
    - lib/testing.sh
    - lib/preflight.sh
    - lib/dev2stg-tui.sh
    checklist:
    - text: 'Test preflight only: ./dev2stg.sh --preflight <sitename>'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg --preflight <sitename>\n2. Verify pre-deployment checks run without actual deployment\n3. Success indicators:\n   - All validation checks pass\n   - No deployment steps execute\n   - Exit code 0 if checks pass\n4. Check output lists detected issues (if any)\n5. Verify staging site not modified\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/deployment/environments.md
    - text: 'Test TUI mode: ./dev2stg.sh <sitename> (navigate DB and test menus)'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg <sitename> (without -y flag)\n2. Navigate database source menu using arrow keys\n3. Navigate test preset menu\n4. Success indicators:\n   - Interactive menus display correctly\n   - Can select database source (auto/production/development)\n   - Can select test preset (quick/essential/full/skip)\n   - Selected options are applied correctly\n5. Complete deployment and verify choices were honored\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
    - text: 'Test automated mode: ./dev2stg.sh -y <sitename>'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg -y <sitename>\n2. Verify deployment proceeds without prompts\n3. Success indicators:\n   - No interactive prompts appear\n   - Deployment completes automatically\n   - Default options are used (auto DB, essential tests)\n   - Exit code 0 on success\n4. Check staging site is updated correctly\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/deployment/cicd.md
    - text: Test auto-staging creation when staging doesn't exist
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Delete staging site if exists: pl delete <sitename>-stg\n2. Run: pl dev2stg <sitename>\n3. Verify staging site is created automatically\n4. Success indicators:\n   - Staging site directory created\n   - DDEV config generated\n   - Site appears in pl status output\n   - Deployment proceeds after creation\n5. Check staging site works: ddev describe <sitename>-stg\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/reference/commands/install.md
    - text: 'Test database source: auto'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg --db-source=auto <sitename>\n2. Verify system auto-selects best database source\n3. Success indicators:\n   - Uses recent production backup if available (<24hrs)\n   - Falls back to development DB if no recent backup\n   - Auto-selection logged in output\n   - Database import succeeds\n4. Check staging database content matches source\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/deployment/environments.md
    - text: 'Test database source: production'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg --db-source=production <sitename>\n2. Verify fresh backup created from production server\n3. Success indicators:\n   - SSH connection to production succeeds\n   - Database exported from production\n   - Backup imported to staging\n   - Database sanitization applied\n4. Check user emails are anonymized: ddev drush sql:query \"SELECT mail FROM users LIMIT 5\"\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/reference/commands/prod2stg.md
    - text: 'Test database source: backup'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Create manual backup: pl backup <sitename>\n2. Run: pl dev2stg --db-source=backup <sitename>\n3. Verify most recent backup file is used\n4. Success indicators:\n   - Backup file detected in sitebackups/\n   - Backup imported successfully\n   - Database matches backup content\n5. Check backup timestamp in deployment output\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/reference/commands/backup.md
    - text: 'Test database source: development'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg --db-source=development <sitename>\n2. Verify development database cloned to staging\n3. Success indicators:\n   - Development DB exported\n   - Staging DB replaced with dev content\n   - No production data involved\n   - Fast deployment (no remote fetch)\n4. Check staging has development test data\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/deployment/environments.md
    - text: Test with --fresh-backup flag (requires production access)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Ensure production server configured and accessible\n2. Run: pl dev2stg --fresh-backup <sitename>\n3. Verify new backup created from production (not cached)\n4. Success indicators:\n   - Production backup created (ignore existing backups)\n   - Fresh data synced to staging\n   - Backup timestamp is current\n5. Check sitebackups/ for new backup file\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/reference/commands/backup.md
    - text: Test with --dev-db flag (clones from development)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg --dev-db <sitename>\n2. Verify development database used (shorthand for --db-source=development)\n3. Success indicators:\n   - Development DB cloned to staging\n   - No production server accessed\n   - Fast deployment\n4. Check staging database content matches development\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
    - text: Test with -t quick (quick test preset)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg -y -t quick <sitename>\n2. Verify only quick tests run (PHPStan, PHPCS)\n3. Success indicators:\n   - Tests complete in ~30 seconds\n   - Static analysis and coding standards checked\n   - No unit/functional tests run\n   - Deployment succeeds if tests pass\n4. Check test output shows only quick test results\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/reference/commands/test.md
    - text: Test with -t essential (essential test preset)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg -y -t essential <sitename>\n2. Verify essential tests run (PHPUnit, PHPStan, PHPCS)\n3. Success indicators:\n   - Tests complete in 2-5 minutes\n   - Unit tests, static analysis, and coding standards checked\n   - Core quality gates validated\n4. Check test output shows all essential test results\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/reference/commands/test.md
    - text: Test with -t full (full test preset)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg -y -t full <sitename>\n2. Verify all tests run (unit, functional, static analysis, frontend, security)\n3. Success indicators:\n   - Tests complete in 15-30 minutes\n   - Comprehensive test coverage\n   - All quality gates validated\n4. Review detailed test report\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/reference/commands/test.md
    - text: Test with -t skip (skip tests)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg -y -t skip <sitename>\n2. Verify no tests execute (deployment only)\n3. Success indicators:\n   - Tests skipped in output\n   - Deployment completes quickly\n   - Only deployment steps run\n4. Useful for rapid iteration during development\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
    - text: 'Test custom test selection: -t phpunit,phpstan'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg -y -t phpunit,phpstan <sitename>\n2. Verify only specified tests run\n3. Success indicators:\n   - Only PHPUnit and PHPStan execute\n   - Other tests skipped\n   - Custom test combination works\n4. Check test output shows only selected tests\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/reference/commands/test.md
    - text: Verify all 11 deployment steps complete successfully
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg -y <sitename>\n2. Monitor output for all 11 steps:\n   - State detection & preflight\n   - Create/verify staging site\n   - Export configuration\n   - Sync files\n   - Restore/sync database\n   - Composer install --no-dev\n   - Database updates (drush updatedb)\n   - Import configuration (drush cim)\n   - Set production mode\n   - Run tests\n   - Display staging URL\n3. Success indicators:\n   - Each step shows success checkmark\n   - No errors in any step\n   - Final \"Deployment complete\" message\n4. Verify staging URL accessible\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/deployment/production-deployment.md
    - text: Verify staging has production mode (caching enabled, dev modules off)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. After dev2stg deployment, check staging site\n2. Run: ddev drush <sitename>-stg status\n3. Verify production settings:\n   - CSS/JS aggregation enabled\n   - Page caching enabled\n   - Development modules disabled (devel, stage_file_proxy)\n   - Error display set to \"log only\"\n4. Check: ddev drush <sitename>-stg pml | grep -i devel (should show uninstalled)\n5. Test caching: curl -I https://<sitename>-stg.ddev.site (check for cache headers)\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/reference/commands/make.md
      - docs/deployment/environments.md
    - text: Verify database sanitization (user emails anonymized)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. After dev2stg with production database\n2. Check user emails are anonymized: ddev drush <sitename>-stg sql:query \"SELECT name, mail FROM users LIMIT 10\"\n3. Success indicators:\n   - User emails like user1@example.com, user2@example.com\n   - No real user email addresses\n   - Passwords reset to secure hashes\n4. Verify admin password changed (shown in deployment output)\n5. Check sensitive config sanitized\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/deployment/environments.md
    - text: 'Test step resume: ./dev2stg.sh -s 5 <sitename>'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Interrupt deployment at step 5: Ctrl+C during database restore\n2. Run: pl dev2stg -s 5 <sitename>\n3. Verify deployment resumes from step 5\n4. Success indicators:\n   - Steps 1-4 skipped\n   - Step 5 and onward execute\n   - Deployment completes successfully\n5. Useful for recovery from failures\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: Enhanced with TUI, multi-source DB, testing - January 2026
  stg2prod:
    name: Staging to Production (stg2prod.sh)
    description: Deploy from staging to production
    files:
    - scripts/commands/stg2prod.sh
    checklist:
    - text: 'Test deployment with backup: ./stg2prod.sh -b <sitename>'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl stg2prod -b <sitename>\n2. Verify production backup created before deployment\n3. Success indicators:\n   - Backup file created in sitebackups/\n   - Backup timestamp recorded\n   - Deployment proceeds after backup\n4. Check backup can be restored if needed\n5. Verify backup includes database and files\n"
      related_docs:
      - docs/reference/commands/stg2prod.md
      - docs/reference/commands/backup.md
      - docs/deployment/rollback-procedures.md
    - text: Verify backup is created before deployment
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. During stg2prod deployment, monitor backup step\n2. Check console output for backup creation\n3. Success indicators:\n   - \"Creating production backup\" message\n   - Backup file path displayed\n   - Backup completes before rsync\n4. Verify backup file exists: ls sitebackups/<sitename>/prod-*\n5. Check backup size is reasonable\n"
      related_docs:
      - docs/reference/commands/stg2prod.md
      - docs/reference/commands/backup.md
    - text: Check production site is updated correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. After deployment, visit production URL\n2. Check site loads and displays correctly\n3. Success indicators:\n   - Site accessible via HTTPS\n   - Latest changes deployed\n   - No 500/503 errors\n   - Drupal site renders properly\n4. Test critical functionality (login, forms, etc.)\n5. Check production logs for errors: ssh <prod> tail -f /var/log/nginx/error.log\n"
      related_docs:
      - docs/reference/commands/stg2prod.md
      - docs/deployment/production-deployment.md
    - text: Verify production mode is enforced
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. SSH to production server\n2. Check Drupal status: cd /var/www/<sitename> && drush status\n3. Verify production settings:\n   - Caching enabled (page cache, dynamic page cache)\n   - CSS/JS aggregation enabled\n   - Development modules disabled\n   - Error display set to \"log only\"\n4. Check devel module not installed: drush pml | grep devel\n5. Verify .htaccess or nginx config has security headers\n"
      related_docs:
      - docs/reference/commands/stg2prod.md
      - docs/deployment/production-deployment.md
    - text: Test database sync options
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Test different database sync approaches\n2. Option 1 - Keep production DB: pl stg2prod --no-db <sitename>\n3. Option 2 - Sync staging DB to prod: pl stg2prod --with-db <sitename>\n4. Success indicators:\n   - Appropriate database handling based on option\n   - Content preserved or updated as expected\n   - Configuration imported correctly\n5. Verify drush config:status shows no differences\n"
      related_docs:
      - docs/reference/commands/stg2prod.md
      - docs/deployment/production-deployment.md
    - text: Verify rollback procedure if deployment fails
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Simulate deployment failure (e.g., invalid config)\n2. Verify automatic rollback prompt appears\n3. Success indicators:\n   - Rollback offer displayed on failure\n   - Rollback restores pre-deployment state\n   - Production site remains accessible\n   - Backup used for rollback\n4. Test manual rollback: pl rollback execute <sitename> prod\n5. Verify site restored to working state\n"
      related_docs:
      - docs/reference/commands/stg2prod.md
      - docs/deployment/rollback-procedures.md
      - docs/reference/commands/rollback.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  prod2stg:
    name: Production to Staging (prod2stg.sh)
    description: Sync production back to staging
    files:
    - scripts/commands/prod2stg.sh
    checklist:
    - text: 'Test sync: ./prod2stg.sh <sitename>'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl prod2stg <sitename>\n2. Verify production content pulled to staging\n3. Success indicators:\n   - SSH connection to production succeeds\n   - Database exported from production\n   - Files synced via rsync\n   - Staging updated with production content\n4. Check staging database matches production structure\n5. Verify staging site loads with production content\n"
      related_docs:
      - docs/reference/commands/prod2stg.md
      - docs/deployment/environments.md
    - text: Verify production database is copied to staging
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. After prod2stg, check staging database\n2. Run: ddev drush <sitename>-stg sql:query \"SELECT COUNT(*) FROM node\"\n3. Compare with production: ssh <prod> \"drush sql:query 'SELECT COUNT(*) FROM node'\"\n4. Success indicators:\n   - Node counts match\n   - User accounts synced\n   - Content structure identical\n   - Database sanitization applied to staging\n5. Verify emails anonymized in staging\n"
      related_docs:
      - docs/reference/commands/prod2stg.md
      - docs/deployment/environments.md
    - text: Check files are synced correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Verify production files pulled to staging\n2. Check file counts match: find sites/<sitename>-stg/web/sites/default/files -type f | wc -l\n3. Success indicators:\n   - User-uploaded files synced\n   - File permissions correct\n   - No permission errors\n   - Symbolic links preserved\n4. Spot-check specific files exist\n5. Verify files directory size reasonable\n"
      related_docs:
      - docs/reference/commands/prod2stg.md
    - text: Verify staging still has dev code (code not synced)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. After prod2stg, check staging codebase\n2. Verify code NOT synced from production (database/files only)\n3. Success indicators:\n   - Git branch unchanged in staging\n   - Custom modules still present\n   - Development features still available\n   - Only database and files updated\n4. Check git status shows staging code intact\n5. Verify staging composer.json unchanged\n"
      related_docs:
      - docs/reference/commands/prod2stg.md
      - docs/deployment/environments.md
    - text: Test sanitization option if available
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl prod2stg --sanitize <sitename>\n2. Verify production data sanitized for staging\n3. Success indicators:\n   - User emails anonymized\n   - Passwords reset\n   - Sensitive config removed\n   - PII stripped from database\n4. Check user table: ddev drush <sitename>-stg sql:query \"SELECT mail FROM users LIMIT 5\"\n5. Verify no production credentials in staging\n"
      related_docs:
      - docs/reference/commands/prod2stg.md
      - docs/deployment/environments.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  stg2live:
    name: Staging to Live (stg2live.sh)
    description: Deploy staging to live server
    files:
    - scripts/commands/stg2live.sh
    checklist:
    - text: Test deployment to live server
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl stg2live <sitename>\n2. Verify staging deployed to live test server\n3. Success indicators:\n   - Live server provisioned (if needed)\n   - Files synced via rsync\n   - Database deployed\n   - Site accessible at <sitename>.nwpcode.org\n4. Check deployment steps complete successfully\n5. Verify live site matches staging\n"
      related_docs:
      - docs/reference/commands/stg2live.md
      - docs/reference/commands/live.md
      - docs/deployment/production-deployment.md
    - text: Verify files are synced via rsync/SSH
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Monitor rsync output during deployment\n2. Check files transferred to live server\n3. Success indicators:\n   - Rsync completes without errors\n   - File counts match staging\n   - Permissions set correctly\n   - Excludes applied (.ddev, .git, etc.)\n4. SSH to live and check: ls -la /var/www/<sitename>\n5. Verify web files present and accessible\n"
      related_docs:
      - docs/reference/commands/stg2live.md
      - docs/deployment/production-deployment.md
    - text: Check database is deployed correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Verify database exported from staging and imported to live\n2. SSH to live server and check database\n3. Success indicators:\n   - Database created on live server\n   - settings.local.php generated with credentials\n   - Data imported successfully\n   - Drupal bootstrap works\n4. Test: ssh <live> \"cd /var/www/<sitename> && drush status\"\n5. Check database connection and site name\n"
      related_docs:
      - docs/reference/commands/stg2live.md
      - docs/deployment/production-deployment.md
    - text: Verify live site is accessible
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Open browser to https://<sitename>.nwpcode.org\n2. Verify site loads correctly\n3. Success indicators:\n   - HTTPS works (SSL certificate valid)\n   - Site renders properly\n   - No errors (HTTP 200 response)\n   - Login works\n   - Images and assets load\n4. Test critical functionality\n5. Check browser console for JavaScript errors\n"
      related_docs:
      - docs/reference/commands/stg2live.md
      - docs/reference/commands/live.md
    - text: Test with dry-run mode if available
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl stg2live --dry-run <sitename>\n2. Verify deployment simulation without changes\n3. Success indicators:\n   - Rsync shows what would be transferred (--dry-run flag)\n   - No actual files transferred\n   - No database changes\n   - Deployment steps listed but not executed\n4. Useful for previewing deployment impact\n5. Check output for potential issues\n"
      related_docs:
      - docs/reference/commands/stg2live.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  live2stg:
    name: Live to Staging (live2stg.sh)
    description: Promote live back to staging
    files:
    - scripts/commands/live2stg.sh
    checklist:
    - text: Test sync from live to local staging
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl prod2stg <sitename>\n2. Verify production content pulled to staging\n3. Success indicators:\n   - SSH connection to production succeeds\n   - Database exported from production\n   - Files synced via rsync\n   - Staging updated with production content\n4. Check staging database matches production structure\n5. Verify staging site loads with production content\n"
      related_docs:
      - docs/reference/commands/prod2stg.md
      - docs/deployment/environments.md
    - text: Verify database is downloaded and imported
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Monitor database export and import steps\n2. Check database transferred from live to staging\n3. Success indicators:\n   - Database exported from live server\n   - SQL dump downloaded\n   - Database imported to staging DDEV\n   - Drupal cache cleared\n4. Test: ddev drush <sitename>-stg status\n5. Verify database content matches live\n"
      related_docs:
      - docs/reference/commands/live2stg.md
    - text: Check files are synced correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Verify production files pulled to staging\n2. Check file counts match: find sites/<sitename>-stg/web/sites/default/files -type f | wc -l\n3. Success indicators:\n   - User-uploaded files synced\n   - File permissions correct\n   - No permission errors\n   - Symbolic links preserved\n4. Spot-check specific files exist\n5. Verify files directory size reasonable\n"
      related_docs:
      - docs/reference/commands/prod2stg.md
    - text: Verify staging runs with live content
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. After live2stg, test staging site\n2. Run: ddev launch <sitename>-stg\n3. Success indicators:\n   - Staging site loads with live content\n   - Database queries work\n   - Content displays correctly\n   - No errors in watchdog logs\n4. Test critical functionality works\n5. Verify config matches live state\n"
      related_docs:
      - docs/reference/commands/live2stg.md
      - docs/deployment/environments.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  live2prod:
    name: Live to Production (live2prod.sh)
    description: Promote live to production
    files:
    - scripts/commands/live2prod.sh
    checklist:
    - text: Test promotion to production environment
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl live2prod <sitename>\n2. Verify live test server content deployed to production\n3. Success indicators:\n   - SSH connection to both servers succeeds\n   - Server-to-server rsync works\n   - Files transferred to production\n   - Database synced to production\n4. Check production site updated\n5. Verify deployment steps complete\n"
      related_docs:
      - docs/reference/commands/live2prod.md
      - docs/deployment/production-deployment.md
    - text: Verify backup is created before promotion
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Monitor backup step during deployment\n2. Check production backup created before changes\n3. Success indicators:\n   - Backup file created in sitebackups/\n   - Database backed up\n   - Files backed up\n   - Backup timestamp recorded\n4. Verify backup can be restored: pl restore <sitename>\n5. Check backup size and integrity\n"
      related_docs:
      - docs/reference/commands/live2prod.md
      - docs/reference/commands/backup.md
      - docs/deployment/rollback-procedures.md
    - text: Check production site is updated
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. After deployment, visit production URL\n2. Verify site shows live server changes\n3. Success indicators:\n   - Production loads correctly\n   - Latest changes visible\n   - No errors (HTTP 200)\n   - SSL works\n   - Content displays properly\n4. Test critical functionality\n5. Check production logs for errors\n"
      related_docs:
      - docs/reference/commands/live2prod.md
      - docs/deployment/production-deployment.md
    - text: Test rollback procedure
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. After deployment, test rollback capability\n2. Run: pl rollback list <sitename>\n3. Verify rollback point exists from before deployment\n4. Success indicators:\n   - Rollback point created automatically\n   - Can execute rollback: pl rollback execute <sitename> prod\n   - Site restores to pre-deployment state\n   - Rollback completes successfully\n5. Verify site works after rollback\n"
      related_docs:
      - docs/reference/commands/live2prod.md
      - docs/deployment/rollback-procedures.md
      - docs/reference/commands/rollback.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  produce:
    name: Produce Script (produce.sh)
    description: Production environment setup
    files:
    - scripts/commands/produce.sh
    checklist:
    - text: Test production environment creation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl produce <sitename>\n2. Verify production server provisioning initiated\n3. Success indicators:\n   - Linode instance created (if automated)\n   - Server configuration started\n   - DNS configured\n   - SSL certificate requested\n4. Note: Currently stub implementation - shows manual setup instructions\n5. Check cnwp.yml for production config\n"
      related_docs:
      - docs/reference/commands/produce.md
      - docs/deployment/linode-deployment.md
      - docs/deployment/production-deployment.md
    - text: Verify production settings are applied
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. After production server setup, check configuration\n2. SSH to production server\n3. Verify production settings:\n   - Nginx/Apache configured\n   - PHP-FPM optimized for production\n   - Database tuned for performance\n   - Caching configured (Redis/Memcached)\n4. Check Drupal production mode: drush status\n5. Verify performance settings in nginx.conf or .htaccess\n"
      related_docs:
      - docs/reference/commands/produce.md
      - docs/deployment/production-deployment.md
    - text: Check security hardening is enabled
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Verify production security measures applied\n2. Check firewall: sudo ufw status\n3. Verify security indicators:\n   - UFW firewall enabled\n   - fail2ban running\n   - SSH hardened (key-only auth, no root login)\n   - Unattended security updates enabled\n   - SSL/TLS configured with strong ciphers\n4. Test: nmap <prod_ip> (should show only 22, 80, 443)\n5. Check security headers: curl -I https://<prod_domain>\n"
      related_docs:
      - docs/reference/commands/produce.md
      - docs/deployment/production-deployment.md
    - text: Verify caching and performance settings
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Check production caching configuration\n2. Verify performance optimizations:\n   - Page caching enabled\n   - CSS/JS aggregation active\n   - Image optimization configured\n   - CDN integrated (if applicable)\n   - Database query caching enabled\n3. Test caching: curl -I https://<prod_domain> (check for cache headers)\n4. Run performance test: drush core:requirements\n5. Check page load times and optimize as needed\n"
      related_docs:
      - docs/reference/commands/produce.md
      - docs/deployment/production-deployment.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  podcast:
    name: Podcast Infrastructure (podcast.sh)
    description: Castopod podcast hosting infrastructure
    files:
    - scripts/commands/podcast.sh
    - lib/podcast.sh
    - lib/install-podcast.sh
    checklist:
    - text: Test podcast site creation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl podcast setup podcast-test.example.com --linode-only

        2. Check for successful Linode VPS creation with Docker installed

        3. Verify deployment-info.txt is created with server details

        4. Confirm DNS records are configured (if using Cloudflare/Linode DNS)

        5. Success: Setup completes without errors and provides SSH access info'
      related_docs:
      - docs/reference/commands/podcast.md
    - text: Verify Castopod is installed correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. SSH to the created server: ssh -i ~/.ssh/nwp root@<server-ip>

        2. Check Docker containers: docker compose ps

        3. Verify 4 containers running: castopod, mariadb, redis, caddy

        4. Check Castopod logs: docker compose logs castopod

        5. Success: All containers healthy, no error logs'
      related_docs:
      - docs/reference/commands/podcast.md
    - text: Check podcast admin interface works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Visit https://podcast-test.example.com/admin/install in browser

        2. Complete Castopod installation wizard (create admin account)

        3. Log in to admin dashboard

        4. Navigate through Settings and Podcast sections

        5. Success: Admin interface loads, authentication works, all sections accessible'
      related_docs:
      - docs/reference/commands/podcast.md
    - text: Test podcast RSS feed generation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. In Castopod admin, create a test podcast show with metadata

        2. Add at least one episode with audio file

        3. Visit the podcast RSS feed URL (shown in Castopod)

        4. Validate RSS feed with https://castfeedvalidator.com/

        5. Success: Valid RSS 2.0 feed with episode data'
      related_docs:
      - docs/reference/commands/podcast.md
    - text: Verify media upload functionality
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Upload a small audio file (MP3) to an episode in Castopod

        2. For B2 mode: Verify file appears in Backblaze B2 bucket

        3. For Linode-only: Verify file stored in local Docker volume

        4. Play the episode to confirm media is accessible

        5. Success: Upload succeeds, media plays correctly, storage backend works'
      related_docs:
      - docs/reference/commands/podcast.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  schedule:
    name: Schedule Script (schedule.sh)
    description: Backup and sync scheduling
    files:
    - scripts/commands/schedule.sh
    checklist:
    - text: Test schedule creation for backups
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl schedule install test-site --db-schedule="*/5 * * * *"

        2. Check crontab: crontab -l | grep "NWP Backup Schedule"

        3. Verify log directory created: ls -la /var/log/nwp/ or /tmp/nwp/

        4. Confirm schedule details shown in output

        5. Success: Cron entry created with correct timing and backup command'
      related_docs:
      - docs/reference/commands/schedule.md
    - text: Verify cron jobs are created correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: crontab -l

        2. Look for comments: "# NWP Backup Schedule - <sitename>"

        3. Verify entries for database, full, and bundle backups (if not disabled)

        4. Check paths point to correct backup.sh script

        5. Success: All schedule types present with correct format and paths'
      related_docs:
      - docs/reference/commands/schedule.md
    - text: Check scheduled backups run as expected
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl schedule run test-site (manual trigger for testing)

        2. Wait for backup to complete

        3. Check backup created in sitebackups/test-site/

        4. View logs: tail /var/log/nwp/backup-test-site.log

        5. Success: Backup file exists, logs show successful completion, no errors'
      related_docs:
      - docs/reference/commands/schedule.md
      - docs/reference/commands/backup.md
    - text: Test schedule removal
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl schedule remove test-site

        2. Check crontab: crontab -l | grep test-site

        3. Verify no entries remain for the site

        4. Confirm removal message displayed

        5. Success: All NWP backup entries for site removed from crontab'
      related_docs:
      - docs/reference/commands/schedule.md
    - text: Verify schedule listing works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install schedules for 2+ sites

        2. Run: pl schedule list

        3. Check output shows all scheduled sites

        4. Run: pl schedule show test-site (for specific site)

        5. Success: Lists all schedules with timing details, organized by site'
      related_docs:
      - docs/reference/commands/schedule.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  security:
    name: Security Script (security.sh)
    description: Security hardening and configuration
    files:
    - scripts/commands/security.sh
    checklist:
    - text: 'Test security audit: ./security.sh audit <sitename>'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl security audit test-site

        2. Review file permissions check (settings.php should be 440 or 444)

        3. Check dev modules detection (warns if devel, webprofiler enabled)

        4. Verify error display check (warns if verbose errors enabled)

        5. Success: Complete audit report with warnings/recommendations'
      related_docs:
      - docs/reference/commands/security.md
    - text: 'Test security check: ./security.sh check <sitename>'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl security check test-site

        2. Verify Drupal security advisories checked via drush pm:security

        3. Check Composer vulnerabilities via composer audit

        4. Review output for any SA-CORE or SA-CONTRIB advisories

        5. Success: Reports security updates available or "no security updates" status'
      related_docs:
      - docs/reference/commands/security.md
    - text: 'Test security update: ./security.sh update <sitename>'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. If security updates available, run: pl security update test-site

        2. Verify pre-update backup is created

        3. Check composer update runs for drupal/* packages

        4. Verify database updates run (drush updb)

        5. Success: Updates applied, backup created, site remains functional'
      related_docs:
      - docs/reference/commands/security.md
      - docs/reference/commands/backup.md
    - text: Verify file permissions are checked correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set incorrect permissions: chmod 777 sites/test-site/web/sites/default/settings.php

        2. Run: pl security audit test-site

        3. Verify warning about overly permissive settings.php

        4. Fix permissions: chmod 440 sites/test-site/web/sites/default/settings.php

        5. Success: Audit detects permission issues and provides recommendations'
      related_docs:
      - docs/reference/commands/security.md
    - text: Check dev module detection works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Enable dev module: cd sites/test-site && ddev drush en devel -y

        2. Run: pl security audit test-site

        3. Verify warning about development module enabled

        4. Disable module: ddev drush pmu devel -y

        5. Success: Audit detects enabled dev modules (devel, webprofiler, kint, etc.)'
      related_docs:
      - docs/reference/commands/security.md
    - text: Verify exposed file detection works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test file: touch sites/test-site/web/.env

        2. Run: pl security audit test-site

        3. Verify warning about exposed .env file

        4. Remove file: rm sites/test-site/web/.env

        5. Success: Audit detects sensitive files (.env, .secrets.yml, etc.) in webroot'
      related_docs:
      - docs/reference/commands/security.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  setup_ssh:
    name: SSH Setup (setup-ssh.sh)
    description: SSH key generation and management
    files:
    - scripts/commands/setup-ssh.sh
    checklist:
    - text: Test SSH key generation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Remove existing keys: rm -f keys/nwp* ~/.ssh/nwp

        2. Run: pl setup-ssh

        3. Verify key generation output shows success

        4. Check key type matches (Ed25519 by default)

        5. Success: Keys generated without errors, correct algorithm used'
      related_docs:
      - docs/reference/commands/setup-ssh.md
    - text: Verify keys are created in keys/ directory
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. After key generation, run: ls -la keys/

        2. Verify nwp (private) and nwp.pub (public) exist

        3. Check permissions: nwp should be 600, nwp.pub should be 644

        4. Verify file sizes: Ed25519 keys ~400 bytes private, ~100 bytes public

        5. Success: Both keys present with correct permissions'
      related_docs:
      - docs/reference/commands/setup-ssh.md
    - text: Check key is installed to ~/.ssh/nwp
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: ls -la ~/.ssh/nwp

        2. Verify private key copied to user .ssh directory

        3. Check permissions: should be 600

        4. Confirm content matches keys/nwp: diff keys/nwp ~/.ssh/nwp

        5. Success: Private key installed to ~/.ssh/ with correct permissions'
      related_docs:
      - docs/reference/commands/setup-ssh.md
    - text: Test connection to remote server with generated key
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Add public key to test server: ssh-copy-id -i keys/nwp.pub user@test-server

        2. Test connection: ssh -i ~/.ssh/nwp user@test-server

        3. Verify passwordless authentication works

        4. Check you can run commands

        5. Success: SSH connection established without password prompt'
      related_docs:
      - docs/reference/commands/setup-ssh.md
    - text: Verify public key output for Linode
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. After key generation, check output for public key display

        2. Copy public key: cat keys/nwp.pub

        3. Verify format: starts with ssh-ed25519 or ssh-rsa

        4. Add to Linode: https://cloud.linode.com/profile/keys

        5. Success: Public key shown in correct format, accepted by Linode'
      related_docs:
      - docs/reference/commands/setup-ssh.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  uninstall:
    name: Uninstall Script (uninstall_nwp.sh)
    description: Complete NWP uninstallation
    files:
    - scripts/commands/uninstall_nwp.sh
    checklist:
    - text: Test in dry-run mode if available
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check if dry-run supported: pl uninstall_nwp --help

        2. If available, run: pl uninstall_nwp --dry-run

        3. Verify it shows what would be removed without actually removing

        4. Check no files/services are actually affected

        5. Success: Shows removal plan without making changes (or prompts for each action)'
      related_docs:
      - docs/reference/commands/uninstall_nwp.md
    - text: Verify all DDEV projects are stopped
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Start test sites: cd sites/test-site && ddev start

        2. Run uninstall: pl uninstall_nwp (confirm prompts)

        3. Check DDEV output includes poweroff step

        4. Verify: ddev list (should show no running projects)

        5. Success: All DDEV sites stopped before uninstall proceeds'
      related_docs:
      - docs/reference/commands/uninstall_nwp.md
    - text: Check NWP directories are removed
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Note current directories: ls ~/.nwp/ and ls /usr/local/bin/pl

        2. Run uninstall and confirm removals

        3. Check ~/.nwp/setup_state/ removed

        4. Check CLI command symlink removed from /usr/local/bin/

        5. Success: Specified directories and files removed as confirmed'
      related_docs:
      - docs/reference/commands/uninstall_nwp.md
    - text: Verify Docker resources are cleaned up
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. If Docker was installed by NWP, verify removal option presented

        2. Check installation state: cat ~/.nwp/setup_state/original_state.json

        3. If Docker pre-existed, verify it is NOT removed

        4. If NWP installed it, confirm removal: docker --version (should fail or remain if kept)

        5. Success: Docker handled correctly based on installation state'
      related_docs:
      - docs/reference/commands/uninstall_nwp.md
    - text: Test partial uninstall options if available
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run uninstall: pl uninstall_nwp

        2. When prompted, choose to keep some components (e.g., SSH keys, config files)

        3. Verify kept components remain: ls ~/.ssh/nwp, ls cnwp.yml

        4. Verify removed components are gone

        5. Success: Selective uninstall works, kept items preserved'
      related_docs:
      - docs/reference/commands/uninstall_nwp.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  doctor:
    name: Doctor Script (doctor.sh)
    description: Diagnostic and troubleshooting for NWP configuration and prerequisites
    files:
    - scripts/commands/doctor.sh
    checklist:
    - text: Test prerequisite checks (Docker, DDEV, PHP, Composer, yq, git)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl doctor

        2. Review "Checking prerequisites" section

        3. Verify all tools detected with versions shown

        4. Test with tool missing: temporarily rename /usr/bin/git

        5. Success: All prerequisites checked, versions shown, missing tools reported'
      related_docs:
      - docs/reference/commands/doctor.md
    - text: Verify Docker daemon running check
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Stop Docker: sudo systemctl stop docker

        2. Run: pl doctor

        3. Verify error reported for Docker daemon not running

        4. Start Docker: sudo systemctl start docker

        5. Success: Doctor detects Docker daemon status correctly'
      related_docs:
      - docs/reference/commands/doctor.md
    - text: Test configuration file validation (cnwp.yml, .secrets.yml)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl doctor

        2. Check "Checking configuration" section

        3. Verify cnwp.yml validated (YAML syntax check)

        4. Test with invalid YAML: add malformed entry to cnwp.yml

        5. Success: Valid configs pass, invalid YAML syntax detected and reported'
      related_docs:
      - docs/reference/commands/doctor.md
    - text: Check network connectivity tests (Linode, Cloudflare, drupal.org)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl doctor

        2. Review "Checking network connectivity" section

        3. Verify drupal.org accessibility checked

        4. If API tokens configured, check Linode/Cloudflare API tests

        5. Success: Network tests complete, connectivity status reported for each service'
      related_docs:
      - docs/reference/commands/doctor.md
    - text: Verify common issue detection (disk space, memory, DDEV sites)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl doctor

        2. Review "Checking for common issues" section

        3. Check disk space report (percentage used shown)

        4. Verify memory report (total/free shown)

        5. Success: System resources checked, DDEV sites status reported'
      related_docs:
      - docs/reference/commands/doctor.md
    - text: Test verbose and quiet modes
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run verbose: pl doctor --verbose

        2. Verify detailed output shown for all checks

        3. Run quiet: pl doctor --quiet

        4. Verify only errors displayed, success items hidden

        5. Success: Verbose shows debug info, quiet shows errors only'
      related_docs:
      - docs/reference/commands/doctor.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  bootstrap_coder:
    name: Bootstrap Coder (bootstrap-coder.sh)
    description: Automated coder identity configuration and NWP setup
    files:
    - scripts/commands/bootstrap-coder.sh
    checklist:
    - text: Test interactive coder detection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl bootstrap-coder

        2. Verify identity detection attempts GitLab SSH first

        3. If no SSH key, check fallback to interactive prompt

        4. Enter test coder name when prompted

        5. Success: Identity detected or prompted, validation messages shown'
      related_docs:
      - docs/reference/commands/bootstrap-coder.md
    - text: Verify identity validation against GitLab and DNS
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Continue bootstrap process with test identity

        2. Check GitLab account validation output

        3. Review DNS delegation check (NS records)

        4. Verify DNS A record check

        5. Success: All validations run, results shown (pass/warn)'
      related_docs:
      - docs/reference/commands/bootstrap-coder.md
    - text: Test cnwp.yml configuration with coder subdomain
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Backup existing: cp cnwp.yml cnwp.yml.backup

        2. Run bootstrap with test coder name

        3. Check cnwp.yml: grep settings.url cnwp.yml

        4. Verify subdomain set: <coder>.nwpcode.org

        5. Success: cnwp.yml updated with coder subdomain, email domain configured'
      related_docs:
      - docs/reference/commands/bootstrap-coder.md
    - text: Verify git user configuration setup
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check current git config: git config --global --list

        2. Run bootstrap (confirm git config prompt)

        3. Verify updated: git config --global user.name

        4. Check email: git config --global user.email

        5. Success: Git configured with coder name and git@<coder>.<domain> email'
      related_docs:
      - docs/reference/commands/bootstrap-coder.md
    - text: Test SSH key verification for GitLab
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. During bootstrap, check SSH key status section

        2. Verify detection of existing keys (~/.ssh/id_ed25519.pub or id_rsa.pub)

        3. If missing, check offer to generate

        4. Review GitLab SSH keys URL shown in output

        5. Success: SSH keys detected or generation offered, GitLab link provided'
      related_docs:
      - docs/reference/commands/bootstrap-coder.md
    - text: Check infrastructure readiness verification
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Review "Infrastructure Verification" section output

        2. Check DNS status (NS delegation, A records)

        3. Verify GitLab status (HTTPS connectivity test)

        4. Review recommendations for missing infrastructure

        5. Success: Infrastructure status shown, next steps provided for missing items'
      related_docs:
      - docs/reference/commands/bootstrap-coder.md
    - text: Test --coder flag with known identity
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl bootstrap-coder --coder testuser

        2. Verify detection skipped, testuser used directly

        3. Check validation still runs for testuser

        4. Confirm faster workflow (no GitLab SSH attempt)

        5. Success: Direct identity setting works, validation proceeds normally'
      related_docs:
      - docs/reference/commands/bootstrap-coder.md
    - text: Verify --dry-run mode
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl bootstrap-coder --dry-run

        2. Verify no files modified (cnwp.yml, .secrets.yml, git config)

        3. Check output shows: [DRY-RUN] Would create/set/configure

        4. Confirm detection and validation still run

        5. Success: Dry-run completes without changes, shows planned actions

        '
      related_docs:
      - docs/reference/commands/bootstrap-coder.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  avc_moodle_setup:
    name: AVC-Moodle Setup (avc-moodle-setup.sh)
    description: OAuth2 SSO integration setup between AVC and Moodle sites
    files:
    - scripts/commands/avc-moodle-setup.sh
    - lib/avc-moodle.sh
    checklist:
    - text: Test OAuth2 key generation (RSA 2048-bit)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl avc-moodle-setup avc ss

        2. Check for "Generating 2048-bit RSA key pair..." message

        3. Verify keys created: ls -la sites/avc/private/keys/oauth_*.key

        4. Check private key permissions (should be 600): stat -c ''%a'' sites/avc/private/keys/oauth_private.key

        5. Check public key permissions (should be 644): stat -c ''%a'' sites/avc/private/keys/oauth_public.key

        6. Verify key format: openssl rsa -in sites/avc/private/keys/oauth_private.key -check -noout

        Success: Both keys exist with correct permissions, private key validates

        '
      related_docs:
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Verify AVC Drupal modules installation (simple_oauth)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run setup: pl avc-moodle-setup avc ss

        2. Check composer.json for drupal/simple_oauth: cat sites/avc/composer.json | grep simple_oauth

        3. Verify module enabled: cd sites/avc && ddev drush pm:list --status=enabled | grep oauth

        4. Check Simple OAuth settings: cd sites/avc && ddev drush config:get simple_oauth.settings

        5. Verify module status: cd sites/avc && ddev drush pm:info simple_oauth

        Success: simple_oauth module is installed via Composer and enabled via Drush

        '
      related_docs:
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Test Moodle plugin installation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run setup: pl avc-moodle-setup avc ss

        2. Check for auth_avc_oauth2 plugin (when available): ls sites/ss/auth/avc_oauth2/

        3. Check for local_cohortrole plugin: ls sites/ss/local/cohortrole/

        4. Verify plugin status via CLI: cd sites/ss && ddev exec php admin/cli/plugin_info.php

        5. Check Moodle plugins page: Visit https://ss.ddev.site/admin/plugins.php

        Success: Required plugins are installed and show in Moodle''s plugin list

        '
      related_docs:
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Verify OAuth2 client configuration in AVC
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. After running setup, visit: https://avc.ddev.site/admin/config/services/consumer\n2. Create OAuth2 client with:\n   - Client ID: moodle_ss\n   - Redirect URI: https://ss.ddev.site/admin/oauth2callback.php\n   - Grant Types: Authorization Code\n   - Scopes: openid profile email\n3. Verify Simple OAuth key paths: cd sites/avc && ddev drush config:get simple_oauth.settings\n4. Check token expiration (should be 300s): cd sites/avc && ddev drush config:get simple_oauth.settings token_expiration\nSuccess: OAuth2 client exists with correct configuration, keys configured\n"
      related_docs:
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Test OAuth2 issuer configuration in Moodle
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. After running setup, visit: https://ss.ddev.site/admin/settings.php?section=oauth2\n2. Configure OAuth2 issuer with:\n   - Name: AVC\n   - Client ID: moodle_ss (from AVC setup)\n   - Client Secret: (from AVC OAuth2 client)\n   - Authorization Endpoint: https://avc.ddev.site/oauth/authorize\n   - Token Endpoint: https://avc.ddev.site/oauth/token\n   - UserInfo Endpoint: https://avc.ddev.site/oauth/userinfo\n3. Test endpoints work: curl -k https://avc.ddev.site/oauth/authorize\nSuccess: OAuth2 issuer configured in Moodle, all endpoints accessible\n"
      related_docs:
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Verify SSO flow testing
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run setup without --skip-test: pl avc-moodle-setup avc ss\n2. Check output for OAuth2 endpoint tests (authorize, token, userinfo)\n3. Manually test SSO flow:\n   - Visit https://ss.ddev.site\n   - Click \"Login with AVC\" button\n   - Should redirect to AVC authorize page\n   - Login with AVC credentials\n   - Should redirect back to Moodle logged in\n4. Run test command: pl avc-moodle-test avc ss\nSuccess: All OAuth2 endpoints return 200/302, manual login flow completes\n"
      related_docs:
      - docs/reference/commands/avc-moodle-setup.md
      - docs/reference/commands/avc-moodle-test.md
      - lib/avc-moodle.sh
    - text: Test --regenerate-keys flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run initial setup: pl avc-moodle-setup avc ss

        2. Backup existing keys: cp sites/avc/private/keys/oauth_private.key /tmp/old_key.bak

        3. Run with --regenerate-keys: pl avc-moodle-setup avc ss --regenerate-keys

        4. Check output for "Generating 2048-bit RSA key pair..." message

        5. Compare keys: diff /tmp/old_key.bak sites/avc/private/keys/oauth_private.key

        6. Verify new keys exist and have correct permissions

        Success: New keys are generated (different from old), warning shown about breaking existing sessions

        '
      related_docs:
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Verify --skip-test flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run setup with flag: pl avc-moodle-setup avc ss --skip-test

        2. Check output - should NOT see "Testing OAuth2 endpoints" section

        3. Verify setup still completes: Check "Setup complete" message

        4. Compare with normal run: pl avc-moodle-setup avc ss (without --skip-test)

        5. Normal run should show endpoint testing steps

        Success: Setup completes faster without testing, no endpoint tests performed

        '
      related_docs:
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Test --role-sync flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run setup with flag: pl avc-moodle-setup avc ss --role-sync

        2. Check cnwp.yml for role_sync setting: yq eval ''.sites.avc.moodle_integration.role_sync'' cnwp.yml

        3. Verify it shows "true"

        4. Run without flag: pl avc-moodle-setup avc ss

        5. Check cnwp.yml again - role_sync should be false or absent

        6. When enabled, role synchronization should occur during SSO login

        Success: role_sync flag correctly updates cnwp.yml configuration

        '
      related_docs:
      - docs/reference/commands/avc-moodle-setup.md
      - docs/reference/commands/avc-moodle-sync.md
      - lib/avc-moodle.sh
    - text: Test --badge-display flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run setup with flag: pl avc-moodle-setup avc ss --badge-display

        2. Check cnwp.yml for badge_display: yq eval ''.sites.avc.moodle_integration.badge_display'' cnwp.yml

        3. Verify it shows "true"

        4. Run without flag: pl avc-moodle-setup avc ss

        5. Check cnwp.yml again - badge_display should be false or absent

        6. When enabled, Moodle badges should display on AVC user profiles

        Success: badge_display flag correctly updates cnwp.yml configuration

        '
      related_docs:
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Verify cnwp.yml integration settings update
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run setup: pl avc-moodle-setup avc ss

        2. Check AVC site config: yq eval ''.sites.avc.moodle_integration'' cnwp.yml

        3. Should show: enabled: true, moodle_site: ss, moodle_url: https://ss.ddev.site

        4. Check Moodle site config: yq eval ''.sites.ss.avc_integration'' cnwp.yml

        5. Should show: enabled: true, avc_site: avc, avc_url: https://avc.ddev.site

        6. Verify both sites cross-reference each other correctly

        Success: cnwp.yml updated with integration settings for both sites

        '
      related_docs:
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  avc_moodle_status:
    name: AVC-Moodle Status (avc-moodle-status.sh)
    description: Integration health dashboard for AVC-Moodle SSO
    files:
    - scripts/commands/avc-moodle-status.sh
    - lib/avc-moodle.sh
    checklist:
    - text: Test SSO status display (active/disabled)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run status command: pl avc-moodle-status avc ss

        2. Check "SSO Status" section in output dashboard

        3. Should show "✓ Active" if integration enabled, "✗ Disabled" if not

        4. Verify integration status matches cnwp.yml: yq eval ''.sites.avc.moodle_integration.enabled'' cnwp.yml

        5. Toggle integration and verify status changes accordingly

        Success: SSO status accurately reflects integration enabled/disabled state

        '
      related_docs:
      - docs/reference/commands/avc-moodle-status.md
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Verify OAuth2 endpoint health checks
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run status command: pl avc-moodle-status avc ss

        2. Check "OAuth2 Endpoints" section showing authorize, token, userinfo

        3. Each endpoint should show ✓ (reachable) or ✗ (not reachable)

        4. Test endpoints directly: curl -k https://avc.ddev.site/oauth/authorize

        5. Stop AVC site: cd sites/avc && ddev stop

        6. Run status again - endpoints should show ✗

        7. Start site and verify endpoints return to ✓

        Success: Endpoint health checks accurately detect reachability

        '
      related_docs:
      - docs/reference/commands/avc-moodle-status.md
      - docs/reference/commands/avc-moodle-test.md
      - lib/avc-moodle.sh
    - text: Test last sync time display
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run initial sync: pl avc-moodle-sync avc ss --full

        2. Run status: pl avc-moodle-status avc ss

        3. Check "Synchronization" section for "Last Sync" timestamp

        4. Should show recent timestamp with relative time (e.g., "2m ago")

        5. Verify timestamp in Drupal state: cd sites/avc && ddev drush state:get avc_moodle_sync.last_sync

        6. Shows "Never" if sync module not installed or no sync performed

        Success: Last sync time displays correctly with timestamp and relative time

        '
      related_docs:
      - docs/reference/commands/avc-moodle-status.md
      - docs/reference/commands/avc-moodle-sync.md
      - lib/avc-moodle.sh
    - text: Verify role sync status
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Enable role sync: pl avc-moodle-setup avc ss --role-sync

        2. Run status: pl avc-moodle-status avc ss

        3. Check "Configuration" section for "Role Sync: ✓ Enabled"

        4. Verify in cnwp.yml: yq eval ''.sites.avc.moodle_integration.role_sync'' cnwp.yml

        5. Check sync statistics showing synced users/cohorts counts

        6. Disable role sync and verify status shows "✗ Disabled"

        Success: Role sync status correctly reflects enabled/disabled state

        '
      related_docs:
      - docs/reference/commands/avc-moodle-status.md
      - docs/reference/commands/avc-moodle-sync.md
      - lib/avc-moodle.sh
    - text: Test --debug flag output
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run with debug flag: pl avc-moodle-status --debug avc ss\n2. Compare with normal run: pl avc-moodle-status avc ss\n3. Debug output should show additional information:\n   - Detailed curl commands for endpoint checks\n   - Full Drush state query results\n   - URL resolution details\n   - Cache hit/miss breakdown\n4. Verify debug output includes technical details not in normal output\nSuccess: Debug mode shows detailed technical information for troubleshooting\n"
      related_docs:
      - docs/reference/commands/avc-moodle-status.md
      - lib/avc-moodle.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  avc_moodle_sync:
    name: AVC-Moodle Sync (avc-moodle-sync.sh)
    description: Manual role and cohort synchronization between AVC and Moodle
    files:
    - scripts/commands/avc-moodle-sync.sh
    - lib/avc-moodle.sh
    checklist:
    - text: Test full sync (all users and guilds)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run full sync: pl avc-moodle-sync avc ss --full

        2. Check output for "Syncing all users and guilds..." message

        3. Verify statistics: "Processed X guilds", "Synchronized Y users"

        4. Check Drupal state: cd sites/avc && ddev drush state:get avc_moodle_sync.synced_users

        5. Verify Moodle cohorts created: cd sites/ss && ddev exec php admin/cli/list_cohorts.php

        6. Check sync timestamp updated in status: pl avc-moodle-status avc ss

        Success: All guilds and users synchronized, cohorts created in Moodle

        '
      related_docs:
      - docs/reference/commands/avc-moodle-sync.md
      - docs/reference/commands/avc-moodle-status.md
      - lib/avc-moodle.sh
    - text: Verify --guild=NAME specific guild sync
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. List available guilds: cd sites/avc && ddev drush avc-guilds:list (if available)

        2. Run specific guild sync: pl avc-moodle-sync avc ss --guild=web-dev

        3. Check output shows "Syncing guild: web-dev"

        4. Verify only that guild''s members synchronized (not all guilds)

        5. Check Moodle for specific cohort: cd sites/ss && ddev exec php admin/cli/list_cohorts.php | grep "web-dev"

        6. Verify sync completed faster than full sync

        Success: Only specified guild synchronized, not all guilds

        '
      related_docs:
      - docs/reference/commands/avc-moodle-sync.md
      - lib/avc-moodle.sh
    - text: Test --user=ID specific user sync
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Find a user ID: cd sites/avc && ddev drush user:information admin

        2. Run user-specific sync: pl avc-moodle-sync avc ss --user=123

        3. Check output shows "Syncing user: 123"

        4. Verify only that user''s guild memberships synchronized

        5. Check Moodle user cohort assignments for that specific user

        6. Verify sync completed very quickly (under 2 seconds)

        Success: Only specified user''s guild memberships synchronized

        '
      related_docs:
      - docs/reference/commands/avc-moodle-sync.md
      - lib/avc-moodle.sh
    - text: Verify --dry-run mode
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run dry run: pl avc-moodle-sync avc ss --full --dry-run

        2. Check output header shows "⚠ DRY RUN MODE - No changes will be made"

        3. Verify operations show "Would perform:" prefix

        4. Check footer shows "⚠ DRY RUN completed - no changes were made"

        5. Verify no actual changes in Moodle cohorts

        6. Compare with real run to ensure same analysis but no execution

        Success: Dry run shows what would happen without making changes

        '
      related_docs:
      - docs/reference/commands/avc-moodle-sync.md
      - lib/avc-moodle.sh
    - text: Test --verbose flag output
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run sync with verbose: pl avc-moodle-sync avc ss --guild=web-dev --verbose\n2. Compare with normal run: pl avc-moodle-sync avc ss --guild=web-dev\n3. Verbose output should show:\n   - Individual user operations (added, removed, unchanged)\n   - Guild member counts\n   - Cohort ID and name details\n   - Operation-by-operation progress\n4. Verify verbose includes more detail than standard output\nSuccess: Verbose mode shows detailed per-operation information\n"
      related_docs:
      - docs/reference/commands/avc-moodle-sync.md
      - lib/avc-moodle.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  avc_moodle_test:
    name: AVC-Moodle Test (avc-moodle-test.sh)
    description: OAuth2 SSO and integration functionality testing
    files:
    - scripts/commands/avc-moodle-test.sh
    - lib/avc-moodle.sh
    checklist:
    - text: Test OAuth2 endpoint accessibility
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run test command: pl avc-moodle-test avc ss\n2. Check \"Testing OAuth2 Endpoints\" section shows:\n   - OAuth2 authorize endpoint... ✓ PASS\n   - OAuth2 token endpoint... ✓ PASS\n   - OAuth2 userinfo endpoint... ✓ PASS\n3. Test manually: curl -k https://avc.ddev.site/oauth/authorize\n4. Stop AVC: cd sites/avc && ddev stop\n5. Run test again - endpoints should fail (✗ FAIL)\nSuccess: Test accurately detects OAuth2 endpoint accessibility\n"
      related_docs:
      - docs/reference/commands/avc-moodle-test.md
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Verify token exchange functionality
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run test: pl avc-moodle-test avc ss

        2. Check test output for token endpoint test (should be PASS)

        3. Token endpoint accepts POST requests (GET returns 405 Method Not Allowed - this is correct)

        4. Test requires full OAuth2 flow: authorization code → access token

        5. Verify Simple OAuth is properly configured to handle token requests

        6. Check token expiration is set to 300s: cd sites/avc && ddev drush config:get simple_oauth.settings token_expiration

        Success: Token endpoint accessible and configured correctly

        '
      related_docs:
      - docs/reference/commands/avc-moodle-test.md
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Test user authentication flow
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run test suite: pl avc-moodle-test avc ss\n2. Manually test full authentication flow:\n   - Visit Moodle: https://ss.ddev.site\n   - Click \"Login with AVC\" button\n   - Redirects to AVC authorize endpoint\n   - Login with AVC credentials\n   - Should redirect back to Moodle with user logged in\n3. Verify user profile exists in Moodle after SSO login\n4. Check OAuth2 userinfo endpoint provides user data\nSuccess: Complete OAuth2 authentication flow works end-to-end\n"
      related_docs:
      - docs/reference/commands/avc-moodle-test.md
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Verify role mapping tests
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Enable role sync: pl avc-moodle-setup avc ss --role-sync\n2. Run test suite: pl avc-moodle-test avc ss\n3. Verify role mapping test checks:\n   - AVC guilds map to Moodle cohorts correctly\n   - Guild machine names convert to cohort IDs\n   - Guild display names map to cohort names\n4. Check actual mappings: Compare AVC guilds to Moodle cohorts\n5. Guild \"web-dev\" should map to cohort \"AVC - Web Development\"\nSuccess: Role mapping tests verify correct guild-to-cohort mapping\n"
      related_docs:
      - docs/reference/commands/avc-moodle-test.md
      - docs/reference/commands/avc-moodle-sync.md
      - lib/avc-moodle.sh
    - text: Test badge display functionality
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Enable badge display: pl avc-moodle-setup avc ss --badge-display\n2. Run test suite: pl avc-moodle-test avc ss\n3. Verify badge display test checks:\n   - Moodle badges are accessible via API\n   - Badge data can be fetched from Moodle\n   - Badges can be rendered on AVC user profiles (when module available)\n4. Check badge configuration in cnwp.yml\n5. Test requires custom avc_moodle_data module for full functionality\nSuccess: Badge display tests verify badge data accessibility\n"
      related_docs:
      - docs/reference/commands/avc-moodle-test.md
      - docs/reference/commands/avc-moodle-setup.md
      - lib/avc-moodle.sh
    - text: Check test result reporting (pass/fail counts)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run test suite: pl avc-moodle-test avc ss\n2. Check \"Test Results\" section at end of output\n3. Should display:\n   - Total Tests: X\n   - Passed: Y\n   - Failed: Z\n   - Success Rate: N%\n4. Verify all tests passing shows \"✓ All tests passed! (15/15)\"\n5. Verify failed tests show \"✗ Some tests failed: X passed, Y failed\"\n6. Exit code should be 0 for 100% pass, 1 for any failures\nSuccess: Test result summary accurately reports pass/fail counts\n"
      related_docs:
      - docs/reference/commands/avc-moodle-test.md
      - lib/avc-moodle.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  badges:
    name: GitLab Badge Management (badges.sh)
    description: Manages GitLab CI/CD badges for project READMEs
    files:
    - scripts/commands/badges.sh
    - lib/badges.sh
    checklist:
    - text: Test show command displays badge URLs correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl badges show mysite

        2. Verify output includes badge URLs for pipeline status, coverage, release, and license

        3. Check that URLs are properly formatted

        4. Success: All badge URLs display correctly

        '
      related_docs:
      - docs/reference/commands/badges.md
    - text: Verify markdown generation works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl badges markdown mysite

        2. Verify markdown snippet includes all badge types

        3. Test rendering in README.md

        4. Success: Markdown renders correctly

        '
      related_docs:
      - docs/reference/commands/badges.md
    - text: Test adding badges to site README
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Backup README.md

        2. Run: pl badges add mysite

        3. Verify badges added to README

        4. Success: Badges display in GitLab

        '
      related_docs:
      - docs/reference/commands/badges.md
    - text: Check coverage threshold validation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl badges coverage mysite --threshold=80

        2. Verify coverage check from GitLab CI

        3. Test different thresholds

        4. Success: Threshold validation works

        '
      related_docs:
      - docs/reference/commands/badges.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  email:
    name: Email Management (email.sh)
    description: Unified interface for email setup, testing, and configuration
    files:
    - scripts/commands/email.sh
    checklist:
    - text: Test email setup command
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl email setup (requires sudo)

        2. Verify Postfix installed

        3. Check DKIM keys generated

        4. Success: Email infrastructure configured

        '
      related_docs:
      - docs/reference/commands/email.md
    - text: Verify email account creation for site
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl email add <sitename>

        2. Check account creation output

        3. Verify email configuration in cnwp.yml

        4. Test sending: pl email test <sitename>

        5. Success: Email account created, configuration saved, test email sends

        '
      related_docs:
      - docs/reference/commands/email.md
    - text: Test email deliverability
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl email test mysite

        2. Verify email sends

        3. Check DKIM/SPF pass

        4. Success: Email authentication works

        '
      related_docs:
      - docs/reference/commands/email.md
    - text: Check email rerouting configuration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl email reroute <sitename>

        2. Verify Mailpit configuration applied

        3. Send test email from site

        4. Check Mailpit UI: http://localhost:8025

        5. Verify disable works: pl email reroute --disable

        6. Success: Rerouting captures emails, disable restores normal delivery

        '
      related_docs:
      - docs/reference/commands/email.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  report:
    name: Error Reporter (report.sh)
    description: Wrapper for error reporting to GitLab with pre-filled issue URLs
    files:
    - scripts/commands/report.sh
    checklist:
    - text: Test wrapper mode running a command
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create a test script that fails: echo "#!/bin/bash" > /tmp/test-fail.sh && echo "exit 1" >> /tmp/test-fail.sh && chmod +x /tmp/test-fail.sh

        2. Run: pl report /tmp/test-fail.sh

        3. When prompted, press ''N'' to decline creating issue

        4. Verify error captured and prompt shown

        5. Check exit code is 1 (preserved from wrapped command)

        Success: Wrapper captures failure, prompts for issue creation, preserves exit code

        '
      related_docs:
      - docs/reference/commands/report.md
    - text: Verify error capture and sanitization
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create script with sensitive data: echo "Error: failed at /home/user with password=secret123" > /tmp/test-output.txt

        2. Run: pl report --report "$(cat /tmp/test-output.txt)"

        3. Check generated GitLab URL in output

        4. Verify /home/user replaced with ~

        5. Verify password=secret123 is sanitized

        Success: Paths sanitized to ~, passwords/tokens redacted from output

        '
      related_docs:
      - docs/reference/commands/report.md
    - text: Test GitLab issue URL generation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl report --report -s backup.sh "Test error message"

        2. Check output contains GitLab issue URL

        3. Verify URL includes pre-filled title and description

        4. Check URL format is correct: https://git.nwpcode.org/root/nwp/-/issues/new?...

        5. Verify labels include ''bug''

        Success: Valid GitLab issue URL generated with pre-filled title, description, and bug label

        '
      related_docs:
      - docs/reference/commands/report.md
    - text: Check clipboard copy mode
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Ensure xclip or pbcopy is installed

        2. Run: pl report -c --report "Test error"

        3. Check message indicates URL copied to clipboard

        4. Paste from clipboard to verify URL present

        5. Verify URL is valid GitLab issue URL

        Success: URL copied to clipboard successfully, browser not opened

        '
      related_docs:
      - docs/reference/commands/report.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  rollback:
    name: Deployment Rollback (rollback.sh)
    description: Manages deployment rollback points and recovery
    files:
    - scripts/commands/rollback.sh
    - lib/rollback.sh
    checklist:
    - text: Test listing rollback points
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create a test site backup: pl backup testsite "Test backup for rollback"

        2. Copy backup to rollback directory: mkdir -p sites/testsite/backups/rollback && cp sites/testsite/backups/*.sql.gz sites/testsite/backups/rollback/rollback-$(date +%Y%m%d-%H%M%S).sql.gz

        3. Run: pl rollback list

        4. Verify rollback points are listed with timestamps

        5. Run: pl rollback list testsite

        6. Check specific site rollback points shown

        Success: Rollback points listed with site names, timestamps, and file sizes

        '
      related_docs:
      - docs/reference/commands/rollback.md
    - text: Verify rollback execution
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Deploy a test site to staging: pl dev2stg testsite

        2. Make a database change via drush

        3. Create rollback point before change

        4. Run: pl rollback execute testsite stage

        5. Verify database restored to previous state

        6. Check site is accessible and functioning

        Success: Site restored to previous deployment state, database and files reverted

        '
      related_docs:
      - docs/reference/commands/rollback.md
    - text: Test rollback verification
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. After performing a rollback: pl rollback execute testsite

        2. Run: pl rollback verify testsite

        3. Check verification performs health checks

        4. Verify database connectivity tested

        5. Check site URL accessibility verified

        Success: Verification confirms site functional, no errors reported

        '
      related_docs:
      - docs/reference/commands/rollback.md
    - text: Check cleanup functionality
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create multiple rollback points for a site (5+)

        2. Run: pl rollback cleanup --keep=3

        3. Verify only 3 most recent rollback points remain

        4. Check old rollback files deleted from sites/*/backups/rollback/

        5. Run: pl rollback list

        6. Verify cleanup reflected in listing

        Success: Old rollback points removed, most recent N kept, disk space freed

        '
      related_docs:
      - docs/reference/commands/rollback.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  storage:
    name: Cloud Storage Management (storage.sh)
    description: Backblaze B2 cloud storage for backups and podcast media
    files:
    - scripts/commands/storage.sh
    - lib/b2.sh
    checklist:
    - text: Test B2 authentication
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Ensure B2 credentials in .secrets.yml: b2.account_id and b2.app_key

        2. Run: pl storage auth

        3. Verify authentication succeeds

        4. Check for success message confirming B2 connection

        5. Verify auth token cached (b2 account authorize should work)

        Success: B2 authentication successful, credentials validated, token cached

        '
      related_docs:
      - docs/reference/commands/storage.md
    - text: Verify bucket listing
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. After authentication, run: pl storage list

        2. Check all B2 buckets displayed

        3. Verify bucket names, types (public/private), and sizes shown

        4. Run: pl storage info <bucket-name>

        5. Check detailed bucket information displayed

        Success: All buckets listed with correct details, info command shows bucket specifics

        '
      related_docs:
      - docs/reference/commands/storage.md
    - text: Test file upload to bucket
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test file: echo "test content" > /tmp/test-upload.txt

        2. Run: pl storage upload /tmp/test-upload.txt <test-bucket>

        3. Verify upload completes with success message

        4. Run: pl storage files <test-bucket>

        5. Confirm test-upload.txt appears in file listing

        Success: File uploaded successfully, appears in bucket file list

        '
      related_docs:
      - docs/reference/commands/storage.md
    - text: Check file deletion
      completed: false
      completed_by: null
      completed_at: null
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  theme:
    name: Theme Build Tool Management (theme.sh)
    description: Unified frontend build tool management (Gulp, Grunt, Webpack, Vite)
    files:
    - scripts/commands/theme.sh
    - lib/frontend.sh
    checklist:
    - text: Test auto-detection of build tools
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test site with theme containing gulpfile.js

        2. Run: pl theme info test-site

        3. Verify Gulp detected automatically

        4. Test with other build tools (Gruntfile.js, webpack.config.js, vite.config.js)

        5. Success: Build tool detected based on configuration file presence'
      related_docs:
      - docs/reference/commands/theme.md
    - text: Verify dependency installation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Remove node_modules: rm -rf sites/test-site/web/themes/custom/*/node_modules

        2. Run: pl theme setup test-site

        3. Check node_modules created

        4. Verify package-lock.json or yarn.lock present

        5. Success: Dependencies installed, lock file created, no errors'
      related_docs:
      - docs/reference/commands/theme.md
    - text: Test watch mode for live reload
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl theme watch test-site

        2. Edit a SCSS file in the theme

        3. Verify auto-compilation occurs (watch console output)

        4. Check compiled CSS file updated

        5. Success: Watch mode detects changes, recompiles automatically, can be stopped with Ctrl+C'
      related_docs:
      - docs/reference/commands/theme.md
    - text: Check production build
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl theme build test-site

        2. Check build output directory (dist/ or build/)

        3. Verify minified CSS/JS files created

        4. Check file sizes (should be smaller than dev builds)

        5. Success: Production build completes, assets minified, no source maps'
      related_docs:
      - docs/reference/commands/theme.md
    - text: Test linting functionality
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Add intentional lint error to theme JS or SCSS

        2. Run: pl theme lint test-site

        3. Verify error detected and reported

        4. Fix error and rerun

        5. Success: Linting detects errors, shows clear error messages, passes when clean'
      related_docs:
      - docs/reference/commands/theme.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  contribute:
    name: Contribution Submission (contribute.sh)
    description: Submit contributions to upstream repository via merge request
    files:
    - scripts/commands/contribute.sh
    checklist:
    - text: Test pre-flight checks pass
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. On feature branch with uncommitted changes

        2. Run: pl contribute

        3. Verify pre-flight checks detect issues (uncommitted changes, not on main, etc.)

        4. Fix issues and re-run

        5. Success: Pre-flight checks run, block invalid states, pass when ready

        '
      related_docs:
      - docs/reference/commands/contribute.md
    - text: Verify test execution
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. On feature branch, run: pl contribute

        2. Verify test-nwp.sh runs

        3. Test --no-tests flag

        4. Success: Tests gate contribution

        '
      related_docs:
      - docs/reference/commands/contribute.md
    - text: Check MR description generation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test branch with commits

        2. Run: pl contribute

        3. Review generated MR description

        4. Verify includes: Summary, Test Plan, Related Issues, Claude footer

        5. Success: MR description comprehensive, properly formatted

        '
      related_docs:
      - docs/reference/commands/contribute.md
    - text: Test GitLab CLI integration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install glab or gh CLI

        2. Configure GitLab/GitHub auth

        3. Run: pl contribute on feature branch

        4. Verify MR created automatically

        5. Check MR in GitLab/GitHub web interface

        6. Success: MR created via CLI, all fields populated correctly

        '
      related_docs:
      - docs/reference/commands/contribute.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  coder_setup:
    name: Coder Setup (coder-setup.sh)
    description: Multi-coder DNS delegation and management
    files:
    - scripts/commands/coder-setup.sh
    - lib/cloudflare.sh
    checklist:
    - text: Test adding a new coder
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl coder-setup add testcoder --notes "Test coder for verification"

        2. Check success message with coder added

        3. Verify testcoder added to cnwp.yml in coders section

        4. Run: pl coder-setup list

        5. Confirm testcoder appears in list

        Success: Coder added to configuration, visible in listing

        '
      related_docs:
      - docs/reference/commands/coder-setup.md
    - text: Verify NS records in Cloudflare
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Ensure Cloudflare credentials in .secrets.yml

        2. Run: pl coder-setup add testcoder2

        3. Check Cloudflare API calls succeed

        4. Verify NS records created: dig NS testcoder2.nwpcode.org

        5. Check delegation points to Linode nameservers

        Success: NS delegation records created in Cloudflare, DNS queries return Linode nameservers

        '
      related_docs:
      - docs/reference/commands/coder-setup.md
    - text: Test listing coders
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Add 2-3 test coders: pl coder-setup add coder1, pl coder-setup add coder2

        2. Run: pl coder-setup list

        3. Verify all coders shown with names and notes

        4. Check output formatting is clear and readable

        5. Verify status indicators if present

        Success: All coders listed with correct information, clear formatting

        '
      related_docs:
      - docs/reference/commands/coder-setup.md
    - text: Check coder removal
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Add a test coder: pl coder-setup add removeme

        2. Run: pl coder-setup remove removeme

        3. Verify removal confirmation prompt or success message

        4. Check NS records removed from Cloudflare

        5. Run: pl coder-setup list

        6. Confirm coder no longer in listing

        7. Verify removed from cnwp.yml

        Success: Coder removed from DNS, configuration, and no longer listed

        '
      related_docs:
      - docs/reference/commands/coder-setup.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  coders:
    name: Coder Management TUI (coders.sh)
    description: Interactive TUI for managing NWP coders with onboarding status tracking
    files:
    - scripts/commands/coders.sh
    checklist:
    - text: Test TUI navigation and selection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Add test coders: pl coder-setup add coder1, pl coder-setup add coder2

        2. Run: pl coders

        3. Use Up/Down arrow keys to navigate coder list

        4. Press SPACE to select/deselect coders

        5. Press ENTER to view detailed stats

        6. Press Q to quit

        Success: Navigation responsive, selection works, details view accessible

        '
      related_docs:
      - docs/reference/commands/coders.md
    - text: Verify onboarding status checks (GL, GRP, SSH, NS, DNS, SRV, SITE)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl coders

        2. Check status column displays 7 indicators: GL GRP SSH NS DNS SRV SITE

        3. Verify symbols: ✓ (complete), ✗ (missing), ? (checking), - (not required)

        4. Press C to trigger status check

        5. Verify status updates after check completes

        Success: All 7 onboarding steps displayed with accurate status indicators

        '
      related_docs:
      - docs/reference/commands/coders.md
    - text: Test coder promotion functionality
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl coders

        2. Navigate to a Newcomer-level coder

        3. Press P to promote

        4. Select new role (Contributor/Core/Steward)

        5. Confirm promotion

        6. Verify role updated in display

        7. Check cnwp.yml shows updated role

        Success: Promotion workflow works, role updated in configuration and display

        '
      related_docs:
      - docs/reference/commands/coders.md
    - text: Check bulk actions (delete, promote)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl coders

        2. Use SPACE to select multiple coders

        3. Press P to promote all selected

        4. Verify confirmation prompt for bulk action

        5. Test bulk delete with D key

        6. Check all selected coders affected

        Success: Bulk selection works, operations apply to all selected coders

        '
      related_docs:
      - docs/reference/commands/coders.md
    - text: Verify GitLab sync functionality
      completed: false
      completed_by: null
      completed_at: null
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  seo_check:
    name: SEO Check (seo-check.sh)
    description: Comprehensive SEO monitoring and sitemap verification
    files:
    - scripts/commands/seo-check.sh
    checklist:
    - text: Test robots.txt validation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl seo-check check testsite

        2. Verify robots.txt fetched and analyzed

        3. Check for Disallow: / detection (staging)

        4. Check for sitemap reference (production)

        5. Test with non-existent robots.txt

        6. Verify appropriate error/warning shown

        Success: robots.txt correctly validated for environment, staging blocked, production allows indexing

        '
      related_docs:
      - docs/reference/commands/seo-check.md
    - text: Verify X-Robots-Tag header checking
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl seo-check headers testsite-stg

        2. Check for X-Robots-Tag in output

        3. Verify noindex/nofollow detection for staging

        4. Run: pl seo-check staging testsite-stg

        5. Confirm staging protection check includes header

        Success: X-Robots-Tag header detected and validated, staging requires noindex/nofollow

        '
      related_docs:
      - docs/reference/commands/seo-check.md
    - text: Test sitemap.xml verification
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl seo-check sitemap testsite

        2. Verify sitemap.xml fetched from site

        3. Check XML structure validation

        4. Verify URL count displayed

        5. Test with site without sitemap

        6. Check appropriate error message shown

        Success: sitemap.xml validated, URL count accurate, XML structure checked

        '
      related_docs:
      - docs/reference/commands/seo-check.md
    - text: Check staging protection verification
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl seo-check staging testsite-stg

        2. Check all three protection layers verified: X-Robots-Tag, robots.txt, meta tag

        3. Verify warnings for missing protection

        4. Check summary indicates if staging is properly protected

        5. Test with unprotected staging site

        6. Verify failures clearly indicated

        Success: All staging protection layers checked, clear pass/fail status for indexing protection

        '
      related_docs:
      - docs/reference/commands/seo-check.md
    - text: Test production SEO optimization checks
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl seo-check production testsite

        2. Verify robots.txt allows crawling (no Disallow: /)

        3. Check sitemap.xml reference in robots.txt

        4. Verify X-Robots-Tag doesn''t contain noindex

        5. Check recommendations for SEO improvements

        6. Test with site missing sitemap

        7. Verify appropriate warnings shown

        Success: Production checks verify crawlability, sitemap presence, no blocking headers

        '
      related_docs:
      - docs/reference/commands/seo-check.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  run_tests:
    name: Comprehensive Test Runner (run-tests.sh)
    description: 'Runs all levels of tests: unit, integration, and E2E'
    files:
    - scripts/commands/run-tests.sh
    checklist:
    - text: Test BATS unit tests execution
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Ensure BATS installed: bats --version

        2. Run unit tests only: ./scripts/commands/run-tests.sh -u

        3. Verify BATS executes tests from tests/unit/ directory

        4. Check tests run library functions (lib/*.sh) without external dependencies

        5. Verify output shows test results with pass/fail counts

        6. Verify execution time is fast (~1-2 minutes)

        Success: BATS unit tests run successfully, library functions tested, completes in ~1-2 min

        '
      related_docs:
      - docs/reference/commands/run-tests.md
      - docs/testing/testing.md
    - text: Verify BATS integration tests
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Ensure DDEV running: ddev --version

        2. Run integration tests: ./scripts/commands/run-tests.sh -i

        3. Verify BATS executes tests from tests/integration/ directory

        4. Check tests run full command workflows with DDEV interactions

        5. Verify file system operations, multi-step processes tested

        6. Verify execution time is medium (~5-10 minutes)

        Success: BATS integration tests run, DDEV workflows tested, completes in ~5-10 min

        '
      related_docs:
      - docs/reference/commands/run-tests.md
      - docs/testing/testing.md
    - text: Check test output formatting
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run tests in default mode: ./scripts/commands/run-tests.sh -u

        2. Verify human-readable output format with test descriptions

        3. Run in CI mode: ./scripts/commands/run-tests.sh --ci -u

        4. Verify TAP (Test Anything Protocol) output format

        5. Check output is machine-readable for CI systems

        6. Verify verbose mode shows additional details: ./scripts/commands/run-tests.sh -v -u

        Success: Output formatting works for human-readable, TAP, and verbose modes

        '
      related_docs:
      - docs/reference/commands/run-tests.md
      - docs/testing/testing.md
    - text: Test selective test execution
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run only unit tests: ./scripts/commands/run-tests.sh -u

        2. Verify only unit tests execute (not integration)

        3. Run only integration tests: ./scripts/commands/run-tests.sh -i

        4. Verify only integration tests execute (not unit)

        5. Run all tests: ./scripts/commands/run-tests.sh -a (or ./scripts/commands/run-tests.sh)

        6. Verify both unit and integration tests execute

        Success: Selective execution works, flags properly filter test suites

        '
      related_docs:
      - docs/reference/commands/run-tests.md
      - docs/testing/testing.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  upstream:
    name: Upstream Sync (upstream.sh)
    description: Syncs local repository with upstream in distributed contribution model
    files:
    - scripts/commands/upstream.sh
    checklist:
    - text: Test upstream configuration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl upstream configure

        2. Enter upstream URL/tier

        3. Verify .nwp-upstream.yml created

        4. Success: Upstream configured

        '
      related_docs:
      - docs/reference/commands/upstream.md
    - text: Verify sync functionality
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Configure upstream: pl upstream configure

        2. Make commits on upstream (or use test repo)

        3. Run: pl upstream sync

        4. Verify local main updated with upstream changes

        5. Check git log shows merge/rebase

        6. Success: Sync pulls upstream changes, merges correctly

        '
      related_docs:
      - docs/reference/commands/upstream.md
    - text: Check status reporting
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl upstream status

        2. Verify shows current branch

        3. Check commit count ahead/behind upstream

        4. Review recent upstream commits listed

        5. Success: Status shows sync state, commit summaries, actionable commands

        '
      related_docs:
      - docs/reference/commands/upstream.md
    - text: Test merge and rebase strategies
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test merge: pl upstream sync --merge

        2. Verify merge commit created

        3. Test rebase: pl upstream sync --rebase (on clean branch)

        4. Verify linear history (no merge commit)

        5. Success: Both strategies work, history shows expected structure

        '
      related_docs:
      - docs/reference/commands/upstream.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  migrate_secrets:
    name: Secrets Migration (migrate-secrets.sh)
    description: Migrate to two-tier secrets architecture (infrastructure vs data)
    files:
    - scripts/commands/migrate-secrets.sh
    checklist:
    - text: Test dry-run mode
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl migrate-secrets --dry-run --nwp

        2. Verify no changes made to filesystem

        3. Check output shows what would be done

        4. Verify backup and template creation are simulated

        5. Success: Dry-run reports actions without making changes

        '
      related_docs:
      - docs/reference/commands/migrate-secrets.md
    - text: Verify data secret detection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Add test data secrets to .secrets.yml (production_database.password, etc.)

        2. Run: pl migrate-secrets --check

        3. Verify script detects data secrets

        4. Check warnings show line numbers and keys

        5. Success: Data secrets detected and reported with locations

        '
      related_docs:
      - docs/reference/commands/migrate-secrets.md
    - text: Check backup creation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl migrate-secrets --nwp

        2. Check .secrets.yml.bak.* file created

        3. Verify backup contains original content

        4. Check timestamp in filename

        5. Success: Backup created before migration, original preserved

        '
      related_docs:
      - docs/reference/commands/migrate-secrets.md
    - text: Test NWP root migration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Backup .secrets.yml

        2. Run: pl migrate-secrets --nwp

        3. Verify .secrets.data.yml created

        4. Success: Migration completes

        '
      related_docs:
      - docs/reference/commands/migrate-secrets.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  security_check:
    name: HTTP Security Headers Check (security-check.sh)
    description: Tests HTTP security headers on any URL (like Mozilla Observatory)
    files:
    - scripts/commands/security-check.sh
    checklist:
    - text: Test HSTS header validation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl security-check https://example.com

        2. Check HSTS section in output

        3. Verify header presence detected (PASS/FAIL/WARN)

        4. Check for max-age validation

        5. Run: pl security-check -v https://example.com

        6. Verify raw HSTS header value displayed

        Success: HSTS header correctly validated, max-age and includeSubDomains checked

        '
      related_docs:
      - docs/reference/commands/security-check.md
    - text: Verify CSP header checking
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl security-check https://drupal.org

        2. Check Content-Security-Policy section

        3. Verify CSP presence and directives checked

        4. Look for unsafe-inline/unsafe-eval warnings

        5. Check recommendation if CSP missing

        Success: CSP header validated, unsafe directives flagged, recommendations provided

        '
      related_docs:
      - docs/reference/commands/security-check.md
    - text: Check X-Frame-Options validation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl security-check https://mozilla.org

        2. Check X-Frame-Options section

        3. Verify DENY/SAMEORIGIN detection

        4. Check CSP frame-ancestors fallback logic

        5. Test with site that has neither header

        Success: X-Frame-Options correctly validated, CSP frame-ancestors considered as alternative

        '
      related_docs:
      - docs/reference/commands/security-check.md
    - text: Test security grading system
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl security-check https://example.com

        2. Check overall grade at bottom (A+, A, B, C, D, F)

        3. Verify grade reflects pass/warn/fail counts

        4. Test multiple sites with different security levels

        5. Check grade matches expected criteria from docs

        Success: Grading system assigns accurate letter grades based on header compliance

        '
      related_docs:
      - docs/reference/commands/security-check.md
    - text: Verify JSON output mode
      completed: false
      completed_by: null
      completed_at: null
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  verify:
    name: Feature Verification (verify.sh)
    description: NWP feature verification tracking with interactive TUI console
    files:
    - scripts/commands/verify.sh
    checklist:
    - text: Test TUI console navigation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl verify

        2. Use arrow keys (↑/↓) to navigate between features

        3. Press ''d'' to view details of selected feature

        4. Press ''r'' to refresh display

        5. Press ''q'' to quit

        Success: Navigation responsive, features display correctly with status indicators [✓], [!], [ ]

        '
      related_docs:
      - docs/reference/commands/verify.md
    - text: Verify checklist editing functionality
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl verify

        2. Navigate to a feature and press SPACE or ENTER

        3. Provide your username when prompted

        4. Check that status updates to verified

        5. Run: pl verify report

        6. Verify feature shows as verified with username and timestamp

        Success: Feature marked as verified, username and timestamp recorded correctly

        '
      related_docs:
      - docs/reference/commands/verify.md
    - text: Check verification status tracking
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl verify summary

        2. Check progress percentage and status breakdown

        3. Run: pl verify list

        4. Verify all feature IDs are listed

        5. Run: pl verify report

        6. Check that verified features show user and date

        Success: Status accurately tracked, summary shows correct counts and percentages

        '
      related_docs:
      - docs/reference/commands/verify.md
    - text: Test file change detection
      completed: false
      completed_by: null
      completed_at: null
    - text: Verify history tracking
      completed: false
      completed_by: null
      completed_at: null
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  pl_cli:
    name: PL CLI Wrapper (pl)
    description: Universal CLI wrapper - main command interface
    files:
    - pl
    checklist:
    - text: Test pl command with various subcommands
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl install --help

        2. Run: pl backup --help

        3. Run: pl status --help

        4. Test multiple subcommands to verify routing works

        5. Success: All subcommands accessible via pl, help text shown correctly'
      related_docs:
      - docs/reference/commands/README.md
    - text: Verify pl install works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl install d test-cli-site

        2. Monitor installation progress

        3. Verify site created in sites/test-cli-site/

        4. Check DDEV site starts successfully

        5. Success: Installation completes via pl command, site functional'
      related_docs:
      - docs/reference/commands/install.md
    - text: Verify pl backup works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl backup test-cli-site

        2. Check backup created in sitebackups/test-cli-site/

        3. Verify backup timestamp in filename

        4. Check backup contains database and files

        5. Success: Backup created via pl command, contains expected data'
      related_docs:
      - docs/reference/commands/backup.md
    - text: Check pl status works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl status

        2. Verify all sites listed with DDEV status

        3. Check URL and status columns shown

        4. Run: pl status test-cli-site (specific site)

        5. Success: Status command works, shows site information correctly'
      related_docs:
      - docs/reference/commands/status.md
    - text: Test tab completion if available
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check for completion script: ls -la pl-completion.bash

        2. Source it: source pl-completion.bash

        3. Type: pl <TAB><TAB>

        4. Verify subcommands suggested

        5. Success: Tab completion works, suggests available commands and sites'
      related_docs:
      - docs/reference/commands/README.md
    - text: Verify help output is correct
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl --help or pl -h

        2. Check main command list shown

        3. Run: pl install --help

        4. Verify subcommand help shown with options

        5. Success: Help text complete, formatted correctly, shows all available commands'
      related_docs:
      - docs/reference/commands/README.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  test_nwp:
    name: Test Suite (test-nwp.sh)
    description: Comprehensive test suite - 22 test categories
    files:
    - scripts/commands/test-nwp.sh
    - scripts/commands/test.sh
    - scripts/commands/testos.sh
    checklist:
    - text: 'Run full test suite: ./test-nwp.sh'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: ./scripts/commands/test-nwp.sh

        2. Monitor test progress through all 22+ categories

        3. Check log file created: .logs/test-nwp-<timestamp>.log

        4. Review final summary: Total tests, passed, failed, warnings

        5. Success: Test suite completes, 98%+ pass rate achieved'
      related_docs:
      - docs/reference/commands/test-nwp.md
    - text: Verify all test categories pass
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Review test output for each category (Installation, Backup, Restore, etc.)

        2. Check for green checkmarks (✓) on test items

        3. Note any red X marks (✗) for failures

        4. Review warnings (!) which are expected behaviors

        5. Success: All critical tests pass, only expected warnings present'
      related_docs:
      - docs/reference/commands/test-nwp.md
    - text: Check test output is clear and readable
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Review terminal output formatting

        2. Check for section headers and separators

        3. Verify color coding (green=pass, red=fail, yellow=warning)

        4. Confirm test descriptions are clear

        5. Success: Output well-formatted, easy to scan, color-coded appropriately'
      related_docs:
      - docs/reference/commands/test-nwp.md
    - text: Test individual test categories
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check test suite source for category isolation capability

        2. If supported, run specific category (e.g., backup tests only)

        3. Verify category runs independently

        4. Check output shows only that category

        5. Success: Individual categories can be tested in isolation'
      related_docs:
      - docs/reference/commands/test-nwp.md
    - text: Verify testos.sh OpenSocial tests work
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install OpenSocial test site if not present

        2. Run: ./scripts/commands/testos.sh test-site

        3. Check PHPStan analysis runs

        4. Verify CodeSniffer checks execute

        5. Success: OpenSocial-specific tests run, code quality checks complete'
      related_docs:
      - docs/reference/commands/test-nwp.md
      - docs/reference/commands/testos.md
    - text: Check Behat/PHPUnit integration if applicable
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Look for test category covering Behat/PHPUnit

        2. Verify test templates exist in templates/ directory

        3. Check integration test runs for sites with tests configured

        4. Review test results in output

        5. Success: Behat/PHPUnit tests run if configured, templates validated'
      related_docs:
      - docs/reference/commands/test-nwp.md
      - docs/reference/commands/test.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  test:
    name: Test Script (test.sh)
    description: Run tests for DDEV sites (PHPCS, PHPStan, PHPUnit, Behat)
    files:
    - scripts/commands/test.sh
    checklist:
    - text: Test with -l flag (PHPCS linting only)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install test dependencies: cd sites/nwp && ddev composer require --dev drupal/coder

        2. Run linting only: pl test -l nwp

        3. Verify PHPCS runs on custom modules/themes in web/modules/custom and web/themes/custom

        4. Check output shows coding standards violations or "No violations found"

        5. Verify execution time is fast (~10 seconds)

        Success: PHPCS runs successfully, checks Drupal coding standards, completes in ~10s

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    - text: Test with -t flag (PHPStan only)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install test dependencies: cd sites/nwp && ddev composer require --dev phpstan/phpstan

        2. Run static analysis only: pl test -t nwp

        3. Verify PHPStan analyzes custom code for type errors, undefined methods, dead code

        4. Check output shows analysis level (default: 5) and any detected issues

        5. Verify execution time is fast (~20 seconds)

        Success: PHPStan runs successfully at level 5, detects type issues, completes in ~20s

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    - text: Test with -u flag (PHPUnit unit tests only)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install test dependencies: cd sites/nwp && ddev composer require --dev phpunit/phpunit

        2. Create test file in web/modules/custom/*/tests/src/Unit/ (if not exists)

        3. Run unit tests only: pl test -u nwp

        4. Verify PHPUnit runs tests from unit test suite (no database required)

        5. Check output shows test results with pass/fail counts

        6. Verify execution time is fast (~30 seconds)

        Success: PHPUnit unit tests run successfully, isolated logic tested, completes in ~30s

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    - text: Test with -k flag (PHPUnit kernel tests only)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install test dependencies: cd sites/nwp && ddev composer require --dev phpunit/phpunit

        2. Create test file in web/modules/custom/*/tests/src/Kernel/ (if not exists)

        3. Run kernel tests only: pl test -k nwp

        4. Verify PHPUnit runs kernel tests with database and Drupal API access

        5. Check output shows test results for entity CRUD, service integration tests

        6. Verify execution time is medium (~2 minutes)

        Success: PHPUnit kernel tests run successfully with database, completes in ~2 min

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    - text: Test with -f flag (PHPUnit functional tests only)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install test dependencies: cd sites/nwp && ddev composer require --dev phpunit/phpunit

        2. Create test file in web/modules/custom/*/tests/src/Functional/ (if not exists)

        3. Run functional tests only: pl test -f nwp

        4. Verify PHPUnit runs full functional tests with web requests, page rendering

        5. Check output shows test results for form submissions, user workflows

        6. Verify execution time is slow (~5 minutes)

        Success: PHPUnit functional tests run successfully with full Drupal bootstrap, completes in ~5 min

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    - text: Test with -s flag (Behat smoke tests only)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install Behat: cd sites/nwp && ddev composer require --dev drupal/drupal-extension

        2. Install Selenium: cd sites/nwp && ddev get ddev/ddev-selenium-standalone-chrome && ddev restart

        3. Run smoke tests only: pl test -s nwp

        4. Verify Behat runs only tests tagged with @smoke (critical user paths)

        5. Check output shows browser automation tests for login/logout, basic functionality

        6. Verify execution time is medium (~30 seconds)

        Success: Behat smoke tests run successfully with Selenium, critical paths tested, completes in ~30s

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    - text: Test with -b flag (full Behat tests)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Ensure Behat and Selenium installed: cd sites/nwp && ddev composer require --dev drupal/drupal-extension

        2. Run full Behat suite: pl test -b nwp

        3. Verify Behat runs all behavioral tests (not just @smoke)

        4. Check output shows complete user scenarios, feature tests, regression tests

        5. Verify Chrome browser automation executes all scenarios

        6. Verify execution time is slow (~10 minutes)

        Success: Full Behat suite runs successfully, all scenarios tested, completes in ~10 min

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    - text: Test with -p flag (parallel Behat execution)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Ensure Behat and Selenium installed

        2. Run Behat in parallel: pl test -bp nwp

        3. Verify Behat runs with 2 parallel processes simultaneously

        4. Check output shows tests distributed across processes

        5. Verify execution time is faster than serial (~5 minutes vs ~10 minutes)

        Success: Behat runs in parallel (2 processes), tests complete faster, ~5 min total

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    - text: Test with -a flag (run all tests)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Ensure all test dependencies installed (PHPCS, PHPStan, PHPUnit, Behat, Selenium)

        2. Run all tests: pl test -a nwp (or just: pl test nwp)

        3. Verify runs PHPCS, PHPStan, PHPUnit (unit, kernel, functional), and Behat

        4. Check output shows results for all test types in sequence

        5. Verify execution time is very slow (~20 minutes for complete suite)

        Success: All tests run successfully (linting, static analysis, unit, kernel, functional, behavioral), completes in ~20 min

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    - text: Test with --ci flag (CI mode with JUnit output)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Ensure test dependencies installed

        2. Run in CI mode: pl test --ci nwp

        3. Verify output is machine-readable (TAP/JUnit XML format)

        4. Check JUnit XML reports generated in test-reports/ directory

        5. Verify stricter validation enabled (fail on warnings)

        6. Verify exit code 0 for pass, 1 for fail

        Success: CI mode runs with JUnit XML output, reports generated, machine-readable format

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    - text: 'Test combined flags: -ltu (lint, stan, unit)'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Ensure PHPCS, PHPStan, and PHPUnit installed

        2. Run combined flags: pl test -ltu nwp

        3. Verify runs only linting, static analysis, and unit tests (not kernel, functional, or Behat)

        4. Check output shows results for each enabled test type

        5. Verify execution time is fast (~1 minute total)

        Success: Combined flags work correctly, only selected tests run, completes in ~1 min

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    - text: Verify test reports are generated in CI mode
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run tests in CI mode: pl test --ci nwp

        2. Check test-reports/ directory created: ls -la sites/nwp/test-reports/

        3. Verify JUnit XML files exist: phpunit.xml, phpstan.xml, phpcs.xml, behat.xml

        4. Verify XML format is valid: xmllint --noout sites/nwp/test-reports/*.xml

        5. Check reports contain test results, pass/fail counts, execution times

        Success: Test reports generated in test-reports/, valid JUnit XML format, CI-compatible

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    - text: Check that missing test dependencies are detected
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Remove a test dependency: cd sites/nwp && ddev composer remove --dev drupal/coder

        2. Run tests with linting: pl test -l nwp

        3. Verify script detects missing PHPCS and shows clear warning message

        4. Check warning includes installation command: "composer require --dev drupal/coder"

        5. Verify script skips linting tests gracefully (doesn''t fail completely)

        6. Reinstall dependency and verify detection works correctly

        Success: Missing dependencies detected, clear warnings shown, installation commands provided

        '
      related_docs:
      - docs/reference/commands/test.md
      - docs/testing/testing.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  testos:
    name: OpenSocial Test Script (testos.sh)
    description: Comprehensive testing for OpenSocial distributions (Behat, PHPUnit, PHPStan)
    files:
    - scripts/commands/testos.sh
    checklist:
    - text: Test with -b flag (run Behat tests)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install OpenSocial site: pl install os avc

        2. Run Behat tests: ./scripts/commands/testos.sh -b avc

        3. Verify script auto-installs Behat and Selenium if missing

        4. Check Behat configuration generated for OpenSocial profile

        5. Verify tests run against OpenSocial features (groups, events, activity-stream)

        6. Verify execution completes with test results summary

        Success: Behat runs on OpenSocial site, auto-configuration works, tests execute

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with -u flag (run all PHPUnit tests)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run all PHPUnit tests: ./scripts/commands/testos.sh -u avc

        2. Verify script runs both unit and kernel tests

        3. Check tests execute against OpenSocial profile code

        4. Verify output shows test results for unit + kernel suites

        Success: PHPUnit runs all tests (unit + kernel) on OpenSocial profile

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with -U flag (run PHPUnit unit tests only)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run unit tests only: ./scripts/commands/testos.sh -U avc

        2. Verify only unit test suite runs (no kernel tests)

        3. Check tests are isolated without database dependencies

        4. Verify execution is fast (no database bootstrap overhead)

        Success: PHPUnit unit tests only, fast execution, no kernel tests

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with -k flag (run PHPUnit kernel tests only)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run kernel tests only: ./scripts/commands/testos.sh -k avc

        2. Verify only kernel test suite runs (no unit tests)

        3. Check tests have database and Drupal API access

        4. Verify tests include entity CRUD, service integration

        Success: PHPUnit kernel tests only, database access enabled

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with -s flag (run PHPStan static analysis)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run static analysis: ./scripts/commands/testos.sh -s avc

        2. Verify PHPStan analyzes OpenSocial profile code

        3. Check output shows type errors, undefined methods, dead code detection

        4. Verify analysis level and configuration are OpenSocial-appropriate

        Success: PHPStan runs on OpenSocial code, detects type issues

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with -c flag (run PHP CodeSniffer)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run code standards check: ./scripts/commands/testos.sh -c avc

        2. Verify PHPCS checks OpenSocial custom code against Drupal standards

        3. Check output shows coding standards violations or compliance

        4. Verify DrupalPractice standard is applied

        Success: PHPCS runs on OpenSocial code, checks Drupal standards

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with -a flag (run all tests)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run all tests: ./scripts/commands/testos.sh -a avc

        2. Verify runs Behat, PHPUnit (unit + kernel), and PHPStan

        3. Check complete test suite executes against OpenSocial profile

        4. Verify output shows results for all test types

        Success: All tests run (Behat + PHPUnit + PHPStan) on OpenSocial site

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with -f flag (run specific Behat feature)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. List available features: ./scripts/commands/testos.sh --list-features avc

        2. Run specific feature: ./scripts/commands/testos.sh -b -f groups avc

        3. Verify only the groups feature tests run (not all features)

        4. Check output shows tests from groups.feature file only

        Success: Specific Behat feature runs, other features skipped

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with -t flag (run tests with specific tag)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run tests with tag: ./scripts/commands/testos.sh -b -t @api avc

        2. Verify only tests tagged with @api run

        3. Check other tags (@smoke, @javascript) are skipped

        4. Verify output shows filtered test results

        Success: Behat runs only tests with specified tag, filtering works

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with --list-features flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. List features: ./scripts/commands/testos.sh --list-features avc

        2. Verify displays all available OpenSocial features (groups, events, account, etc.)

        3. Check output is formatted and readable

        4. Verify feature names match OpenSocial capabilities

        Success: All OpenSocial features listed (account, activity-stream, groups, events, etc.)

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with --headless flag (Behat headless mode)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run in headless mode: ./scripts/commands/testos.sh -b --headless avc

        2. Verify Chrome runs in headless mode (no visible browser window)

        3. Check tests execute normally without GUI

        4. Verify default behavior (headless is default)

        Success: Behat runs in headless mode, no browser window visible

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with --headed flag (Behat with visible browser)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run with visible browser: ./scripts/commands/testos.sh -b --headed avc

        2. Verify Chrome browser window is visible during test execution

        3. Watch browser automation in real-time

        4. Check tests complete successfully with GUI

        Success: Behat runs with visible Chrome browser, useful for debugging

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with --group flag (PHPUnit test group)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run specific test group: ./scripts/commands/testos.sh -u --group=functional avc

        2. Verify only tests in the specified group run

        3. Check other groups are excluded from execution

        4. Verify output shows group-filtered results

        Success: PHPUnit runs only specified test group, filtering works

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with --coverage flag (generate code coverage)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run with coverage: ./scripts/commands/testos.sh -u --coverage avc

        2. Verify code coverage report generated (HTML or text)

        3. Check coverage report shows percentage of code tested

        4. Verify coverage includes OpenSocial profile files

        Success: Code coverage report generated, shows coverage percentages

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with --testdox flag (PHPUnit testdox output)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run with testdox output: ./scripts/commands/testos.sh -u --testdox avc

        2. Verify output is in testdox format (readable test documentation)

        3. Check format shows test names as human-readable sentences

        4. Verify easier to read than standard PHPUnit output

        Success: PHPUnit outputs in testdox format, human-readable test descriptions

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Test with --stop-on-failure flag
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run with stop-on-failure: ./scripts/commands/testos.sh -u --stop-on-failure avc

        2. Verify execution stops immediately on first test failure

        3. Check remaining tests are not executed after failure

        4. Verify useful for fast debugging of failures

        Success: Test execution stops on first failure, remaining tests skipped

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Verify Selenium Chrome installation works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Remove Selenium if installed: cd sites/avc && ddev delete -O ddev-selenium-standalone-chrome

        2. Run testos with Behat: ./scripts/commands/testos.sh -b avc

        3. Verify script detects missing Selenium and offers to install

        4. Accept installation and verify Selenium addon installed

        5. Check Chrome container running: ddev describe

        Success: testos auto-detects missing Selenium, installs addon, Chrome container runs

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Verify Behat configuration generation works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Remove behat.yml: rm sites/avc/behat.yml

        2. Run testos: ./scripts/commands/testos.sh -b avc

        3. Verify script generates behat.yml with OpenSocial-specific configuration

        4. Check behat.yml includes correct base_url, Drupal root, OpenSocial contexts

        5. Verify feature paths point to OpenSocial profile features

        Success: behat.yml auto-generated with OpenSocial profile configuration

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    - text: Check test dependency installation (Behat, PHPUnit, etc.)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Remove test dependencies: cd sites/avc && ddev composer remove --dev drupal/drupal-extension phpunit/phpunit

        2. Run testos: ./scripts/commands/testos.sh -a avc

        3. Verify script detects missing dependencies and offers to install

        4. Accept installation and verify all test tools installed

        5. Check tests run successfully after installation

        Success: testos detects missing dependencies, auto-installs Behat/PHPUnit/PHPStan

        '
      related_docs:
      - docs/reference/commands/testos.md
      - docs/testing/testing.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_cli_register:
    name: CLI Registration Library (lib/cli-register.sh)
    description: Manages CLI command registration for multiple NWP installations
    files:
    - lib/cli-register.sh
    checklist:
    - text: Test register_cli_command function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/cli-register.sh lib/ui.sh

        2. Run registration: register_cli_command "$PWD"

        3. Verify output shows "OK" status and chosen command name (pl or pl1, etc.)

        4. Check symlink exists: ls -la /usr/local/bin/pl*

        5. Test command works: pl --version

        Success: Registration completes without errors, command available in PATH'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cli-register.sh
    - text: Verify symlink creation in /usr/local/bin/
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Before registration: ls -la /usr/local/bin/pl* (note existing)

        2. Run: source lib/cli-register.sh; register_cli_command "$PWD"

        3. Verify new symlink: ls -la /usr/local/bin/pl (or pl1, pl2)

        4. Check target: readlink -f /usr/local/bin/pl (should point to ~/nwp/pl)

        5. Test symlink: /usr/local/bin/pl --version (should work)

        Success: Symlink created correctly in /usr/local/bin pointing to project pl script'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cli-register.sh
    - text: Test find_available_cli_name (pl, pl1, pl2, etc.)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/cli-register.sh lib/ui.sh

        2. Create dummy symlinks: sudo ln -s /dev/null /usr/local/bin/pl; sudo ln -s /dev/null /usr/local/bin/pl1

        3. Test function: find_available_cli_name "$PWD"

        4. Verify returns "pl2" (first available)

        5. Clean up: sudo rm /usr/local/bin/pl /usr/local/bin/pl1

        6. Test again, verify returns "pl"

        Success: Function finds first available name in sequence (pl, pl1, pl2, ...)'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cli-register.sh
    - text: Verify cnwp.yml cli_command setting is updated
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check before: grep "cli_command:" cnwp.yml (may not exist yet)

        2. Run registration: source lib/cli-register.sh; register_cli_command "$PWD"

        3. Check after: grep "cli_command:" cnwp.yml

        4. Verify format: should be under settings: section, e.g., "cli_command: pl"

        5. Run get_cli_command, verify returns same value

        Success: cnwp.yml updated with cli_command setting under settings section'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cli-register.sh
      - example.cnwp.yml
    - text: Test unregister_cli_command function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. First register: source lib/cli-register.sh; register_cli_command "$PWD"

        2. Verify registered: which pl (should show /usr/local/bin/pl)

        3. Run unregister: unregister_cli_command

        4. Verify symlink removed: ls /usr/local/bin/pl (should not exist or point elsewhere)

        5. Verify cnwp.yml cleaned: grep "cli_command:" cnwp.yml (should be empty)

        Success: Symlink removed, cnwp.yml setting cleared, clean unregistration'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cli-register.sh
    - text: Verify get_cli_command reads from cnwp.yml
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Source library: source lib/cli-register.sh\n2. Set test value: echo -e \"\nsettings:\n  cli_command: testcmd\" >> cnwp.yml\n3. Run function: result=$(get_cli_command)\n4. Verify: echo \"$result\" (should output \"testcmd\")\n5. Clean up: git checkout cnwp.yml\n6. Test default: get_cli_command (should return \"pl\" when setting missing)\nSuccess: Reads from cnwp.yml settings section, defaults to 'pl' if not found"
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cli-register.sh
    - text: Test switching CLI command names
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Register as pl: source lib/cli-register.sh; register_cli_command "$PWD" "pl"

        2. Verify: which pl

        3. Switch to pl2: register_cli_command "$PWD" "pl2"

        4. Verify old removed: ls /usr/local/bin/pl (should not exist)

        5. Verify new exists: which pl2

        6. Check cnwp.yml: grep "cli_command:" cnwp.yml (should show "pl2")

        Success: Old symlink removed, new created, cnwp.yml updated to new name'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cli-register.sh
    - text: Verify stale registration cleanup
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create stale symlink: sudo ln -s /tmp/nonexistent/pl /usr/local/bin/pl

        2. Try to register: source lib/cli-register.sh; register_cli_command "$PWD" "pl"

        3. Verify detects stale link (target doesn''t match this project)

        4. Verify falls back to pl1 or prompts to override

        5. Clean up: sudo rm /usr/local/bin/pl /usr/local/bin/pl1

        Success: Detects stale/mismatched symlinks, chooses alternative name or prompts'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cli-register.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_ddev_generate:
    name: DDEV Generation Library (lib/ddev-generate.sh)
    description: Generate DDEV configuration from .env and cnwp.yml
    files:
    - lib/ddev-generate.sh
    checklist:
    - text: Test DDEV config generation from .env file
      completed: false
      completed_by: null
      completed_at: null
    - text: Verify config.yaml is created correctly
      completed: false
      completed_by: null
      completed_at: null
    - text: Test with different PHP versions (8.1, 8.2, 8.3)
      completed: false
      completed_by: null
      completed_at: null
    - text: Test with different database types (mysql, mariadb)
      completed: false
      completed_by: null
      completed_at: null
    - text: Verify webserver type configuration (nginx-fpm, apache-fpm)
      completed: false
      completed_by: null
      completed_at: null
    - text: Test environment variable injection
      completed: false
      completed_by: null
      completed_at: null
    - text: Verify config.local.yaml.example generation
      completed: false
      completed_by: null
      completed_at: null
    - text: Test service recommendations (Redis, Solr, Memcache)
      completed: false
      completed_by: null
      completed_at: null
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_developer:
    name: Developer Identity Library (lib/developer.sh)
    description: Developer roles and permissions management
    files:
    - lib/developer.sh
    checklist:
    - text: Test init_developer_config function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Remove existing config: rm -f /home/rob/nwp/.nwp-developer.yml

        2. Source library: source lib/developer.sh

        3. Run init (use echo to simulate input): echo -e "testdev\\ntest@example.com\\ntest.nwpcode.org" | init_developer_config

        4. Verify file created: cat /home/rob/nwp/.nwp-developer.yml

        5. Check contents: role should be "contributor", level 30, subdomain set

        6. Test duplicate prevention: init_developer_config should fail if already exists

        Success: Config file created with correct structure, role/level set based on subdomain

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/developer.sh
      - docs/governance/roles.md
    - text: Verify .nwp-developer.yml creation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check example exists: cat /home/rob/nwp/.nwp-developer.example.yml

        2. Source library and init: source lib/developer.sh && create_developer_example

        3. Verify example has all required fields: name, email, role, level, subdomain, contributions

        4. Test has_developer_config: should return true after init

        5. Verify file is gitignored: grep .nwp-developer.yml /home/rob/nwp/.gitignore

        Success: Example template correct, .gitignore entry exists, structure documented

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/developer.sh
      - docs/governance/roles.md
    - text: Test get_developer_role function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test config with known role: echo ''developer:\\n  role: contributor'' > /tmp/test-dev.yml

        2. Export DEVELOPER_CONFIG=/tmp/test-dev.yml

        3. Source library: source lib/developer.sh

        4. Test: get_developer_role (should return "contributor")

        5. Test fallback: rm /tmp/test-dev.yml && get_developer_role (should return "newcomer")

        6. Test all roles: core, steward, contributor, newcomer

        Success: Correctly reads role from YAML, defaults to newcomer when missing

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/developer.sh
      - docs/governance/roles.md
    - text: Test get_developer_level function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test with contributor: echo ''developer:\\n  level: 30'' > /tmp/test-dev.yml

        2. Export DEVELOPER_CONFIG=/tmp/test-dev.yml && source lib/developer.sh

        3. Verify: get_developer_level (should return 30)

        4. Test levels: 0 (newcomer), 30 (contributor), 40 (core), 50 (steward)

        5. Test fallback: rm config, should return 0

        Success: Correctly reads numeric level, matches GitLab access levels

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/developer.sh
      - docs/governance/roles.md
    - text: Verify role_to_level and level_to_role conversions
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/developer.sh

        2. Test role_to_level: role_to_level "newcomer" → 0

        3. Test role_to_level: role_to_level "contributor" → 30

        4. Test role_to_level: role_to_level "core" → 40

        5. Test role_to_level: role_to_level "steward" → 50

        6. Test level_to_role: level_to_role 0 → newcomer, 30 → contributor, 40 → core, 50 → steward

        7. Test level_to_role boundaries: 35 → contributor, 45 → core

        Success: Bidirectional conversion works, boundary conditions correct

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/developer.sh
      - docs/governance/roles.md
    - text: Test can_developer permission checks
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create configs for each role level: newcomer(0), contributor(30), core(40), steward(50)

        2. Source library: source lib/developer.sh

        3. Test newcomer: can_developer "fork" → true, can_developer "push" → false

        4. Test contributor: can_developer "push" → true, can_developer "merge" → false

        5. Test core: can_developer "merge" → true, can_developer "admin" → false

        6. Test steward: can_developer "admin" → true

        7. Test invalid action: can_developer "invalid" → false

        Success: Permission matrix enforced correctly for all roles and actions

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/developer.sh
      - docs/governance/roles.md
    - text: Test set_developer_role function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test config: init_developer_config with contributor role

        2. Source library: source lib/developer.sh

        3. Promote to core: set_developer_role "core"

        4. Verify: get_developer_role → "core", get_developer_level → 40

        5. Test downgrade: set_developer_role "contributor"

        6. Verify: get_developer_role → "contributor", get_developer_level → 30

        7. Requires yq installed

        Success: Role and level updated together, changes persist in YAML

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/developer.sh
      - docs/governance/roles.md
    - text: Verify sync_developer_info from GitLab
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Ensure .secrets.yml has gitlab.api_token and gitlab.server.domain

        2. Create developer config with existing GitLab user

        3. Source library: source lib/developer.sh

        4. Run sync: sync_developer_info

        5. Verify contributions updated: check .nwp-developer.yml contributions section

        6. Verify last_sync timestamp updated

        7. Test failure: invalid username should fail gracefully

        Success: Contribution stats fetched from GitLab API, YAML updated, timestamp recorded

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/developer.sh
      - docs/governance/roles.md
    - text: Test show_developer_status display
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create complete developer config with all fields

        2. Source library: source lib/developer.sh

        3. Run: show_developer_status

        4. Verify output shows: name, email, role, level, subdomain, capabilities

        5. Verify contributions section if yq available

        6. Test with missing config: should show helpful message

        Success: Status displays formatted info, helpful for onboarding, clear error messages

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/developer.sh
      - docs/governance/roles.md
      - docs/guides/coder-onboarding.md
    - text: Verify developer_push wrapper (blocks push to main for non-core)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test git repo: git init /tmp/test-dev-push

        2. Create contributor config (level 30)

        3. Source library: source lib/developer.sh

        4. Test push to main: cd /tmp/test-dev-push && git checkout -b main && developer_push

        5. Should fail with error about creating feature branch

        6. Test push to feature: git checkout -b feature/test && developer_push

        7. Should succeed (or fail for other git reasons, not permission)

        8. Test with core role: should allow push to main

        Success: Contributors blocked from main, directed to feature branches, core allowed

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/developer.sh
      - docs/governance/roles.md
      - docs/guides/developer-workflow.md
    - text: Verify developer_merge wrapper (blocks merge for non-core)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test git repo with branches: git init /tmp/test-dev-merge

        2. Create contributor config (level 30)

        3. Source library: source lib/developer.sh

        4. Test merge: cd /tmp/test-dev-merge && developer_merge feature/test

        5. Should fail with error about submitting MR

        6. Change to core role (level 40): set_developer_role "core"

        7. Test merge again: should proceed (git may fail for other reasons)

        Success: Contributors blocked from merge, directed to MR process, core allowed

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/developer.sh
      - docs/governance/roles.md
      - docs/guides/developer-workflow.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_env_generate:
    name: Environment Generation Library (lib/env-generate.sh)
    description: Generate .env file from cnwp.yml and template
    files:
    - lib/env-generate.sh
    checklist:
    - text: Test .env generation from recipe and sitename
      completed: false
      completed_by: null
      completed_at: null
    - text: Verify recipe-specific templates are used
      completed: false
      completed_by: null
      completed_at: null
    - text: Test profile-based template fallback
      completed: false
      completed_by: null
      completed_at: null
    - text: Verify variable substitution works
      completed: false
      completed_by: null
      completed_at: null
    - text: Test service configuration (Redis, Solr, Memcache)
      completed: false
      completed_by: null
      completed_at: null
    - text: Verify .env.local.example creation
      completed: false
      completed_by: null
      completed_at: null
    - text: Test with different profiles (social, varbase, standard)
      completed: false
      completed_by: null
      completed_at: null
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_install_common:
    name: Install Common Library (lib/install-common.sh)
    description: Shared installation functions for all types (Drupal, Moodle, GitLab, Podcast)
    files:
    - lib/install-common.sh
    checklist:
    - text: Test run_interactive_options function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/install-common.sh

        2. Source dependencies: source lib/common.sh lib/ui.sh lib/checkbox.sh

        3. Run install with interactive mode: pl install --recipe=os avc

        4. Verify TUI shows options for selection with checkboxes

        5. Test navigation (UP/DOWN arrows, SPACE to toggle, ENTER to confirm)

        6. Check OPTION_SELECTED array is populated: echo "${OPTION_SELECTED[@]}"

        Success: Interactive TUI launches, options can be toggled, selections are stored in OPTION_SELECTED array

        '
      related_docs:
      - docs/reference/api/library-functions.md#run_interactive_options
      - lib/install-common.sh
      - docs/reference/commands/install.md
    - text: Verify update_site_options updates cnwp.yml
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library and dependencies

        2. Install a test site with options: pl install --recipe=os test-site

        3. Select some options during interactive install

        4. After install, check cnwp.yml: yq eval ''.sites.test-site.options'' cnwp.yml

        5. Verify selected options appear under site entry

        6. Test with no options: modify site with no selections

        7. Verify options section is removed when empty

        Success: Selected options are written to cnwp.yml, empty options are removed

        '
      related_docs:
      - docs/reference/api/library-functions.md#update_site_options
      - lib/install-common.sh
      - example.cnwp.yml
    - text: Test apply_drupal_options function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install Drupal site with options: pl install --recipe=os avc

        2. Select Drupal-specific options (e.g., devel_generate, admin_toolbar)

        3. After install, verify modules are enabled: cd sites/avc && ddev drush pm:list --status=enabled

        4. Check for admin_toolbar: ddev drush pm:info admin_toolbar

        5. Verify configuration changes were applied

        Success: Selected Drupal options result in modules being enabled and configured

        '
      related_docs:
      - docs/reference/api/library-functions.md#apply_drupal_options
      - lib/install-common.sh
      - lib/options-drupal.sh
    - text: Test apply_moodle_options function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install Moodle site: pl install --recipe=moodle ss

        2. Select Moodle-specific options during install

        3. Verify options are applied post-installation

        4. Check Moodle configuration via admin interface

        Success: Selected Moodle options are properly applied during installation

        '
      related_docs:
      - docs/reference/api/library-functions.md#apply_moodle_options
      - lib/install-common.sh
      - lib/options-moodle.sh
    - text: Test apply_gitlab_options function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install GitLab site: pl install --recipe=gitlab git

        2. Select GitLab-specific options during install

        3. Verify docker-compose.yml reflects selected options

        4. Check GitLab container configuration

        Success: Selected GitLab options are applied to installation configuration

        '
      related_docs:
      - docs/reference/api/library-functions.md#apply_gitlab_options
      - lib/install-common.sh
      - lib/install-gitlab.sh
    - text: Verify get_recipe_value YAML parsing
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/install-common.sh

        2. Test reading recipe value: get_recipe_value "os" "drupal_version"

        3. Verify returns correct value from recipes/os.yml

        4. Test nested keys: get_recipe_value "os" "composer.project"

        5. Test with non-existent recipe or key returns empty

        Success: Recipe YAML values parsed correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-common.sh
      - recipes/os.yml
    - text: Test get_recipe_list_value for arrays
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/install-common.sh

        2. Test array reading: modules=($(get_recipe_list_value "os" "post_install_modules"))

        3. Verify returns array of module names

        4. Check array length: echo "${#modules[@]}"

        5. Test with empty arrays returns nothing

        Success: Recipe arrays parsed into bash arrays correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-common.sh
      - recipes/os.yml
    - text: Verify get_settings_value function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/install-common.sh

        2. Test reading settings: get_settings_value "default_recipe"

        3. Verify returns value from cnwp.yml settings section

        4. Test with nested keys: get_settings_value "ddev.php_version"

        5. Test with non-existent keys returns empty or default

        Success: Settings values read from cnwp.yml correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-common.sh
      - example.cnwp.yml
    - text: Test recipe_exists validation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/install-common.sh

        2. Test existing recipe: recipe_exists "os" && echo "Exists"

        3. Verify returns 0 for recipes/os.yml

        4. Test non-existent: recipe_exists "nonexistent" || echo "Not found"

        5. Verify returns 1 for missing recipe files

        Success: Recipe existence validation works correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-common.sh
    - text: Verify validate_recipe function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/install-common.sh lib/ui.sh

        2. Test valid recipe: validate_recipe "os"

        3. Verify checks recipe file exists and has required fields

        4. Test invalid recipe: validate_recipe "broken"

        5. Verify fails with clear error message

        Success: Recipe validation identifies structural issues

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-common.sh
      - recipes/
    - text: Test list_recipes display
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/install-common.sh lib/ui.sh

        2. Run: list_recipes

        3. Verify displays all recipes from recipes/ directory

        4. Check format shows: recipe name, type, description

        5. Verify sorted and formatted correctly

        Success: All available recipes listed with metadata

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-common.sh
      - docs/reference/commands/install.md
    - text: Verify install_git_profile function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/install-common.sh lib/ui.sh

        2. Create test site directory: mkdir -p /tmp/test-site

        3. Test: install_git_profile "/tmp/test-site" "https://github.com/test/profile.git" "main"

        4. Verify git clone executed to correct location

        5. Verify branch checked out correctly

        Success: Git profile cloned and checked out correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-common.sh
    - text: Test install_git_modules function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/install-common.sh lib/ui.sh

        2. Create test site: mkdir -p /tmp/test-site/web/modules/custom

        3. Test: install_git_modules "/tmp/test-site" "module1:https://git.example.com/module1.git"

        4. Verify module cloned to web/modules/custom/module1

        5. Test multiple modules with comma-separated list

        Success: Git modules cloned to correct locations

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-common.sh
    - text: Verify pre_register_live_dns function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/install-common.sh lib/cloudflare.sh lib/ui.sh

        2. Test DNS registration: pre_register_live_dns "test.example.com" "192.0.2.1"

        3. Verify Cloudflare API called to create A record

        4. Check error handling for invalid domain

        5. Verify skips if Cloudflare not configured

        Success: DNS records created when Cloudflare configured

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-common.sh
      - lib/cloudflare.sh
    - text: Test generate_live_settings function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/install-common.sh lib/ui.sh

        2. Test: generate_live_settings "testsite" "test.example.com" "/tmp/settings.php"

        3. Verify settings.php generated with correct domain

        4. Check includes database credentials placeholders

        5. Verify trusted host patterns set correctly

        Success: Live settings.php generated with production configuration

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-common.sh
    - text: Verify create_test_content function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/install-common.sh lib/ui.sh

        2. Install test site: pl install --recipe=os test

        3. Run: create_test_content "test" 10

        4. Verify 10 test nodes created

        5. Check content has realistic titles, bodies, dates

        6. Verify users, taxonomy terms also created

        Success: Test content generated with devel_generate

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-common.sh
      - recipes/
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_install_drupal:
    name: Drupal Installation Library (lib/install-drupal.sh)
    description: Drupal/OpenSocial installation implementation
    files:
    - lib/install-drupal.sh
    checklist:
    - text: Test install_drupal main function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test site: pl install os test-drupal

        2. Monitor installation through all 9 steps

        3. Verify successful completion message

        4. Check site accessible: cd sites/test-drupal && ddev launch

        5. Success: Complete Drupal installation, site functional'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
    - text: 'Verify Step 1: Initialize project with Composer'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install site with composer source: pl install os test-os

        2. Check composer.json created in sites/test-os/

        3. Verify vendor/ directory with dependencies

        4. Check drush available: cd sites/test-os && vendor/bin/drush --version

        5. Success: Project initialized via composer, dependencies installed'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
    - text: 'Verify Step 1: Clone project from Git (source_git)'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Configure recipe with source_git instead of source

        2. Install site: pl install custom-recipe test-git

        3. Check .git directory exists in sites/test-git/

        4. Verify remote: cd sites/test-git && git remote -v

        5. Success: Project cloned from git, dependencies installed via composer'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
    - text: 'Verify Step 2: Generate environment configuration'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. During installation, check .env file created

        2. Verify environment variables: cat sites/test-drupal/.env

        3. Check DDEV_SITENAME, DDEV_DOCROOT, DATABASE values

        4. Confirm env-generate.sh was called

        5. Success: .env file contains correct configuration from cnwp.yml'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
      - lib/env-generate.sh
    - text: 'Verify Step 3: Configure DDEV'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check .ddev/config.yaml created

        2. Verify project type: grep "type:" sites/test-drupal/.ddev/config.yaml

        3. Check PHP version: grep "php_version:" sites/test-drupal/.ddev/config.yaml

        4. Verify database type: grep "database:" sites/test-drupal/.ddev/config.yaml

        5. Success: DDEV configured with correct Drupal settings'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
      - lib/ddev-generate.sh
    - text: 'Verify Step 4: Memory configuration'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check PHP memory config: cat sites/test-drupal/.ddev/php/memory.ini

        2. Verify memory_limit set (default 512M)

        3. Check max_execution_time configured

        4. Verify upload_max_filesize and post_max_size

        5. Success: PHP memory limits configured from settings or defaults'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
    - text: 'Verify Step 5: Launch DDEV services'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check DDEV started: cd sites/test-drupal && ddev status

        2. Verify web and db containers running

        3. Test site accessible via URL

        4. Check GitLab composer auth configured if available

        5. Success: DDEV services running, site reachable'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
    - text: 'Verify Step 6: Verify Drush is available'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check drush exists: cd sites/test-drupal && ls -la vendor/bin/drush

        2. Test drush runs: ddev drush --version

        3. Verify drush status command: ddev drush status

        4. Check installation stops if drush missing

        5. Success: Drush installed and executable in DDEV container'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
    - text: 'Verify Step 7: Configure file system and environment detection'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check private/ directory created

        2. Verify settings.php: cat sites/test-drupal/html/sites/default/settings.php

        3. Check environment detection code present

        4. Verify includes/modules/ directory exists

        5. Success: Private files configured, environment detection working'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
    - text: 'Verify Step 8: Install Drupal profile'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Monitor installation for site:install command

        2. Check database created: cd sites/test-drupal && ddev drush sql-query "SHOW TABLES;"

        3. Verify admin credentials displayed

        4. Test login with admin user

        5. Success: Drupal profile installed, site accessible, admin works'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
    - text: 'Verify Step 9: Enable core modules and post-install'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check environment_indicator enabled: ddev drush pm:list --status=enabled | grep environment_indicator

        2. Verify post_install_modules from recipe enabled

        3. Check default theme set if specified in recipe

        4. Verify configuration exported to config/sync/

        5. Success: Core modules enabled, config exported, theme set'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
    - text: Test resume from step functionality
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Start fresh install, interrupt at step 3: pl install os test-resume

        2. Check cnwp.yml has install_step recorded

        3. Resume from step 3: pl install -s=3 os test-resume

        4. Verify steps 1-2 skipped, continues from 3

        5. Success: Installation resumes without repeating earlier steps'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
      - lib/install-steps.sh
    - text: Verify GitLab Composer authentication
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Configure .secrets.yml with gitlab.url and gitlab.token

        2. Install site requiring GitLab packages

        3. Check composer auth configured: ddev composer config --list | grep gitlab-token

        4. Verify packages download from GitLab registry

        5. Success: GitLab authentication configured, private packages accessible'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
      - docs/DATA_SECURITY_BEST_PRACTICES.md
    - text: Test post-install module enabling
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Add post_install_modules to recipe: [''devel'', ''admin_toolbar'']

        2. Install site: pl install custom-recipe test-postmods

        3. Verify modules enabled: ddev drush pm:list --status=enabled

        4. Check both devel and admin_toolbar present

        5. Success: post_install_modules enabled after site installation'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
    - text: Test post-install script execution
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Add post_install_scripts to recipe: [''scripts/seed.sh'', ''scripts/setup.php'']

        2. Create test scripts in recipe

        3. Install site: pl install custom-recipe test-scripts

        4. Check scripts executed (verify output or side effects)

        5. Success: Both shell and PHP scripts execute in DDEV container'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
    - text: Verify site registration in cnwp.yml
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install new site: pl install os test-register

        2. Check cnwp.yml for site entry: grep -A 10 "test-register:" cnwp.yml

        3. Verify directory, recipe, environment, purpose fields

        4. Check install_step set to -1 (complete)

        5. Success: Site registered in cnwp.yml with complete metadata'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-drupal.sh
      - lib/yaml.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_install_gitlab:
    name: GitLab Installation Library (lib/install-gitlab.sh)
    description: GitLab CE installation via Docker
    files:
    - lib/install-gitlab.sh
    checklist:
    - text: Test install_gitlab main function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test GitLab instance: pl install gitlab test-gitlab

        2. Monitor installation through 4 steps

        3. Verify docker-compose.yml and README created

        4. Check containers started: cd sites/test-gitlab && docker-compose ps

        5. Success: GitLab installation configured, containers optional start'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-gitlab.sh
    - text: 'Verify Step 1: Create directory structure'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check directory created: ls -la sites/test-gitlab/

        2. Verify subdirectories: ls sites/test-gitlab/{config,logs,data}

        3. Confirm permissions allow Docker access

        4. Check directory ownership correct

        5. Success: GitLab directory structure created with required subdirs'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-gitlab.sh
    - text: 'Verify Step 2: Create docker-compose.yml'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check file exists: cat sites/test-gitlab/docker-compose.yml

        2. Verify GitLab CE image specified

        3. Check port mappings: 8080:80, 8443:443, 2222:22

        4. Verify volume mounts for config, logs, data

        5. Success: docker-compose.yml valid with reduced memory config'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-gitlab.sh
    - text: 'Verify Step 3: Create environment configuration'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check .env file: cat sites/test-gitlab/.env

        2. Verify GITLAB_HOME, EXTERNAL_URL variables

        3. Check README.md created with instructions

        4. Verify README contains startup, password retrieval steps

        5. Success: Environment files created with complete setup instructions'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-gitlab.sh
    - text: 'Verify Step 4: Start GitLab containers'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Opt to start containers during install

        2. Check containers running: docker-compose ps

        3. Monitor logs: docker-compose logs -f gitlab

        4. Wait for health check to pass (5-10 minutes)

        5. Success: GitLab container started, accessible on http://localhost:8080'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-gitlab.sh
    - text: Test reduced memory mode configuration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check docker-compose.yml for GITLAB_OMNIBUS_CONFIG

        2. Verify puma workers reduced: puma[''worker_processes''] = 2

        3. Check sidekiq concurrency: sidekiq[''max_concurrency''] = 5

        4. Verify monitoring disabled: prometheus_monitoring[''enable''] = false

        5. Success: GitLab configured for reduced memory usage'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-gitlab.sh
    - text: Verify README.md generation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check README exists: cat sites/test-gitlab/README.md

        2. Verify Quick Start section with docker-compose commands

        3. Check password retrieval instructions present

        4. Verify Management Commands section complete

        5. Success: README contains all necessary GitLab operation instructions'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-gitlab.sh
    - text: Test site registration in cnwp.yml
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install GitLab instance: pl install gitlab test-gitlab

        2. Check cnwp.yml for entry: grep -A 8 "test-gitlab:" cnwp.yml

        3. Verify directory, recipe type (gitlab), environment

        4. Check purpose field recorded

        5. Success: GitLab site registered in cnwp.yml with metadata'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-gitlab.sh
      - lib/yaml.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_install_moodle:
    name: Moodle Installation Library (lib/install-moodle.sh)
    description: Moodle LMS installation implementation
    files:
    - lib/install-moodle.sh
    checklist:
    - text: Test install_moodle main function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test Moodle site: pl install moodle test-moodle

        2. Monitor installation progress through function

        3. Check for successful completion message

        4. Verify Moodle directory structure created

        5. Success: install_moodle() completes without errors, site structure correct'
      related_docs:
      - docs/reference/commands/install.md
    - text: 'Verify Step 1: Clone Moodle from Git'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. During Moodle install, check output for Git clone step

        2. Verify Moodle repository cloned to correct location

        3. Check .git directory exists in site

        4. Verify correct branch/version cloned

        5. Success: Moodle source cloned from official repository, correct version'
      related_docs:
      - docs/reference/commands/install.md
    - text: 'Verify Step 2: Configure DDEV'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check .ddev/config.yaml created for Moodle site

        2. Verify Moodle-specific DDEV configuration applied

        3. Check webroot set correctly for Moodle

        4. Review database configuration

        5. Success: DDEV configured for Moodle requirements, config file correct'
      related_docs:
      - docs/reference/commands/install.md
    - text: 'Verify Step 3: Memory configuration'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check PHP memory limit set for Moodle: cat .ddev/php/moodle.ini

        2. Verify memory_limit adequate (512M or higher recommended)

        3. Check other PHP settings (max_execution_time, etc.)

        4. Confirm settings loaded in DDEV

        5. Success: PHP memory and limits configured for Moodle requirements'
      related_docs:
      - docs/reference/commands/install.md
    - text: 'Verify Step 4: Launch DDEV services'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check DDEV starts: cd sites/test-moodle && ddev status

        2. Verify all services running (web, db)

        3. Check Moodle site accessible via DDEV URL

        4. Test database connectivity

        5. Success: DDEV services all running, Moodle site reachable'
      related_docs:
      - docs/reference/commands/install.md
    - text: 'Verify Step 5: Create moodledata directory'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check moodledata directory created outside webroot

        2. Verify permissions set correctly (writable by web server)

        3. Confirm path configured in Moodle config

        4. Test file uploads work in Moodle

        5. Success: moodledata directory exists with correct permissions, functional'
      related_docs:
      - docs/reference/commands/install.md
    - text: 'Verify Step 6: Install Moodle'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Monitor installation for admin/cli/install.php execution

        2. Check config.php created: cat sites/test-moodle/config.php

        3. Verify database populated: ddev exec php admin/cli/mysql_show_tables.php

        4. Test login with admin credentials from install output

        5. Success: Moodle installed, database configured, admin access works'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-moodle.sh
    - text: 'Verify Step 7: Post-installation configuration'
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check slasharguments disabled: ddev exec php admin/cli/cfg.php --name=slasharguments

        2. Verify value is 0 for DDEV/nginx compatibility

        3. Test asset loading: check browser console for JS/CSS errors

        4. Verify caches purged after configuration

        5. Success: Post-install config applied, assets load correctly'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-moodle.sh
    - text: Test with different Moodle branches
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install with MOODLE_404_STABLE: pl install moodle test-m404

        2. Install with MOODLE_403_STABLE: pl install moodle test-m403

        3. Verify correct version cloned: cd sites/test-m404 && git branch

        4. Check version.php for version number

        5. Success: Different Moodle branches install correctly'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-moodle.sh
    - text: Verify site registration in cnwp.yml
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install Moodle site: pl install moodle test-moodle

        2. Check cnwp.yml entry: grep -A 8 "test-moodle:" cnwp.yml

        3. Verify recipe type (moodle), directory, environment

        4. Check install_step marked complete (-1)

        5. Success: Moodle site registered in cnwp.yml with metadata'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-moodle.sh
      - lib/yaml.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_install_podcast:
    name: Podcast Installation Library (lib/install-podcast.sh)
    description: Castopod podcast platform installation
    files:
    - lib/install-podcast.sh
    checklist:
    - text: Test install_podcast main function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Configure Linode and B2 credentials in .secrets.yml

        2. Install podcast: pl install podcast podcast.example.com

        3. Monitor podcast.sh setup integration

        4. Verify Castopod deployment to Linode

        5. Success: Podcast platform installed, accessible via domain'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-podcast.sh
      - scripts/commands/podcast.sh
    - text: Verify podcast.sh integration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check podcast.sh exists: ls -la scripts/commands/podcast.sh

        2. Test status command: ./scripts/commands/podcast.sh status

        3. Verify prerequisite checking works

        4. Check setup function called with correct params

        5. Success: install_podcast correctly delegates to podcast.sh'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-podcast.sh
      - scripts/commands/podcast.sh
    - text: Test prerequisite checking
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run install without Linode API token

        2. Verify prerequisite check fails gracefully

        3. Configure credentials, run again

        4. Check prerequisites pass with valid config

        5. Success: Missing prerequisites detected, installation blocked until ready'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-podcast.sh
    - text: Verify domain configuration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install with domain: pl install podcast myshow.example.com

        2. Check domain passed to podcast.sh setup

        3. Verify DNS configuration for domain

        4. Test site accessible at configured domain

        5. Success: Domain correctly configured in Castopod and DNS'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-podcast.sh
    - text: Test Linode region selection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Configure recipe with linode_region: us-west

        2. Install podcast instance

        3. Verify server created in correct region: linode-cli linodes list

        4. Check latency from target region

        5. Success: Linode instance created in specified region'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-podcast.sh
    - text: Verify B2 region configuration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Configure recipe with b2_region: eu-central-003

        2. Install podcast instance

        3. Check B2 bucket created in correct region

        4. Verify media uploads go to correct bucket

        5. Success: B2 storage configured in specified region'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-podcast.sh
    - text: Test media subdomain setup
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Configure media_subdomain: cdn in recipe

        2. Install podcast instance

        3. Check DNS for cdn.podcast.example.com

        4. Verify media served from subdomain

        5. Success: Media subdomain configured and serving content'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-podcast.sh
    - text: Verify site registration in cnwp.yml
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Install podcast: pl install podcast myshow.example.com

        2. Check cnwp.yml entry: grep -A 8 "myshow:" cnwp.yml

        3. Verify recipe type (podcast), environment (production)

        4. Check purpose field recorded

        5. Success: Podcast site registered in cnwp.yml'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-podcast.sh
      - lib/yaml.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_install_steps:
    name: Installation Steps Library (lib/install-steps.sh)
    description: Installation step definitions and tracking
    files:
    - lib/install-steps.sh
    checklist:
    - text: Test get_steps_for_env function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/install-steps.sh

        2. Test dev steps: get_steps_for_env dev | wc -l

        3. Test stage steps: get_steps_for_env stage | wc -l

        4. Test live steps: get_steps_for_env live | wc -l

        5. Success: Returns correct number of steps for each environment'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-steps.sh
    - text: Verify get_total_steps for each environment
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test dev total: get_total_steps dev (expect 10)

        2. Test stage total: get_total_steps stage (expect 11)

        3. Test live total: get_total_steps live (expect 13)

        4. Test prod alias: get_total_steps prod (expect 13)

        5. Success: Correct step counts for each environment type'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-steps.sh
    - text: Test get_step_info function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Get step 1 info: get_step_info 1 dev

        2. Verify output format: key:title:description

        3. Test step 9 dev: get_step_info 9 dev (should be dev_mods)

        4. Test step 9 live: get_step_info 9 live (should be security)

        5. Success: Returns correct step info for each environment'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-steps.sh
    - text: Verify get_install_step from cnwp.yml
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Start site install, stop at step 3

        2. Check step recorded: get_install_step test-site cnwp.yml

        3. Verify returns "3"

        4. Test non-existent site returns "0"

        5. Success: Correctly reads install_step from cnwp.yml'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-steps.sh
    - text: Test set_install_step updates cnwp.yml
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set step: set_install_step test-site 5 cnwp.yml

        2. Verify updated: grep "install_step:" cnwp.yml | grep "5"

        3. Update again: set_install_step test-site 7 cnwp.yml

        4. Verify changed to 7

        5. Success: install_step field updated in cnwp.yml'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-steps.sh
    - text: Verify mark_install_complete function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Mark complete: mark_install_complete test-site cnwp.yml

        2. Verify step set to -1: get_install_step test-site cnwp.yml

        3. Check is_install_complete returns true

        4. Verify status display shows "Complete"

        5. Success: Site marked as installation complete'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-steps.sh
    - text: Test is_install_complete checking
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test incomplete site: is_install_complete partial-site cnwp.yml dev

        2. Verify returns false (exit 1)

        3. Test complete site: is_install_complete complete-site cnwp.yml dev

        4. Verify returns true (exit 0)

        5. Success: Correctly identifies complete vs incomplete installations'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-steps.sh
    - text: Verify get_install_status_display function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test not started: get_install_status_display new-site cnwp.yml dev

        2. Should show "Not started"

        3. Test in progress: get_install_status_display partial-site cnwp.yml dev

        4. Should show "Stopped at step X (Title)"

        5. Success: Display string matches installation state'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-steps.sh
    - text: Test show_steps_detail display
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Show steps: show_steps_detail test-site cnwp.yml dev

        2. Verify formatted table with checkmarks for completed steps

        3. Check current step highlighted with arrow

        4. Verify future steps shown with circles

        5. Success: Step detail display formatted correctly'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-steps.sh
    - text: Verify environment-specific steps (dev, stage, live)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check dev steps include dev modules (step 9-10)

        2. Verify stage steps include sync and sanitize (step 9-11)

        3. Check live steps include security, cache, cron (step 9-13)

        4. Verify base steps 1-8 same for all environments

        5. Success: Each environment has correct specialized steps'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/install-steps.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_live_server_setup:
    name: Live Server Setup Library (lib/live-server-setup.sh)
    description: Remote server provisioning on Ubuntu 22.04/24.04 Linode instances
    files:
    - lib/live-server-setup.sh
    checklist:
    - text: Test remote_ssh command execution
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/live-server-setup.sh

        2. Set up test variables: TEST_IP="your.server.ip" SSH_KEY="~/.ssh/nwp"

        3. Test simple command: remote_ssh "$TEST_IP" "echo ''Hello from remote''" "root" "$SSH_KEY"

        4. Verify output shows "Hello from remote"

        5. Test with error: remote_ssh "$TEST_IP" "exit 1" "root" "$SSH_KEY"

        6. Verify exit code is 1: echo $?

        Success: Commands execute remotely and return proper exit codes

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/live-server-setup.sh
    - text: Verify remote_package_installed checking
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/live-server-setup.sh

        2. Check for installed package: remote_package_installed "$SERVER_IP" "curl" "root"

        3. Verify returns 0 for installed package

        4. Check for missing package: remote_package_installed "$SERVER_IP" "nonexistent-pkg" "root"

        5. Verify returns 1 for missing package

        Success: Correctly detects installed vs missing packages

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/live-server-setup.sh
    - text: Test remote_service_running checking
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/live-server-setup.sh

        2. Check running service: remote_service_running "$SERVER_IP" "ssh" "root"

        3. Verify returns 0 for running service

        4. Check stopped service: remote_service_running "$SERVER_IP" "nonexistent" "root"

        5. Verify returns 1 for stopped/missing service

        Success: Correctly detects service status via systemctl

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/live-server-setup.sh
    - text: Verify ensure_php_fpm installation and configuration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Provision test Linode: TEST_SERVER=$(provision_test_linode "$LINODE_TOKEN" "nwp-phptest")

        2. Extract IP: SERVER_IP=$(echo $TEST_SERVER | awk ''{print $2}'')

        3. Install PHP-FPM: ensure_php_fpm "$SERVER_IP" "8.2" "www-data" "root"

        4. Verify package installed: remote_package_installed "$SERVER_IP" "php8.2-fpm" "root"

        5. Verify service running: remote_service_running "$SERVER_IP" "php8.2-fpm" "root"

        6. Check pool config: remote_ssh "$SERVER_IP" "grep ''listen.owner = www-data'' /etc/php/8.2/fpm/pool.d/www.conf"

        Success: PHP-FPM installed, running, and configured with correct socket permissions

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/live-server-setup.sh
    - text: Test PHP-FPM socket permissions for nginx
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. After ensure_php_fpm completes on test server

        2. Check socket file: remote_ssh "$SERVER_IP" "ls -la /run/php/php8.2-fpm.sock"

        3. Verify owner/group shows www-data:www-data or nginx user

        4. Check pool config: remote_ssh "$SERVER_IP" "grep -E ''(listen.owner|listen.group|listen.mode)'' /etc/php/8.2/fpm/pool.d/www.conf"

        5. Verify mode is 0660

        Success: Socket has correct permissions for nginx/gitlab-www access

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/live-server-setup.sh
    - text: Verify ensure_mariadb installation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. On test Linode server: ensure_mariadb "$SERVER_IP" "root"

        2. Verify package installed: remote_package_installed "$SERVER_IP" "mariadb-server" "root"

        3. Verify service running: remote_service_running "$SERVER_IP" "mariadb" "root"

        4. Test connection: remote_ssh "$SERVER_IP" "mysql -e ''SELECT VERSION()''"

        5. Verify shows MariaDB version

        Success: MariaDB installed, running, and accessible

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/live-server-setup.sh
    - text: Test create_site_database function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. On test server with MariaDB: create_site_database "$SERVER_IP" "testdb" "testuser" "testpass" "root"

        2. Verify database created: remote_ssh "$SERVER_IP" "mysql -e ''SHOW DATABASES'' | grep testdb"

        3. Verify user created: remote_ssh "$SERVER_IP" "mysql -e ''SELECT User FROM mysql.user'' | grep testuser"

        4. Test user access: remote_ssh "$SERVER_IP" "mysql -u testuser -ptestpass testdb -e ''SELECT 1''"

        5. Verify user can query the database

        Success: Database and user created with proper permissions

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/live-server-setup.sh
    - text: Verify configure_nginx_drupal vhost generation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. On test server: configure_nginx_drupal "$SERVER_IP" "test.example.com" "/var/www/test" "root"

        2. Check vhost file created: remote_ssh "$SERVER_IP" "ls /etc/nginx/sites-available/test.example.com"

        3. Check symlink: remote_ssh "$SERVER_IP" "ls -la /etc/nginx/sites-enabled/ | grep test.example.com"

        4. Verify nginx config: remote_ssh "$SERVER_IP" "nginx -t"

        5. Check vhost contains proper PHP-FPM socket and Drupal rules

        Success: Nginx vhost created with Drupal-optimized configuration

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/live-server-setup.sh
    - text: Test provision_drupal_stack complete setup
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Provision fresh Linode: TEST_SERVER=$(provision_test_linode "$LINODE_TOKEN" "nwp-fullstack")

        2. Extract IP: SERVER_IP=$(echo $TEST_SERVER | awk ''{print $2}'')

        3. Run full stack: provision_drupal_stack "$SERVER_IP" "test.example.com" "root"

        4. Verify PHP-FPM running: remote_service_running "$SERVER_IP" "php8.2-fpm"

        5. Verify MariaDB running: remote_service_running "$SERVER_IP" "mariadb"

        6. Verify nginx configured: remote_ssh "$SERVER_IP" "nginx -t"

        Success: Complete LEMP stack provisioned and operational

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/live-server-setup.sh
    - text: Verify check_infrastructure_ready status checks
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. On provisioned server: check_infrastructure_ready "$SERVER_IP" "root"

        2. Verify returns 0 when all services running

        3. Stop a service: remote_ssh "$SERVER_IP" "systemctl stop php8.2-fpm"

        4. Run check again: check_infrastructure_ready "$SERVER_IP" "root"

        5. Verify returns 1 and reports missing service

        Success: Correctly validates full infrastructure readiness

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/live-server-setup.sh
    - text: Test with GitLab bundled nginx (gitlab-www group)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. On server with GitLab installed: ensure_php_fpm "$SERVER_IP" "8.2" "gitlab-www" "root"

        2. Verify pool config uses gitlab-www: remote_ssh "$SERVER_IP" "grep ''listen.owner = gitlab-www'' /etc/php/8.2/fpm/pool.d/www.conf"

        3. Check socket permissions: remote_ssh "$SERVER_IP" "ls -la /run/php/php8.2-fpm.sock | grep gitlab-www"

        4. Test nginx can access: remote_ssh "$SERVER_IP" "sudo -u gitlab-www test -r /run/php/php8.2-fpm.sock && echo OK"

        5. Verify returns OK

        Success: PHP-FPM integrates with GitLab''s nginx (gitlab-www group)

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/live-server-setup.sh
      - docs/guides/gitlab-integration.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_terminal:
    name: Terminal Control Library (lib/terminal.sh)
    description: Minimal terminal control functions for TUI
    files:
    - lib/terminal.sh
    checklist:
    - text: Test cursor_to positioning
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/terminal.sh

        2. Test cursor positioning: cursor_to 5 10; echo "Test"

        3. Verify text appears at row 5, column 10

        4. Test multiple positions: cursor_to 1 1; echo "Top left"; cursor_to 10 20; echo "Middle"

        5. Clear and verify: clear_screen; cursor_to 15 30; echo "Bottom right"

        Success: Cursor moves to specified row/column positions correctly'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/terminal.sh
    - text: Verify cursor_hide and cursor_show
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/terminal.sh

        2. Test hide: cursor_hide; echo "Cursor should be hidden"; sleep 2

        3. Test show: cursor_show; echo "Cursor should be visible"

        4. Test in loop: for i in 1 2 3; do cursor_hide; sleep 1; cursor_show; sleep 1; done

        5. Verify cursor visibility toggles correctly

        Success: Cursor hides and shows on command without terminal artifacts'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/terminal.sh
    - text: Test clear_screen and clear_line
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/terminal.sh

        2. Echo lines: echo "Line 1"; echo "Line 2"; echo "Line 3"

        3. Test clear screen: clear_screen (should clear all and move cursor to top-left)

        4. Echo text: echo "New content at top"

        5. Test clear line: cursor_to 5 1; echo "Test line"; cursor_to 5 1; clear_line; echo "Replaced"

        Success: Screen clears completely, line clears without affecting other lines'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/terminal.sh
    - text: Verify read_key function (UP, DOWN, LEFT, RIGHT)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/terminal.sh

        2. Create test loop: while true; do key=$(read_key); echo "Key: $key"; [[ "$key" == "q" ]] && break; done

        3. Press UP arrow, verify outputs "UP"

        4. Press DOWN arrow, verify outputs "DOWN"

        5. Press LEFT/RIGHT arrows, verify outputs "LEFT"/"RIGHT"

        6. Press ''q'' to exit test

        Success: All arrow keys detected and returned correctly as named strings'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/terminal.sh
    - text: Test ENTER and SPACE key detection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/terminal.sh

        2. Test ENTER: key=$(read_key); echo "Key: $key" (press Enter, should output "ENTER")

        3. Test SPACE: key=$(read_key); echo "Key: $key" (press Space, should output "SPACE")

        4. Test in selection loop: while true; do key=$(read_key); [[ "$key" == "ENTER" ]] && echo "Confirmed!" && break; done

        5. Verify both keys detected reliably

        Success: ENTER and SPACE keys identified correctly in all contexts'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/terminal.sh
    - text: Verify ESC key detection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/terminal.sh

        2. Test ESC: key=$(read_key); echo "Key: $key" (press Esc, should output "ESC")

        3. Test arrow keys still work: key=$(read_key); echo "Key: $key" (press UP, should output "UP" not "ESC")

        4. Verify ESC timeout: ESC key should be detected within 100ms without waiting for second char

        5. Test in cancel flow: while true; do key=$(read_key); [[ "$key" == "ESC" ]] && echo "Cancelled" && break; done

        Success: ESC key detected correctly and distinguished from arrow key escape sequences'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/terminal.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_tui:
    name: TUI Library (lib/tui.sh)
    description: Terminal UI framework - menus, checkboxes, forms
    files:
    - lib/tui.sh
    checklist:
    - text: Test menu display and navigation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source libraries: source lib/terminal.sh lib/checkbox.sh lib/tui.sh

        2. Run install in TUI mode: pl install d testsite

        3. Navigate with UP/DOWN arrow keys through environment tabs (DEV/STG/LIVE/PROD)

        4. Verify cursor indicator (▸) moves correctly

        5. Test LEFT/RIGHT to switch environment tabs

        6. Verify menu redraws without flicker or artifacts

        Success: Smooth navigation, clear visual indicators, no screen tearing'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/tui.sh
      - docs/reference/api/tui-api.md
    - text: Verify checkbox selection works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source libraries and run: pl install d testsite

        2. Navigate to an option with UP/DOWN keys

        3. Press SPACE to toggle selection

        4. Verify checkbox changes: [ ] to [✓] (or [+] in install mode)

        5. Test ''a'' key to select all, verify all checkboxes marked

        6. Test ''n'' key to select none, verify all checkboxes cleared

        Success: Checkboxes toggle correctly, bulk operations work, visual feedback immediate'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/tui.sh
      - docs/reference/api/tui-api.md
      - docs/reference/api/checkbox-api.md
    - text: Test form input fields
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl install d testsite

        2. Navigate to option requiring input (e.g., "SSL Certificate")

        3. Select it with SPACE, verify prompts for domain input

        4. Enter test value: "example.com"

        5. Press ''e'' key on selected option to edit value

        6. Verify value displayed and editable

        Success: Input prompts appear, values stored, editing works, cursor shows during input'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/tui.sh
      - docs/reference/api/tui-api.md
    - text: Check color rendering in different terminals
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test in default terminal: pl install d testsite

        2. Verify colors: GREEN for selected [✓], YELLOW for [+], RED for [x], CYAN for cursor (▸)

        3. Set NO_COLOR=1 and rerun: NO_COLOR=1 pl install d testsite

        4. Verify no color codes, plain brackets and symbols only

        5. Test in xterm, gnome-terminal, and SSH session

        6. Verify colors consistent across terminals or gracefully disabled

        Success: Colors display correctly, NO_COLOR respected, no broken escape sequences'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/tui.sh
      - docs/reference/api/tui-api.md
    - text: Verify keyboard shortcuts work correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run: pl install d testsite in TUI mode

        2. Test ''a'' key - verify selects all applicable options for current environment

        3. Test ''n'' key - verify deselects all options

        4. Test ''e'' key - verify opens input editor for selected option

        5. Test ''d'' key - verify shows documentation/details panel

        6. Test ''q'' key - verify quits/cancels with confirmation

        7. Test ENTER - verify confirms and proceeds

        Success: All shortcuts work immediately, no key repeats, correct actions triggered'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/tui.sh
      - docs/reference/api/tui-api.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_checkbox:
    name: Checkbox Library (lib/checkbox.sh)
    description: Advanced interactive checkbox selection
    files:
    - lib/checkbox.sh
    checklist:
    - text: Test checkbox display with multiple items
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source libraries: source lib/checkbox.sh lib/ui.sh

        2. Define test options: define_drupal_options

        3. Run interactive selector: interactive_select_options "dev" "drupal" ""

        4. Verify all option groups displayed (DEV/STAGE/LIVE/PROD sections)

        5. Check formatting: checkbox [✓]/[ ], label, description all aligned

        6. Test with 20+ items, verify scrolling/pagination if needed

        Success: All items display correctly, no text overflow, proper grouping by environment'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/checkbox.sh
      - docs/reference/api/checkbox-api.md
    - text: Verify space bar toggles selection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source libraries and run: source lib/checkbox.sh lib/ui.sh; interactive_select_options "dev" "drupal" ""

        2. Navigate to an unchecked item [ ]

        3. Press SPACE, verify changes to [✓]

        4. Press SPACE again, verify changes back to [ ]

        5. Test rapid toggling: SPACE SPACE SPACE, verify stable state

        6. Test on items with dependencies, verify dependency prompts

        Success: Toggle works immediately, state consistent, visual update immediate'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/checkbox.sh
      - docs/reference/api/checkbox-api.md
    - text: Check arrow key navigation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run interactive selector: source lib/checkbox.sh lib/ui.sh; interactive_select_options "dev" "drupal" ""

        2. Press DOWN arrow multiple times, verify cursor (▸) moves down item by item

        3. Press UP arrow, verify cursor moves up

        4. Test at boundaries: UP at top item (should stay), DOWN at bottom (should stay)

        5. Test rapid navigation: hold DOWN for 2 seconds

        6. Verify cursor position indicator always visible

        Success: Navigation smooth, no skipped items, boundaries handled correctly'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/checkbox.sh
      - docs/reference/api/checkbox-api.md
    - text: Test Enter to confirm selection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run selector: source lib/checkbox.sh lib/ui.sh; interactive_select_options "dev" "drupal" ""

        2. Select 3-4 options with SPACE

        3. Press ENTER to confirm

        4. Verify function returns 0 (success)

        5. Check OPTION_SELECTED array populated correctly

        6. Run generate_options_yaml to verify YAML output contains selected items

        Success: ENTER confirms and exits, selections preserved, return code correct'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/checkbox.sh
      - docs/reference/api/checkbox-api.md
    - text: Verify Escape to cancel
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Run selector: source lib/checkbox.sh lib/ui.sh; interactive_select_options "dev" "drupal" ""

        2. Select some options with SPACE

        3. Press ESC key

        4. Verify function returns 1 (cancelled)

        5. Verify no changes made to configuration

        6. Test ''q'' key as alternative cancel method

        Success: ESC/q cancel operation, return code 1, no side effects, clean exit'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/checkbox.sh
      - docs/reference/api/checkbox-api.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_yaml_write:
    name: YAML Write Library (lib/yaml-write.sh)
    description: YAML file manipulation without yq
    files:
    - lib/yaml-write.sh
    checklist:
    - text: Test reading YAML values
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/yaml-write.sh

        2. Test yaml_get function: yaml_get "cnwp.yml" "sites.avc.recipe"

        3. Verify returns correct value from YAML file

        4. Test with nested keys: yaml_get "cnwp.yml" "sites.avc.live.domain"

        5. Test with non-existent keys returns empty

        Success: YAML reading works with nested keys, handles missing values

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/yaml-write.sh
    - text: Test writing/updating YAML values
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/yaml-write.sh

        2. Create test YAML: echo "test:\n  value: old" > /tmp/test.yml

        3. Update value: yaml_set "/tmp/test.yml" "test.value" "new"

        4. Verify: yaml_get "/tmp/test.yml" "test.value" (should return "new")

        5. Test creating new keys: yaml_set "/tmp/test.yml" "test.newkey" "value"

        Success: YAML writing updates existing values and creates new keys

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/yaml-write.sh
    - text: Verify nested value handling
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/yaml-write.sh

        2. Test deep nesting: yaml_set "test.yml" "sites.mysite.live.server.port" "443"

        3. Verify path is created correctly with proper indentation

        4. Read back: yaml_get "test.yml" "sites.mysite.live.server.port"

        5. Verify nested structure maintained

        Success: Deep nested paths created and read correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/yaml-write.sh
    - text: Check array handling
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/yaml-write.sh

        2. Test array writing: yaml_set_array "test.yml" "items" "item1" "item2" "item3"

        3. Verify array format: grep -A 3 "items:" test.yml

        4. Should show: items:\n  - item1\n  - item2\n  - item3

        5. Test reading arrays back

        Success: Arrays written in proper YAML list format

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/yaml-write.sh
    - text: Test with special characters in values
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/yaml-write.sh

        2. Test with colon: yaml_set "test.yml" "url" "http://example.com:8080"

        3. Test with quotes: yaml_set "test.yml" "text" "This is \"quoted\""

        4. Test with hash: yaml_set "test.yml" "id" "#abc123"

        5. Verify values are properly escaped/quoted in YAML

        6. Read back and verify integrity

        Success: Special YAML characters handled correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/yaml-write.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_common:
    name: Common Library (lib/common.sh)
    description: Common utilities - validation, secrets, prompts
    files:
    - lib/common.sh
    checklist:
    - text: Test get_secret() reads from .secrets.yml
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/common.sh

        2. Ensure .secrets.yml exists with test values

        3. Test reading a secret: get_secret "linode.api_token"

        4. Verify returns the correct value from .secrets.yml

        5. Test with nested keys: get_secret "cloudflare.zones.example.com"

        6. Test with non-existent key returns empty or default

        Success: Function reads YAML values correctly and handles missing keys gracefully

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/common.sh
      - .secrets.example.yml
    - text: Test get_setting() reads from cnwp.yml
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/common.sh

        2. Ensure cnwp.yml exists with test site entries

        3. Test reading a setting: get_setting "avc" "recipe"

        4. Verify returns correct value from cnwp.yml

        5. Test nested settings: get_setting "avc" "live.domain"

        6. Test with non-existent site/key returns empty

        Success: Function reads site configuration correctly from cnwp.yml

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/common.sh
      - example.cnwp.yml
    - text: Verify sitename validation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/common.sh lib/ui.sh

        2. Test valid names: validate_sitename "mysite" && echo "Valid"

        3. Test invalid patterns: validate_sitename "../etc" (should fail)

        4. Test path traversal: validate_sitename "../../root" (should fail)

        5. Test special chars: validate_sitename "site@#$" (should fail)

        6. Test absolute paths: validate_sitename "/etc/passwd" (should fail)

        7. Verify returns 0 for valid, 1 for invalid with error message

        Success: Blocks dangerous patterns (path traversal, absolute paths, special chars)

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/common.sh
      - docs/DATA_SECURITY_BEST_PRACTICES.md
    - text: Check prompt functions work correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/common.sh lib/ui.sh

        2. Test yes/no prompt: echo "y" | ask_yes_no "Test question?" "n"

        3. Verify returns 0 for yes, 1 for no

        4. Test default values: echo "" | ask_yes_no "Test?" "y" (should default to yes)

        5. Test case insensitivity: echo "YES" | ask_yes_no "Test?" "n"

        Success: Prompts work correctly, handle defaults, case-insensitive input

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/common.sh
    - text: Test path handling utilities
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/common.sh

        2. Test get_project_root: project_root=$(get_project_root); echo "$project_root"

        3. Verify returns absolute path to NWP project root

        4. Test get_site_dir: site_dir=$(get_site_dir "avc"); echo "$site_dir"

        5. Verify returns absolute path to site directory

        6. Test path normalization functions handle symlinks and relative paths

        Success: Path utilities return correct absolute paths, handle edge cases

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/common.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_ui:
    name: UI Library (lib/ui.sh)
    description: Basic UI utilities - colors, status messages
    files:
    - lib/ui.sh
    checklist:
    - text: Test print_status with OK, WARN, FAIL, INFO
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/ui.sh

        2. Test OK status: print_status "OK" "Test passed"

        3. Test WARN status: print_status "WARN" "Warning message"

        4. Test FAIL status: print_status "FAIL" "Error occurred"

        5. Test INFO status: print_status "INFO" "Information message"

        6. Verify output includes correct icon/color for each status

        Success: Each status type displays with appropriate icon (✓, !, ✗, i) and color

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/ui.sh
    - text: Verify colors display correctly
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/ui.sh

        2. Test color variables exist: echo "${RED}Red${NC} ${GREEN}Green${NC} ${BLUE}Blue${NC}"

        3. Verify colors render in terminal (should see colors)

        4. Test NO_COLOR environment: NO_COLOR=1 source lib/ui.sh

        5. Verify colors are disabled when NO_COLOR is set

        6. Test non-TTY behavior: source lib/ui.sh | cat (colors should be disabled)

        Success: Colors work in TTY, respect NO_COLOR standard, disabled in pipes

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/ui.sh
    - text: Check print_header formatting
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/ui.sh

        2. Test header: print_header "Test Header"

        3. Verify output includes top and bottom borders (═══)

        4. Check text is centered and properly formatted

        5. Verify uses BLUE and BOLD colors when TTY available

        Success: Header displays with borders, proper formatting, and styling

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/ui.sh
    - text: Test print_error output
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/ui.sh

        2. Test error output: print_error "This is an error" 2>&1

        3. Verify output goes to stderr (not stdout)

        4. Check format: "ERROR: This is an error" in red/bold

        5. Test piping: print_error "Test" 2>&1 | grep "ERROR"

        Success: Errors output to stderr with proper formatting and color

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/ui.sh
    - text: Verify ocmsg debug output
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/common.sh lib/ui.sh

        2. Test without DEBUG: ocmsg "Debug message" (should not display)

        3. Test with DEBUG: DEBUG=true ocmsg "Debug message" (should display)

        4. Verify output format: "[DEBUG] Debug message" in cyan

        5. Test debug_msg alias: DEBUG=true debug_msg "Test"

        Success: Debug messages only display when DEBUG=true, proper formatting

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/ui.sh
      - lib/common.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_git:
    name: Git Library (lib/git.sh)
    description: Git backup, bundling, GitLab API operations
    files:
    - lib/git.sh
    checklist:
    - text: Test git backup creation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test site: mkdir -p /tmp/test-git-backup/testsite

        2. Initialize and add content: cd /tmp/test-git-backup/testsite && git init && echo "test" > README.md

        3. Source library: source lib/git.sh lib/ui.sh lib/common.sh

        4. Run backup: git_backup "/tmp/test-git-backup/testsite" "testsite" "site" "Test backup"

        5. Verify .git repo exists, commit created, .gitignore present

        6. Check remote configured: cd /tmp/test-git-backup/testsite && git remote -v

        Success: Git repository initialized, changes committed, .gitignore created for site type

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/git.sh
      - docs/deployment/git-backup-recommendations.md
    - text: Verify git bundle creation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test repo: git init /tmp/test-bundle && cd /tmp/test-bundle

        2. Add commits: echo "test" > file.txt && git add . && git commit -m "Initial"

        3. Source library: source lib/git.sh lib/ui.sh

        4. Create full bundle: git_bundle_full "/tmp/test-bundle" "/tmp/test.bundle"

        5. Verify bundle: git_bundle_verify "/tmp/test.bundle"

        6. List contents: git_bundle_list "/tmp/test.bundle"

        7. Test incremental: git_bundle_incremental "/tmp/test-bundle" "/tmp/test-incr.bundle"

        Success: Both full and incremental bundles created, verified, tags created

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/git.sh
    - text: Test GitLab API project creation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Ensure .secrets.yml has gitlab.api_token configured

        2. Source library: source lib/git.sh lib/ui.sh lib/common.sh

        3. Test project creation: gitlab_api_create_project "test-project-$(date +%s)" "nwp" "Test project"

        4. Verify project created: gitlab_api_list_projects "nwp" | grep test-project

        5. Test duplicate handling: run create again, should report "already exists"

        6. Cleanup: gitlab_api_delete_project "test-project-*" "nwp"

        Success: Project created via API, duplicate detection works, cleanup successful

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/git.sh
      - docs/guides/developer-workflow.md
    - text: Check git push to remote
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Setup test repo: git init /tmp/test-push && cd /tmp/test-push

        2. Create test project: source lib/git.sh && gitlab_api_create_project "test-push-$(date +%s)" "nwp"

        3. Setup remote: git_setup_remote "/tmp/test-push" "test-push-*" "nwp"

        4. Create content: echo "test" > README.md && git add . && git commit -m "Test"

        5. Test push: git_push "/tmp/test-push" "main" "test-push-*" "nwp"

        6. Verify on GitLab: check project has commit

        Success: Remote configured, push successful, commit visible in GitLab

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/git.sh
    - text: Verify incremental backup handling
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test backup dir: mkdir -p /tmp/test-incremental

        2. Source library: source lib/git.sh lib/ui.sh lib/common.sh

        3. First backup: git_backup "/tmp/test-incremental" "testsite" "db" "Initial backup"

        4. Add new content: echo "new data" > /tmp/test-incremental/data.sql

        5. Second backup: git_backup "/tmp/test-incremental" "testsite" "db" "Second backup"

        6. Verify: cd /tmp/test-incremental && git log --oneline (should show 2 commits)

        7. Test bundle incremental: git_bundle_incremental "/tmp/test-incremental" "/tmp/incr.bundle"

        Success: Multiple commits tracked, incremental bundle contains only new changes

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/git.sh
      - docs/deployment/git-backup-recommendations.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_cloudflare:
    name: Cloudflare Library (lib/cloudflare.sh)
    description: Cloudflare DNS and SSL management
    files:
    - lib/cloudflare.sh
    checklist:
    - text: Test DNS record creation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source libraries: source lib/cloudflare.sh lib/yaml-write.sh

        2. Get credentials: TOKEN=$(get_cloudflare_token ".") ZONE_ID=$(get_cloudflare_zone_id ".")

        3. Verify auth: verify_cloudflare_auth "$TOKEN" "$ZONE_ID"

        4. Create test A record: cf_create_dns_a "$TOKEN" "$ZONE_ID" "test-$(date +%s)" "192.0.2.1" "false"

        5. Verify record ID returned

        6. List records: cf_list_dns_records "$TOKEN" "$ZONE_ID" "A" | grep test

        Success: DNS A record created successfully, appears in listing

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cloudflare.sh
    - text: Verify DNS record lookup
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. After creating test record: RECORD_ID=$(cf_get_dns_record_id "$TOKEN" "$ZONE_ID" "test-example" "A")

        2. Verify returns record ID for existing record

        3. Test non-existent: cf_get_dns_record_id "$TOKEN" "$ZONE_ID" "nonexistent-$(date +%s)" "A"

        4. Verify returns empty for non-existent record

        Success: Correctly retrieves existing records, returns empty for missing

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cloudflare.sh
    - text: Check zone ID resolution
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Get zone ID: ZONE_ID=$(get_cloudflare_zone_id ".")

        2. Verify returns valid zone ID format (hex string)

        3. Get zone details: cf_get_zone "$TOKEN" "$ZONE_ID"

        4. Verify returns JSON with zone information

        5. Check zone name matches expected domain

        Success: Zone ID correctly retrieved and validated

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cloudflare.sh
    - text: Test API authentication
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test with valid token: TOKEN=$(get_cloudflare_token ".") ZONE_ID=$(get_cloudflare_zone_id ".")

        2. Verify: verify_cloudflare_auth "$TOKEN" "$ZONE_ID"

        3. Verify returns 0 and shows authenticated zone name

        4. Test with invalid token: verify_cloudflare_auth "invalid" "$ZONE_ID"

        5. Verify returns 1 and shows error message

        Success: Auth succeeds with valid credentials, fails gracefully with invalid

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cloudflare.sh
    - text: Verify error handling for API failures
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test with invalid zone: cf_create_dns_a "$TOKEN" "invalid-zone" "test" "192.0.2.1"

        2. Verify returns 1 and displays error message

        3. Test rate limiting: Loop create_dns_a rapidly (mock rate limit)

        4. Verify handles API errors gracefully without crashes

        5. Check error messages are actionable

        Success: All API errors handled gracefully with clear error messages

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/cloudflare.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_linode:
    name: Linode Library (lib/linode.sh)
    description: Linode API operations and provisioning
    files:
    - lib/linode.sh
    checklist:
    - text: Test Linode instance creation (use test mode)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source libraries: source lib/linode.sh lib/ui.sh

        2. Get token: TOKEN=$(get_linode_token ".")

        3. Read SSH key: SSH_KEY=$(cat ~/.ssh/nwp.pub)

        4. Create test instance: INSTANCE_ID=$(create_linode_instance "$TOKEN" "nwp-test-$(date +%s)" "$SSH_KEY" "us-east" "g6-nanode-1")

        5. Verify instance ID returned

        6. Check instance exists: linode-cli linodes view $INSTANCE_ID

        Success: Instance created and appears in Linode account

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/linode.sh
    - text: Verify instance listing
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. List test instances: list_test_linodes "$TOKEN"

        2. Verify shows instances with "nwp-test" prefix

        3. Check format: "INSTANCE_ID LABEL" pairs

        4. Verify only test instances listed (not production)

        Success: Lists all nwp-test instances with correct format

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/linode.sh
    - text: Check API token authentication
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test with valid token: TOKEN=$(get_linode_token ".")

        2. Verify auth: linode-cli account view (using token)

        3. Should return account information

        4. Test with invalid: export LINODE_API_TOKEN="invalid"

        5. Verify fails with clear "Invalid Token" error

        Success: Auth works with valid token, fails clearly with invalid

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/linode.sh
    - text: Test instance deletion
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test instance first (see create test)

        2. Delete: delete_linode_instance "$TOKEN" "$INSTANCE_ID"

        3. Verify returns 0

        4. Confirm deletion: linode-cli linodes view $INSTANCE_ID (should fail)

        5. Test cleanup: cleanup_test_linodes "$TOKEN"

        Success: Instance deleted successfully, cleanup removes all test instances

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/linode.sh
    - text: Verify error handling
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test invalid instance ID: delete_linode_instance "$TOKEN" "99999999"

        2. Verify returns 1 with error message

        3. Test network failure (disconnect): create_linode_instance (should timeout)

        4. Verify error messages are actionable

        5. Check functions don''t crash on API errors

        Success: All error conditions handled gracefully with clear messages

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/linode.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_b2:
    name: B2 Library (lib/b2.sh)
    description: Backblaze B2 cloud storage integration
    files:
    - lib/b2.sh
    checklist:
    - text: Test B2 authentication
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/b2.sh lib/yaml-write.sh

        2. Get credentials: ACCOUNT_ID=$(get_b2_account_id ".") APP_KEY=$(get_b2_app_key ".")

        3. Authorize: b2_authorize "."

        4. Verify auth: b2_check_auth

        5. Verify returns 0 when authenticated

        6. Check account: b2 account get (should show account info)

        Success: B2 authenticates successfully with credentials from .secrets.yml

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/b2.sh
    - text: Verify file upload to B2
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test file: echo "test content" > /tmp/b2-test-$(date +%s).txt

        2. Ensure bucket exists: BUCKET="nwp-test-bucket"

        3. Upload: b2_upload_file "$BUCKET" "/tmp/b2-test-*.txt" "test-upload.txt"

        4. Verify returns 0

        5. List files: b2_list_files "$BUCKET" | grep test-upload.txt

        Success: File uploaded successfully and appears in bucket listing

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/b2.sh
    - text: Test file download from B2
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. After uploading test file

        2. Download: b2 file download "$BUCKET" "test-upload.txt" "/tmp/download-test.txt"

        3. Verify file downloaded: test -f "/tmp/download-test.txt"

        4. Compare content: diff /tmp/b2-test-*.txt /tmp/download-test.txt

        5. Verify files are identical

        Success: File downloaded successfully, content matches uploaded file

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/b2.sh
    - text: Check bucket listing
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. List all buckets: b2_list_buckets

        2. Verify shows existing buckets

        3. Get specific bucket ID: b2_get_bucket_id "nwp-test-bucket"

        4. Verify returns valid bucket ID

        5. Get bucket info: b2_get_bucket_info "nwp-test-bucket"

        Success: Bucket listing and lookup functions work correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/b2.sh
    - text: Verify error handling for API failures
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test with non-existent bucket: b2_upload_file "nonexistent-bucket-$(date +%s)" "/tmp/test.txt" "file.txt"

        2. Verify returns 1 with error message

        3. Test without auth: b2_check_auth after clearing credentials

        4. Verify error message suggests running b2 account authorize

        5. Check all API errors are caught and reported clearly

        Success: All B2 API errors handled gracefully with actionable messages

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/b2.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_remote:
    name: Remote Library (lib/remote.sh)
    description: Remote server operations
    files:
    - lib/remote.sh
    checklist:
    - text: Test SSH connection to remote server
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/remote.sh lib/ssh.sh lib/ui.sh

        2. Set up test target: configure remote server in cnwp.yml

        3. Test connection: remote_test "sitename" "prod"

        4. Verify returns 0 and shows "Connection OK"

        5. Check uses proper SSH security options from lib/ssh.sh

        Success: SSH connection established with secure defaults

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/remote.sh
      - lib/ssh.sh
    - text: Verify file transfer via rsync
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Create test file: echo "test" > /tmp/transfer-test.txt

        2. Use remote_exec with rsync command to transfer file

        3. Verify file appears on remote server

        4. Check file permissions preserved

        5. Test large file transfer (> 100MB)

        Success: Files transfer correctly with rsync, preserving permissions

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/remote.sh
    - text: Check remote command execution
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Execute simple command: remote_exec "sitename" "prod" "echo ''hello''"

        2. Verify output shows "hello"

        3. Test command with exit code: remote_exec "sitename" "prod" "exit 42"

        4. Verify returns 42

        5. Test drush command: remote_drush "sitename" "prod" "status"

        Success: Remote commands execute correctly, return proper exit codes

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/remote.sh
    - text: Test connection timeout handling
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set short timeout in SSH options

        2. Test with unreachable host: remote_exec "sitename" "unreachable" "echo test"

        3. Verify times out within expected period (10 seconds)

        4. Check displays timeout error message

        5. Verify doesn''t hang indefinitely

        Success: Connection timeouts work correctly, no indefinite hangs

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/remote.sh
    - text: Verify error handling for failed connections
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test with missing config: remote_exec "nonexistent" "prod" "echo test"

        2. Verify returns 1 with "No configuration found" error

        3. Test with wrong SSH key: remote_exec with invalid key

        4. Verify shows permission denied error

        5. Check all errors are actionable

        Success: Connection failures report clear, actionable error messages

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/remote.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_badges:
    name: Badges Library (lib/badges.sh)
    description: Status badge generation
    files:
    - lib/badges.sh
    checklist:
    - text: Test badge generation for passing status
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/badges.sh

        2. Generate badge URL: generate_badge_url "test-project" "sites" "pipeline" "main"

        3. Verify URL format matches: https://git.DOMAIN/sites/test-project/badges/main/pipeline.svg

        4. Test coverage badge: generate_badge_url "test-project" "sites" "coverage"

        5. Generate full README badges: generate_readme_badges "test-project" "sites"

        6. Check output contains both pipeline and coverage badges in markdown format

        Success: Badge URLs generated with correct format and contain SVG extension

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/badges.sh
    - text: Verify badge generation for failing status
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set up test project with failing pipeline

        2. Generate badge URL: generate_badge_url "failing-project" "sites" "pipeline"

        3. Access badge SVG URL in browser or curl

        4. Badge should show "failed" or red color status

        5. Test with different badge types (pipeline, coverage, release)

        Success: Badges reflect actual GitLab pipeline/coverage status

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/badges.sh
    - text: Check badge output format (SVG or URL)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Generate badge URLs: generate_badge_urls "mysite" "sites" "main"

        2. Verify output includes all badge types: Pipeline, Coverage, Release

        3. Check markdown format includes: [![Badge](url)](link)

        4. Verify SVG URL paths are correct

        5. Test add_badges_to_readme function: add_badges_to_readme "README.md" "mysite" "sites"

        6. Check badges were inserted after first heading

        Success: All badge URLs are valid SVG paths with proper markdown formatting

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/badges.sh
      - docs/reference/gitlab/badges.md
    - text: Test badge color coding
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Check coverage threshold: check_coverage_threshold "80" "/path/to/coverage.xml"

        2. Create test coverage.xml with different percentages

        3. Verify threshold checking: values >= 80 return 0, < 80 return 1

        4. Test badge URL generation with update_readme_badges function

        5. Verify badges update correctly when branch changes

        Success: Coverage threshold logic works, badge colors reflect pass/fail status

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/badges.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_state:
    name: State Library (lib/state.sh)
    description: Deployment state tracking and persistence
    files:
    - lib/state.sh
    checklist:
    - text: Test state initialization
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/state.sh lib/ui.sh

        2. Test site_exists function: site_exists "avc" && echo "Site exists"

        3. Verify returns 0 for existing sites with DDEV config

        4. Test with non-existent site: site_exists "nonexistent" || echo "Not found"

        5. Verify returns 1 for missing sites

        Success: State detection functions identify site existence correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/state.sh
    - text: Verify state saving between steps
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/state.sh lib/ui.sh

        2. Test find_recent_backup: backup=$(find_recent_backup "avc" 24)

        3. Verify returns path to recent backup within 24 hours

        4. Test with longer time window: find_recent_backup "avc" 168

        5. Verify function finds backups within specified hours

        Success: Backup state tracking finds recent backups correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/state.sh
    - text: Check state restoration on resume
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/state.sh lib/ui.sh

        2. Test site_running: site_running "avc" && echo "Site is running"

        3. Verify returns 0 if DDEV is running, 1 if not

        4. Start site: cd sites/avc && ddev start

        5. Test again: site_running "avc" && echo "Now running"

        Success: Runtime state detection accurately identifies running sites

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/state.sh
    - text: Test state cleanup on completion
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/state.sh lib/ui.sh

        2. Test backup_age_human: age=$(backup_age_human "sitebackups/avc/backup.sql.gz")

        3. Verify returns human-readable age string (e.g., "2 hours ago")

        4. Test with recent file: touch /tmp/test.sql.gz; backup_age_human "/tmp/test.sql.gz"

        5. Verify shows "seconds ago" or "minutes ago"

        Success: Age calculation provides human-readable time differences

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/state.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_database_router:
    name: Database Router Library (lib/database-router.sh)
    description: Multi-source database routing for deployments
    files:
    - lib/database-router.sh
    checklist:
    - text: Test auto source selection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source required libraries: source lib/database-router.sh lib/state.sh lib/ui.sh

        2. Test auto selection: download_database "avc" "auto"

        3. Verify intelligently selects best source (sanitized backup > recent backup > production > dev)

        4. Check priority order is followed

        5. Verify selection is logged with reason

        Success: Auto mode intelligently selects best available database source

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/database-router.sh
      - docs/reference/workflows/database-routing.md
    - text: Verify production database access
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/database-router.sh lib/state.sh lib/ui.sh

        2. Test production source: download_database "avc" "production"

        3. Verify connects via SSH to production server

        4. Check creates fresh database dump from production

        5. Verify handles SSH connection failures gracefully

        Success: Production database can be downloaded when SSH configured

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/database-router.sh
      - docs/reference/workflows/database-routing.md
    - text: Test backup database selection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/database-router.sh lib/state.sh lib/ui.sh

        2. Create test backup: mkdir -p sitebackups/test; touch sitebackups/test/backup.sql.gz

        3. Test backup source: download_database "test" "backup:sitebackups/test/backup.sql.gz"

        4. Verify uses specified backup file

        5. Test with relative and absolute paths

        Success: Backup source correctly uses specified backup files

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/database-router.sh
    - text: Check development database cloning
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/database-router.sh lib/state.sh lib/ui.sh

        2. Ensure source site exists and running: cd sites/avc && ddev start

        3. Test dev clone: download_database "avc" "development" "avc-stg"

        4. Verify clones database from dev site to target site

        5. Check target site receives copy of dev database

        Success: Development database successfully cloned to target site

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/database-router.sh
      - docs/reference/workflows/database-routing.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_testing:
    name: Testing Library (lib/testing.sh)
    description: Test orchestration and preset management
    files:
    - lib/testing.sh
    checklist:
    - text: Test quick preset execution
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/testing.sh lib/ui.sh

        2. Run quick preset: run_tests "avc" "quick"

        3. Verify only runs: phpcs, eslint (fast tests)

        4. Check execution time is under 2 minutes

        5. Verify test results are reported (passed/failed counts)

        Success: Quick preset runs fast linting tests only

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/testing.sh
      - docs/reference/workflows/testing.md
    - text: Verify essential preset
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/testing.sh lib/ui.sh

        2. Run essential preset: run_tests "avc" "essential"

        3. Verify runs: phpunit, phpstan, phpcs (core quality tests)

        4. Check all three test types execute

        5. Verify summary shows results for each test type

        Success: Essential preset runs core quality assurance tests

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/testing.sh
      - docs/reference/workflows/testing.md
    - text: Check full test suite preset
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/testing.sh lib/ui.sh

        2. Run full preset: run_tests "avc" "full"

        3. Verify runs all test types: phpunit, behat, phpstan, phpcs, eslint, stylelint, security

        4. Check estimated duration is displayed before starting

        5. Verify comprehensive summary at end with pass/fail counts

        Success: Full preset executes complete test suite with all test types

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/testing.sh
      - docs/reference/workflows/testing.md
    - text: Test custom test selection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: "1. Run: pl dev2stg -y -t phpunit,phpstan <sitename>\n2. Verify only specified tests run\n3. Success indicators:\n   - Only PHPUnit and PHPStan execute\n   - Other tests skipped\n   - Custom test combination works\n4. Check test output shows only selected tests\n"
      related_docs:
      - docs/reference/commands/dev2stg.md
      - docs/reference/commands/test.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_preflight:
    name: Preflight Library (lib/preflight.sh)
    description: Pre-deployment validation checks
    files:
    - lib/preflight.sh
    checklist:
    - text: Test site existence validation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/preflight.sh lib/state.sh lib/ui.sh

        2. Run check_source_site function: check_source_site "avc"

        3. Verify checks site directory exists

        4. Verify checks .ddev/config.yaml exists

        5. Test with non-existent site: check_source_site "nonexistent" (should fail)

        Success: Site validation correctly identifies existing/missing sites

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/preflight.sh
    - text: Verify DDEV status checks
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/preflight.sh lib/ui.sh

        2. Run check_ddev function: check_ddev

        3. Verify checks DDEV is installed

        4. Verify checks Docker is running

        5. Verify returns version information

        6. Test when Docker is stopped (should fail gracefully)

        Success: DDEV and Docker status validated correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/preflight.sh
    - text: Check git status validation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/preflight.sh lib/ui.sh

        2. Run check_git_status function: check_git_status "avc"

        3. Verify checks for uncommitted changes

        4. Make test change: cd sites/avc && echo "test" >> test.txt

        5. Run again: check_git_status "avc" (should warn about uncommitted files)

        Success: Git status check identifies uncommitted changes

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/preflight.sh
    - text: Test dependency verification
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/preflight.sh lib/ui.sh

        2. Run check_required_tools function: check_required_tools

        3. Verify checks for: ddev, docker, git, drush

        4. Verify checks for optional tools: rsync, ssh, mysql

        5. Verify returns 0 if all critical tools present

        Success: Required tool validation identifies missing dependencies

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/preflight.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_dev2stg_tui:
    name: Dev2Stg TUI Library (lib/dev2stg-tui.sh)
    description: Interactive TUI for dev2stg deployment options
    files:
    - lib/dev2stg-tui.sh
    checklist:
    - text: Test database source selection menu
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/dev2stg-tui.sh lib/ui.sh

        2. Set up test site: pl install d devsite

        3. Run TUI: load_tui_state "devsite"; run_dev2stg_tui "devsite"

        4. Press ''D'' to enter database selection menu

        5. Verify shows options: sanitized backup, recent backup, production, development

        6. Navigate with 1/2/3/4 keys and select one

        7. Verify TUI_DB_SOURCE variable set correctly

        Success: Database menu displays all available sources, selection updates TUI_DB_SOURCE'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/dev2stg-tui.sh
      - docs/reference/api/tui-api.md
    - text: Verify test preset selection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/dev2stg-tui.sh lib/ui.sh

        2. Run TUI: load_tui_state "devsite"; run_dev2stg_tui "devsite"

        3. Press ''T'' to enter test selection menu

        4. Verify presets shown: quick, essential, functional, full, security, skip

        5. Select preset ''2'' (essential)

        6. Verify TUI_TEST_SELECTION="essential"

        7. Test individual selection: press ''P'' for phpunit

        Success: Test menu shows all presets, individual tests, selection updates TUI_TEST_SELECTION'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/dev2stg-tui.sh
      - docs/reference/api/tui-api.md
    - text: Check navigation and confirmation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/dev2stg-tui.sh lib/ui.sh

        2. Run TUI: load_tui_state "devsite"; run_dev2stg_tui "devsite"

        3. Verify main screen shows: current state, proposed plan, options menu

        4. Test ''E'' to execute (should return 0 to proceed)

        5. Test ''P'' for preflight checks

        6. Test ''Q'' to quit (should return 1 to cancel)

        7. Verify navigation keys work in submenus (arrow keys, numbers)

        Success: All menu navigation works, E/P/Q keys function correctly, proper return codes'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/dev2stg-tui.sh
      - docs/reference/api/tui-api.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_safe_ops:
    name: Safe Operations Library (lib/safe-ops.sh)
    description: Proxy functions that return sanitized output without exposing secrets
    files:
    - lib/safe-ops.sh
    checklist:
    - text: Test safe_server_status returns sanitized data
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/safe-ops.sh

        2. Run: safe_server_status prod1

        3. Verify output includes: Status, Uptime, Load, Memory, Disk

        4. Verify output DOES NOT include: IP addresses, paths with user data, credentials

        5. Test with invalid server: safe_server_status nonexistent (should fail gracefully)

        Success: Server status returned without exposing sensitive information

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/safe-ops.sh
      - docs/DATA_SECURITY_BEST_PRACTICES.md
    - text: Verify safe_db_status hides credentials
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/safe-ops.sh

        2. Run: safe_db_status avc

        3. Verify output includes: Table count, Database size (MB), Last backup time

        4. Verify output DOES NOT include: Database passwords, connection strings, actual data

        5. Test with non-existent site: safe_db_status nonexistent (should fail gracefully)

        Success: Database info returned without credentials or user data

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/safe-ops.sh
      - docs/DATA_SECURITY_BEST_PRACTICES.md
    - text: Check safe_security_check sanitization
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/safe-ops.sh

        2. Run: safe_security_check avc

        3. Verify output includes: Update count, Security issues count

        4. Verify output DOES NOT include: Actual passwords, API tokens, database content

        5. Check error handling: safe_security_check nonexistent

        Success: Security status returned with counts only, no sensitive data

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/safe-ops.sh
      - docs/DATA_SECURITY_BEST_PRACTICES.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_sanitize:
    name: Sanitize Library (lib/sanitize.sh)
    description: Database sanitization for backups (basic and full modes)
    files:
    - lib/sanitize.sh
    checklist:
    - text: Test basic sanitization (emails only)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/sanitize.sh lib/ui.sh

        2. Create test SQL dump: ddev drush sql:dump --gzip > test.sql.gz

        3. Run basic sanitization: sanitize_sql_file "test.sql.gz" "basic"

        4. Import and check: gunzip -c test.sql.gz | grep "user.*@example.com"

        5. Verify user emails changed to user<uid>@example.com

        6. Verify sessions cleared

        Success: Basic sanitization anonymizes emails and clears sessions

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/sanitize.sh
      - docs/DATA_SECURITY_BEST_PRACTICES.md
    - text: Verify full sanitization (emails, passwords, sessions)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/sanitize.sh lib/ui.sh

        2. Create test database and run: sanitize_sql_file "test.sql.gz" "full"

        3. Verify emails sanitized: user<uid>@example.com

        4. Verify sessions truncated: SELECT COUNT(*) FROM sessions (should be 0)

        5. Verify watchdog cleared

        6. Verify cache tables truncated

        7. Verify webform submissions cleared

        Success: Full sanitization removes all PII and sensitive data

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/sanitize.sh
      - docs/DATA_SECURITY_BEST_PRACTICES.md
    - text: Check admin user preservation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/sanitize.sh lib/ui.sh

        2. Check sanitization SQL: echo "$SANITIZE_SQL_USERS"

        3. Verify WHERE clause: "WHERE uid > 1" (preserves uid 0 and 1)

        4. Run sanitization on test database

        5. Query admin: SELECT name, mail FROM users_field_data WHERE uid = 1

        6. Verify admin (uid 1) not affected

        Success: Admin user (uid 1) and anonymous (uid 0) preserved

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/sanitize.sh
      - docs/DATA_SECURITY_BEST_PRACTICES.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_import:
    name: Import Library (lib/import.sh)
    description: Site import functionality from remote sources
    files:
    - lib/import.sh
    checklist:
    - text: Test SSH connection and authentication
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/import.sh lib/ui.sh lib/common.sh

        2. Test SSH connection: ssh -i keys/test_key user@server "echo Connected"

        3. Verify key-based authentication works

        4. Test connection failure handling with invalid host

        5. Verify error messages for connection failures

        Success: SSH connections work with key authentication, failures handled gracefully

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/import.sh
      - docs/reference/workflows/import.md
    - text: Verify database download and import
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/import.sh lib/ui.sh

        2. Run import_step_pull_database: import_step_pull_database "test" "user@server" "keys/key" "/var/www/test"

        3. Verify database dump created remotely via drush

        4. Check db.sql.gz file downloaded to local site directory

        5. Verify file size is > 0 and properly gzipped

        Success: Database downloaded from remote server and saved locally

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/import.sh
      - docs/reference/workflows/import.md
    - text: Check file synchronization
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source the library: source lib/import.sh lib/ui.sh

        2. Test minimal sync: import_step_pull_files "test" "user@server" "keys/key" "/var/www/test" "web" "n"

        3. Verify only essential files synced (composer.json, config/, custom modules/themes)

        4. Test full sync: import_step_pull_files "test" "user@server" "keys/key" "/var/www/test" "web" "y"

        5. Verify all files synced including public files

        Success: File sync works in both minimal and full modes

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/import.sh
      - docs/reference/workflows/import.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_import_tui:
    name: Import TUI Library (lib/import-tui.sh)
    description: Interactive TUI for import operations
    files:
    - lib/import-tui.sh
    checklist:
    - text: Test server selection menu
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/import-tui.sh lib/ui.sh

        2. Ensure cnwp.yml has servers configured

        3. Run selector: select_server "cnwp.yml"

        4. Navigate with UP/DOWN arrows through server list

        5. Press ENTER to select a server

        6. Verify SELECTED_SERVER_NAME, SELECTED_SSH_HOST, SELECTED_SSH_KEY variables set

        7. Test custom option (manual entry)

        Success: Server list displays, navigation works, selection sets variables correctly'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/import-tui.sh
      - docs/reference/api/tui-api.md
    - text: Verify site selection interface
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/import-tui.sh lib/ui.sh

        2. Populate DISCOVERED_SITES with test data (or run actual scan)

        3. Run selector: select_sites_to_import

        4. Navigate with UP/DOWN through discovered sites

        5. Press SPACE to toggle selection ([ ] to [✓])

        6. Test ''a'' to select all, ''n'' to select none

        7. Press ENTER to confirm, verify SELECTED_SITES array populated

        Success: Site list displays with version/size info, multi-select works, selections tracked'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/import-tui.sh
      - docs/reference/api/tui-api.md
    - text: Check import option configuration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/import-tui.sh lib/ui.sh

        2. Run option config: configure_import_options "testsite"

        3. Verify shows options grouped: DATABASE, FILES, ENVIRONMENT

        4. Navigate with UP/DOWN, toggle with SPACE

        5. Test ''g'' key to apply options to all sites

        6. Verify conflicting options (stage_file_proxy vs full_file_sync) handled

        7. Press ENTER to confirm

        Success: Options display by category, toggle works, conflicts resolved, global apply works'
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/import-tui.sh
      - docs/reference/api/tui-api.md
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_server_scan:
    name: Server Scan Library (lib/server-scan.sh)
    description: Remote server scanning and site detection
    files:
    - lib/server-scan.sh
    checklist:
    - text: Test server connectivity check
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/server-scan.sh lib/ui.sh

        2. Test SSH connection: test_ssh_connection "root@server.ip" "~/.ssh/nwp"

        3. Verify returns 0 for successful connection

        4. Test with wrong key: test_ssh_connection "root@server.ip" "/nonexistent/key"

        5. Verify returns 1 with error message

        Success: Connectivity check correctly validates SSH access

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/server-scan.sh
    - text: Verify Drupal site detection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Scan remote server: scan_server_for_sites "root@server.ip" "~/.ssh/nwp"

        2. Verify returns JSON lines for each Drupal site

        3. Check detects Drupal 7, 8, 9, 10 sites

        4. Verify excludes vendor/core subdirectories

        5. Parse JSON: parse_site_json "$json_line" and verify variables set

        Success: Detects all Drupal sites, returns valid JSON, correct version detection

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/server-scan.sh
    - text: Check database discovery
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Analyze discovered site: analyze_remote_site "root@server.ip" "~/.ssh/nwp" "/var/www/site" "/var/www/site/web"

        2. Verify returns database size: grep "db_tables=" output

        3. Check module counts: grep "modules_enabled=" output

        4. Verify PHP version detected: grep "php_version=" output

        5. Test without Drush: should gracefully report limited info

        Success: Database and site metrics discovered when Drush available

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/server-scan.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_frontend:
    name: Frontend Library (lib/frontend.sh)
    description: Frontend build tool detection and management
    files:
    - lib/frontend.sh
    checklist:
    - text: Test Gulp detection and execution
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/frontend.sh lib/ui.sh

        2. Find theme with Gulp: THEME_DIR=$(find_theme_dir "opensocial-site")

        3. Detect tool: TOOL=$(detect_frontend_tool "$THEME_DIR")

        4. Verify returns "gulp" for themes with gulpfile.js

        5. Get watch command: get_watch_command "gulp" "$THEME_DIR"

        6. Verify returns "gulp watch" or npm script equivalent

        Success: Gulp detected correctly, proper commands generated

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/frontend.sh
    - text: Verify Grunt support
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Find theme with Grunt: THEME_DIR with Gruntfile.js

        2. Detect: TOOL=$(detect_frontend_tool "$THEME_DIR")

        3. Verify returns "grunt"

        4. Check build command: get_build_command "grunt" "$THEME_DIR"

        5. Verify returns "grunt" or custom script

        Success: Grunt detected and configured correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/frontend.sh
    - text: Check Webpack integration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Find theme with webpack.config.js

        2. Detect: TOOL=$(detect_frontend_tool "$THEME_DIR")

        3. Verify returns "webpack"

        4. Get commands: get_watch_command "webpack" "$THEME_DIR"

        5. Verify returns "npm run watch" or equivalent

        Success: Webpack detected, npm scripts identified correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/frontend.sh
    - text: Test Vite support
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Find theme with vite.config.js or vite.config.ts

        2. Detect: TOOL=$(detect_frontend_tool "$THEME_DIR")

        3. Verify returns "vite"

        4. Check commands: get_build_command "vite" "$THEME_DIR"

        5. Verify returns "npm run build" or "vite build"

        Success: Vite detected and configured with correct commands

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/frontend.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_avc_moodle:
    name: AVC-Moodle Integration Library (lib/avc-moodle.sh)
    description: Shared functions for AVC-Moodle SSO, role sync, and data display
    files:
    - lib/avc-moodle.sh
    checklist:
    - text: Test get_site_directory function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/avc-moodle.sh

        2. Test with existing site: SITE_DIR=$(get_site_directory "avc")

        3. Verify returns full path: echo "$SITE_DIR" (should show /home/.../sites/avc)

        4. Test non-existent: get_site_directory "nonexistent-site-$(date +%s)"

        5. Verify returns 1

        Success: Returns correct paths for existing sites, fails gracefully for missing

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/avc-moodle.sh
    - text: Verify get_site_recipe detection
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test AVC site: RECIPE=$(get_site_recipe "avc")

        2. Verify returns "avc" or "avc-dev"

        3. Test Moodle: RECIPE=$(get_site_recipe "moodle-site")

        4. Verify returns "m"

        5. Test detection from composer.json when cnwp.yml missing

        Success: Recipe detected from config or filesystem analysis

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/avc-moodle.sh
    - text: Test OAuth2 key generation helpers
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Generate OAuth2 keys (if functions exist in library)

        2. Verify key format is valid

        3. Check keys can be used for Moodle OAuth2 setup

        4. Test key regeneration doesn''t break existing configs

        Success: OAuth2 keys generated in correct format for Moodle integration

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/avc-moodle.sh
    - text: Verify role mapping functions
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test AVC site validation: avc_moodle_validate_avc_site "avc"

        2. Verify returns 0 for valid AVC site

        3. Test with wrong recipe: avc_moodle_validate_avc_site "plain-drupal"

        4. Verify returns 1 with error

        5. Check Moodle validation: avc_moodle_validate_moodle_site "moodle-site"

        Success: Validation correctly identifies AVC and Moodle sites

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/avc-moodle.sh
    - text: Test cohort synchronization functions
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library and test site validation

        2. Run any cohort sync functions (if implemented)

        3. Verify data structures match expected format

        4. Test error handling for invalid site combinations

        Success: Cohort functions validate sites and handle errors gracefully

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/avc-moodle.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_podcast:
    name: Podcast Library (lib/podcast.sh)
    description: High-level functions for Castopod podcast hosting infrastructure
    files:
    - lib/podcast.sh
    checklist:
    - text: Test generate_password function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/podcast.sh

        2. Generate password: PASS=$(generate_password 24)

        3. Verify length: echo ${#PASS} (should be 24)

        4. Check charset: echo "$PASS" | grep -E ''^[A-Za-z0-9]+$''

        5. Generate multiple: for i in {1..10}; do generate_password; done (should be unique)

        Success: Passwords generated with correct length, safe characters, unique

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/podcast.sh
    - text: Verify generate_castopod_env function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Generate env: ENV=$(generate_castopod_env "podcast.example.com" "dbpass123" "keyid" "appkey" "bucket-name" "us-west-004")

        2. Verify contains CP_BASEURL: echo "$ENV" | grep "CP_BASEURL="

        3. Check database settings: echo "$ENV" | grep "CP_DATABASE_PASSWORD=dbpass123"

        4. Verify B2 config: echo "$ENV" | grep "CP_MEDIA_S3_BUCKET=bucket-name"

        Success: Environment file generated with all required Castopod variables

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/podcast.sh
    - text: Test Linode orchestration helpers
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test provisions Linode for podcast hosting

        2. Verify calls create_linode_instance from lib/linode.sh

        3. Check waits for instance to be ready

        4. Verify returns instance info

        Success: Orchestration functions coordinate Linode provisioning correctly

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/podcast.sh
      - lib/linode.sh
    - text: Verify Cloudflare DNS configuration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test DNS setup calls cf_create_dns_a or cf_upsert_dns_a

        2. Verify creates A record for podcast domain

        3. Check creates media subdomain if using B2

        4. Verify DNS propagation wait logic

        Success: DNS configured correctly for podcast and media domains

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/podcast.sh
      - lib/cloudflare.sh
    - text: Test B2 storage configuration
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Test B2 bucket creation for podcast

        2. Verify calls b2_create_bucket with correct settings

        3. Check creates application key with proper permissions

        4. Verify generates correct S3-compatible endpoint URL

        Success: B2 storage configured for Castopod media files

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/podcast.sh
      - lib/b2.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  lib_ssh:
    name: SSH Library (lib/ssh.sh)
    description: SSH connection helpers with security controls
    files:
    - lib/ssh.sh
    checklist:
    - text: Test get_ssh_host_key_checking function
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Source library: source lib/ssh.sh

        2. Test default mode: MODE=$(get_ssh_host_key_checking); echo "$MODE"

        3. Verify returns "accept-new" by default

        4. Test strict mode: NWP_SSH_STRICT=1 MODE=$(get_ssh_host_key_checking); echo "$MODE"

        5. Verify returns "yes" in strict mode

        Success: Returns correct host key checking mode based on NWP_SSH_STRICT

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/ssh.sh
      - docs/SECURITY.md
    - text: Verify show_ssh_security_warning output
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Show warning: show_ssh_security_warning

        2. Verify displays warning about accept-new mode

        3. Verify mentions MITM vulnerability

        4. Check suggests NWP_SSH_STRICT=1 for strict mode

        5. Test with strict: NWP_SSH_STRICT=1 show_ssh_security_warning (should be silent)

        Success: Warning displayed in default mode, suppressed in strict mode

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/ssh.sh
      - docs/SECURITY.md
    - text: Test get_ssh_options array generation
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Get options: get_ssh_options

        2. Verify includes "-o" "StrictHostKeyChecking=accept-new"

        3. Verify includes "-o" "ConnectTimeout=10"

        4. Test in strict mode: NWP_SSH_STRICT=1 get_ssh_options

        5. Verify uses "yes" instead of "accept-new"

        Success: SSH options array generated correctly for both modes

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/ssh.sh
    - text: Verify NWP_SSH_STRICT=1 strict mode
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Set strict mode: export NWP_SSH_STRICT=1

        2. Check mode: is_ssh_strict_mode && echo "Strict" || echo "Relaxed"

        3. Verify returns 0 (true)

        4. Build SSH command: build_ssh_command

        5. Verify includes "StrictHostKeyChecking=yes"

        Success: Strict mode enforces known_hosts verification

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/ssh.sh
      - docs/SECURITY.md
    - text: Test accept-new mode (default)
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Unset strict: unset NWP_SSH_STRICT

        2. Check mode: is_ssh_strict_mode && echo "Strict" || echo "Relaxed"

        3. Verify returns 1 (false)

        4. Build SSH command: build_ssh_command

        5. Verify includes "StrictHostKeyChecking=accept-new"

        Success: Default mode accepts new hosts, verifies known hosts

        '
      related_docs:
      - docs/reference/api/library-functions.md
      - lib/ssh.sh
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  config_example:
    name: Example Configuration (example.cnwp.yml)
    description: Complete configuration template
    files:
    - example.cnwp.yml
    checklist:
    - text: Verify all recipe options are documented
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Open: example.cnwp.yml

        2. Check recipes section contains: os, d, nwp, dm, avc, m, gitlab, pod

        3. Verify each recipe has all available options listed

        4. Compare with recipe files in recipes/ directory

        5. Check for any new options in recipes not in example

        Success: All recipe options documented, matches current recipe implementations

        '
      related_docs:
      - example.cnwp.yml
    - text: Check default values are sensible
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Review example.cnwp.yml default values

        2. Check php_version defaults to supported version (8.1+)

        3. Verify composer_version is stable (2.x)

        4. Check database defaults are reasonable (mysql 8.0)

        5. Verify paths use correct conventions

        6. Check boolean flags have safe defaults

        Success: All defaults are sensible, secure, and follow best practices

        '
      related_docs:
      - example.cnwp.yml
    - text: Test copying to cnwp.yml works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Backup existing cnwp.yml: cp cnwp.yml cnwp.yml.bak

        2. Copy example: cp example.cnwp.yml cnwp.yml

        3. Edit cnwp.yml with a test site

        4. Run: pl install d testsite

        5. Verify installation reads from cnwp.yml successfully

        6. Restore: mv cnwp.yml.bak cnwp.yml

        Success: example.cnwp.yml can be copied and used as working configuration

        '
      related_docs:
      - example.cnwp.yml
    - text: Verify comments explain each option
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Open: example.cnwp.yml

        2. Check each option has inline or above-line comment

        3. Verify comments explain purpose and acceptable values

        4. Check for examples in comments where helpful

        5. Verify complex options have multi-line explanations

        Success: All options clearly documented, comments explain purpose and usage

        '
      related_docs:
      - example.cnwp.yml
    - text: Check for any missing new options
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Review recent commits for new features: git log --oneline --grep="add.*option" -10

        2. Check recipe files for new options: grep "get_recipe_option" recipes/*.sh

        3. Compare with example.cnwp.yml

        4. Verify all get_recipe_option calls have corresponding example entries

        5. Check lib/ files for new configuration options

        Success: No new options missing from example.cnwp.yml, all features documented

        '
      related_docs:
      - example.cnwp.yml
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
  config_secrets:
    name: Secrets Example (.secrets.example.yml)
    description: Secrets configuration template
    files:
    - .secrets.example.yml
    checklist:
    - text: Verify all secret placeholders are present
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Open: .secrets.example.yml

        2. Check for sections: linode, cloudflare, gitlab, b2

        3. Verify each section has all required keys

        4. Compare with get_infra_secret calls: grep -r "get_infra_secret" lib/ scripts/

        5. Verify all accessed secrets have placeholders

        Success: All secrets that scripts access have placeholder entries in example

        '
      related_docs:
      - .secrets.example.yml
    - text: Check structure matches .secrets.yml expectations
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Compare structure: diff <(grep -v ''^#'' .secrets.example.yml | grep -v ''^$'') <(grep -v ''^#'' .secrets.yml | grep -v ''^$'' | sed ''s/:.*/: "REDACTED"/'')

        2. Verify YAML structure is identical

        3. Check nested keys match

        4. Verify all parent keys present

        5. Test YAML parsing: python3 -c "import yaml; yaml.safe_load(open(''.secrets.example.yml''))"

        Success: Structure matches, YAML is valid, all keys align with .secrets.yml format

        '
      related_docs:
      - .secrets.example.yml
    - text: Verify comments explain each secret
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Open: .secrets.example.yml

        2. Check each secret has explanatory comment

        3. Verify comments explain where to obtain secret

        4. Check for links to documentation or provider consoles

        5. Verify security notes for sensitive secrets

        Success: Every secret documented, comments explain purpose and how to obtain

        '
      related_docs:
      - .secrets.example.yml
    - text: Test copying to .secrets.yml works
      completed: false
      completed_by: null
      completed_at: null
      how_to_verify: '1. Backup existing: cp .secrets.yml .secrets.yml.bak

        2. Copy example: cp .secrets.example.yml .secrets.yml

        3. Fill in one secret (e.g., linode.api_token)

        4. Run command that uses that secret: pl storage auth (if b2 secret filled)

        5. Verify script reads secret correctly

        6. Restore: mv .secrets.yml.bak .secrets.yml

        Success: Example file serves as working template, scripts can read secrets after filling in values

        '
      related_docs:
      - .secrets.example.yml
    verified: false
    verified_by: null
    verified_at: null
    file_hash: null
    notes: null
